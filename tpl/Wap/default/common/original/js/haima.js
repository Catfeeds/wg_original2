! function(I) {
	function g(A) {
		if (C[A]) return C[A].exports;
		var n = C[A] = {
			exports: {},
			id: A,
			loaded: !1
		};
		return I[A].call(n.exports, n, n.exports, g), n.loaded = !0, n.exports
	}
	var C = {};
	return g.m = I, g.c = C, g.p = "", g(0)
}([function(module, exports, __webpack_require__) {
	eval("// webpack 入口文件，包含js和less\n\n// 登录,注册流程\n__webpack_require__(1);\n__webpack_require__(2);\n\n// 首页模块\n__webpack_require__(3);\n\n// 预约模块\n__webpack_require__(4);\n__webpack_require__(5);\n__webpack_require__(6);\n__webpack_require__(7);\n__webpack_require__(8);\n__webpack_require__(9);\n\n// 订单模块\n__webpack_require__(10);\n__webpack_require__(11);\n__webpack_require__(12);\n__webpack_require__(13);\n\n// 个人信息模块\n__webpack_require__(14);\n__webpack_require__(15);\n\n\n// 页面注册\n__webpack_require__(16);\n\n\n\n// 登录,注册流程\n__webpack_require__(17);\n__webpack_require__(18);\n\n// 首页模块\n__webpack_require__(19);\n\n// 预约模块\n__webpack_require__(20);\n__webpack_require__(21);\n__webpack_require__(22);\n__webpack_require__(23);\n__webpack_require__(24);\n__webpack_require__(25);\n\n// 订单模块\n__webpack_require__(26);\n__webpack_require__(27);\n__webpack_require__(28);\n__webpack_require__(29);\n\n// 个人信息模块\n__webpack_require__(30);\n\n// 关注二维码页面\n__webpack_require__(31);\n\n// 错误提示页面\n__webpack_require__(32);\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvZW50cnkuanM/N2Q1MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB3ZWJwYWNrIOWFpeWPo+aWh+S7tu+8jOWMheWQq2pz5ZKMbGVzc1xuXG4vLyDnmbvlvZUs5rOo5YaM5rWB56iLXG5yZXF1aXJlKCcuL2xvZ2luLmpzJyk7XG5yZXF1aXJlKCcuL3JlZ2lzdGVyLmpzJyk7XG5cbi8vIOmmlumhteaooeWdl1xucmVxdWlyZSgnLi9ob21lLmpzJyk7XG5cbi8vIOmihOe6puaooeWdl1xucmVxdWlyZSgnLi9zZWxlY3RTdG9yZS5qcycpO1xucmVxdWlyZSgnLi9zZWxlY3RNZWFsLmpzJyk7XG5yZXF1aXJlKCcuL3NlbGVjdE1lYWxJbmZvLmpzJyk7XG5yZXF1aXJlKCcuL3NlbGVjdFNjaGVkdWxlLmpzJyk7XG5yZXF1aXJlKCcuL3NldHRsZW1lbnRJbmZvLmpzJyk7XG5yZXF1aXJlKCcuL3BheW1lbnQuanMnKTtcblxuLy8g6K6i5Y2V5qih5Z2XXG5yZXF1aXJlKCcuL29yZGVycy5qcycpO1xucmVxdWlyZSgnLi9kb3duUGhvdG8uanMnKTtcbnJlcXVpcmUoJy4vbW9kaWZ5U2NoZWR1bGUuanMnKTtcbnJlcXVpcmUoJy4vbWFnaWMuanMnKTtcblxuLy8g5Liq5Lq65L+h5oGv5qih5Z2XXG5yZXF1aXJlKCcuL215SW5mby5qcycpO1xucmVxdWlyZSgnLi9xcmNvZGUuanMnKTtcblxuXG4vLyDpobXpnaLms6jlhoxcbnJlcXVpcmUoJy4vcGFnZWluaXQuanMnKTtcblxuXG5cbi8vIOeZu+W9lSzms6jlhozmtYHnqItcbnJlcXVpcmUoJy4uL2xlc3MvbG9naW4ubGVzcycpO1xucmVxdWlyZSgnLi4vbGVzcy9yZWdpc3Rlci5sZXNzJyk7XG5cbi8vIOmmlumhteaooeWdl1xucmVxdWlyZSgnLi4vbGVzcy9ob21lLmxlc3MnKTtcblxuLy8g6aKE57qm5qih5Z2XXG5yZXF1aXJlKCcuLi9sZXNzL3NlbGVjdFN0b3JlLmxlc3MnKTtcbnJlcXVpcmUoJy4uL2xlc3Mvc2VsZWN0TWVhbC5sZXNzJyk7XG5yZXF1aXJlKCcuLi9sZXNzL3NlbGVjdE1lYWxJbmZvLmxlc3MnKTtcbnJlcXVpcmUoJy4uL2xlc3Mvc2VsZWN0U2NoZWR1bGUubGVzcycpO1xucmVxdWlyZSgnLi4vbGVzcy9zZXR0bGVtZW50SW5mby5sZXNzJyk7XG5yZXF1aXJlKCcuLi9sZXNzL3BheW1lbnQubGVzcycpO1xuXG4vLyDorqLljZXmqKHlnZdcbnJlcXVpcmUoJy4uL2xlc3Mvb3JkZXJzLmxlc3MnKTtcbnJlcXVpcmUoJy4uL2xlc3MvZG93blBob3RvLmxlc3MnKTtcbnJlcXVpcmUoJy4uL2xlc3MvbW9kaWZ5U2NoZWR1bGUubGVzcycpO1xucmVxdWlyZSgnLi4vbGVzcy9tYWdpYy5sZXNzJyk7XG5cbi8vIOS4quS6uuS/oeaBr+aooeWdl1xucmVxdWlyZSgnLi4vbGVzcy9teUluZm8ubGVzcycpO1xuXG4vLyDlhbPms6jkuoznu7TnoIHpobXpnaJcbnJlcXVpcmUoJy4uL2xlc3MvcXJjb2RlLmxlc3MnKTtcblxuLy8g6ZSZ6K+v5o+Q56S66aG16Z2iXG5yZXF1aXJlKCcuLi9sZXNzL2Vycm9yVGlwLmxlc3MnKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL2VudHJ5LmpzXG4gKiogbW9kdWxlIGlkID0gMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("$(function() {\r\n    // 登录页面    \r\n    $(document).on('pageInit', '#login', function(e, id, page) {\r\n        // 关闭模态框\r\n        $.closeModal('.modal-in');\r\n\r\n        //input选中样式\r\n        inputStyleShow();\r\n\r\n        // 阻止滑动页面\r\n        banTouchmove('#login');\r\n\r\n        // SUI操作表功能\r\n        $(document).on('click', '.user-forgetBtn', function() {\r\n            $.closeModal('.modal-in');\r\n            var buttons1 = [{\r\n                text: '通过手机号找回密码',\r\n                bold: true,\r\n                color: '#333',\r\n                onClick: function() {\r\n                    $.router.load('/Index/findPassWord');\r\n                }\r\n            }, {\r\n                text: '帐号申诉',\r\n                bold: true,\r\n                color: 'danger',\r\n                onClick: function() {\r\n                    $.router.load('/Index/appeal');\r\n                }\r\n            }];\r\n            var buttons2 = [{\r\n                text: '取消'\r\n            }];\r\n            var groups = [buttons1, buttons2];\r\n            $.actions(groups);\r\n        });\r\n\r\n        // 登录\r\n        $('#btn-login').off('click').on('click', submitData);\r\n\r\n        //提交登陆信息\r\n        function submitData(e) {\r\n            var data = {};\r\n            var regPhone = /^1\\d{10}$/;\r\n            data.phone = $('.user-name input').val();\r\n            data.pass = $('.user-password input').val();\r\n\r\n\r\n            //空值检查\r\n            for (var i in data) {\r\n                if (!data[i]) {\r\n                    $.toast('登陆失败,手机号码或密码不可为空');\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // 手机号检查\r\n            if (!regPhone.test(data.phone)) {\r\n                $.toast('登录失败,请输入正确的手机号码');\r\n                return false;\r\n            }\r\n            $.showIndicator();\r\n            $.post(\r\n                m_module + '/Api/login', data,\r\n                function(response) {\r\n                    $.hideIndicator();\r\n                    if (response.error === 0) {\r\n                        window.history.pushState({}, '海马体照相馆', m_module);\r\n                        //跳转回登陆前的页面\r\n                        if (response.msg != '登陆成功') {\r\n                            $.router.load(response.msg);\r\n                        } else {\r\n                            $.router.load('/Index/home');\r\n                        }\r\n                    } else {\r\n                        $.toast(response.msg);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n        // 前往注册\r\n        $('#btn-register').on('click', function(e) {\r\n            $.router.load('/Index/register');\r\n        });\r\n    });\r\n\r\n\r\n\r\n    // 找回密码\r\n    var smsTimer;\r\n\r\n    $(document).on('pageInit', '#find-password', function(e, id, page) {\r\n        // 选择赋值\r\n        var $btnSuccess = $('#btn-success'); // 重置按钮\r\n        var $btnSmscode = $('#btn-smscode'); // 获取验证码按钮\r\n        var smsTimes = 0;\r\n        var smscd = 60;\r\n        // 关闭模态框\r\n        $.closeModal('.modal-in');\r\n\r\n        // 计时器初始化\r\n        clearInterval(smsTimer);\r\n        $('#btn-smscode').attr('disabled', 'false').html('获取验证码');\r\n\r\n        // input焦点样式\r\n        inputStyleShow();\r\n\r\n        // 阻止滑动页面\r\n        banTouchmove('#find-password');\r\n\r\n        // 获取验证码\r\n        $btnSmscode.on('click', sendSMS);\r\n\r\n        //重置提交\r\n        $btnSuccess.off('click').on('click', submitData);\r\n\r\n        //获取短信验证码\r\n        function sendSMS() {\r\n            var regPhone = /^1\\d{10}$/;\r\n            var imgcode = $('#input-imgcode').val();\r\n            var phonenum = $('#input-phone').val();\r\n            //初步验证手机号\r\n            if (!regPhone.test(phonenum)) {\r\n                $.toast('手机号输入有误，请重新输入');\r\n                return false;\r\n            }\r\n            if (!imgcode) {\r\n                $.toast('请输入图形验证码');\r\n                return false;\r\n            }\r\n\r\n            $('#btn-smscode').unbind('click');\r\n            $('#btn-smscode').attr('disabled', 'true');\r\n\r\n            smsTimer = setInterval(smsCd, 1000);\r\n            $.showIndicator();\r\n            $.get(m_module + '/Public/getUnionSmsCode', { phone: phonenum, simpleCode: imgcode, times: smsTimes, type: 2 },\r\n                function(response) {\r\n                    $.hideIndicator();\r\n                    if (response.error !== 0) {\r\n                        $('#btn-smscode').attr('disabled', 'false').html('获取验证码');\r\n                        clearInterval(smsTimer);\r\n                        $('#btn-smscode').click(sendSMS);\r\n                    } else {\r\n                        smsTimes += 1;\r\n                    }\r\n                    $.toast(response.msg);\r\n                }\r\n            );\r\n        }\r\n\r\n        //短信倒计时\r\n        function smsCd() {\r\n            if (smscd === 0) {\r\n                $('#btn-smscode').attr('disabled', 'false').html('获取验证码');\r\n                clearInterval(smsTimer);\r\n                $('#btn-smscode').click(sendSMS);\r\n                $('.register-image-draw img').click();\r\n                smscd = 60;\r\n            } else {\r\n                smscd--;\r\n                $('#btn-smscode').html(smscd + '秒');\r\n            }\r\n        }\r\n\r\n        //提交重置信息\r\n        function submitData() {\r\n            var regPhone = /^1\\d{10}$/;\r\n            var smscode = $('#input-smscode').val();\r\n            var phonenum = $('#input-phone').val();\r\n            var imgcode = $('#input-imgcode').val();\r\n            var data = {};\r\n            data.phone = phonenum;\r\n            data.dynamiccode = smscode;\r\n            data.pass = $('#input-pass').val();\r\n            var repass = $('#input-repass').val();\r\n\r\n            // 空值检查\r\n            for (var i in data) {\r\n                if (!data[i]) {\r\n                    $.toast('请填写完整注册信息哦');\r\n                    return false;\r\n                }\r\n            }\r\n            if (!regPhone.test(phonenum)) {\r\n                $.toast('手机号输入有误,请检查一下哦');\r\n                return false;\r\n            }\r\n\r\n            if (data.pass.length < 6) {\r\n                $.toast('为了保证您的账户安全,请设置多于6个字母的密码哦');\r\n                return false;\r\n            }\r\n\r\n            if (data.pass != repass) {\r\n                $.toast('两次输入密码不一致,请检查一下哦');\r\n                return false;\r\n            }\r\n            $.showIndicator();\r\n            $.post(m_module + '/Api/resetPass', data, function(response) {\r\n                $.hideIndicator();\r\n                if (response.error === 0) {\r\n                    showSuccess('重置成功', function() {\r\n                        clearInterval(smsTimer);\r\n                        $.router.load('/Index/login');\r\n                    });\r\n                } else {\r\n                    $.toast(response.msg);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n\r\n\r\n    // 申诉页面\r\n    $(document).on('pageInit', '#appeal', function() {\r\n        //阻止滑动页面\r\n        banTouchmove('#appeal');\r\n    });\r\n});\r\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvbG9naW4uanM/ZDhmOCJdLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCkge1xyXG4gICAgLy8g55m75b2V6aG16Z2iICAgIFxyXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNsb2dpbicsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XHJcbiAgICAgICAgLy8g5YWz6Zet5qih5oCB5qGGXHJcbiAgICAgICAgJC5jbG9zZU1vZGFsKCcubW9kYWwtaW4nKTtcclxuXHJcbiAgICAgICAgLy9pbnB1dOmAieS4reagt+W8j1xyXG4gICAgICAgIGlucHV0U3R5bGVTaG93KCk7XHJcblxyXG4gICAgICAgIC8vIOmYu+atoua7keWKqOmhtemdolxyXG4gICAgICAgIGJhblRvdWNobW92ZSgnI2xvZ2luJyk7XHJcblxyXG4gICAgICAgIC8vIFNVSeaTjeS9nOihqOWKn+iDvVxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudXNlci1mb3JnZXRCdG4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJC5jbG9zZU1vZGFsKCcubW9kYWwtaW4nKTtcclxuICAgICAgICAgICAgdmFyIGJ1dHRvbnMxID0gW3tcclxuICAgICAgICAgICAgICAgIHRleHQ6ICfpgJrov4fmiYvmnLrlj7fmib7lm57lr4bnoIEnLFxyXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzMzMycsXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvZmluZFBhc3NXb3JkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6ICfluJDlj7fnlLPor4knLFxyXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnZGFuZ2VyJyxcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9hcHBlYWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIHZhciBidXR0b25zMiA9IFt7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAn5Y+W5raIJ1xyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFtidXR0b25zMSwgYnV0dG9uczJdO1xyXG4gICAgICAgICAgICAkLmFjdGlvbnMoZ3JvdXBzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g55m75b2VXHJcbiAgICAgICAgJCgnI2J0bi1sb2dpbicpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBzdWJtaXREYXRhKTtcclxuXHJcbiAgICAgICAgLy/mj5DkuqTnmbvpmYbkv6Hmga9cclxuICAgICAgICBmdW5jdGlvbiBzdWJtaXREYXRhKGUpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHJlZ1Bob25lID0gL14xXFxkezEwfSQvO1xyXG4gICAgICAgICAgICBkYXRhLnBob25lID0gJCgnLnVzZXItbmFtZSBpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICBkYXRhLnBhc3MgPSAkKCcudXNlci1wYXNzd29yZCBpbnB1dCcpLnZhbCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8v56m65YC85qOA5p+lXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdCgn55m76ZmG5aSx6LSlLOaJi+acuuWPt+eggeaIluWvhueggeS4jeWPr+S4uuepuicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5omL5py65Y+35qOA5p+lXHJcbiAgICAgICAgICAgIGlmICghcmVnUGhvbmUudGVzdChkYXRhLnBob25lKSkge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn55m75b2V5aSx6LSlLOivt+i+k+WFpeato+ehrueahOaJi+acuuWPt+eggScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xyXG4gICAgICAgICAgICAkLnBvc3QoXHJcbiAgICAgICAgICAgICAgICBtX21vZHVsZSArICcvQXBpL2xvZ2luJywgZGF0YSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJ+a1t+mprOS9k+eFp+ebuOmmhicsIG1fbW9kdWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ot7Povazlm57nmbvpmYbliY3nmoTpobXpnaJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm1zZyAhPSAn55m76ZmG5oiQ5YqfJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZChyZXNwb25zZS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2hvbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWJjeW+gOazqOWGjFxyXG4gICAgICAgICQoJyNidG4tcmVnaXN0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZWdpc3RlcicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyDmib7lm57lr4bnoIFcclxuICAgIHZhciBzbXNUaW1lcjtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI2ZpbmQtcGFzc3dvcmQnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xyXG4gICAgICAgIC8vIOmAieaLqei1i+WAvFxyXG4gICAgICAgIHZhciAkYnRuU3VjY2VzcyA9ICQoJyNidG4tc3VjY2VzcycpOyAvLyDph43nva7mjInpkq5cclxuICAgICAgICB2YXIgJGJ0blNtc2NvZGUgPSAkKCcjYnRuLXNtc2NvZGUnKTsgLy8g6I635Y+W6aqM6K+B56CB5oyJ6ZKuXHJcbiAgICAgICAgdmFyIHNtc1RpbWVzID0gMDtcclxuICAgICAgICB2YXIgc21zY2QgPSA2MDtcclxuICAgICAgICAvLyDlhbPpl63mqKHmgIHmoYZcclxuICAgICAgICAkLmNsb3NlTW9kYWwoJy5tb2RhbC1pbicpO1xyXG5cclxuICAgICAgICAvLyDorqHml7blmajliJ3lp4vljJZcclxuICAgICAgICBjbGVhckludGVydmFsKHNtc1RpbWVyKTtcclxuICAgICAgICAkKCcjYnRuLXNtc2NvZGUnKS5hdHRyKCdkaXNhYmxlZCcsICdmYWxzZScpLmh0bWwoJ+iOt+WPlumqjOivgeeggScpO1xyXG5cclxuICAgICAgICAvLyBpbnB1dOeEpueCueagt+W8j1xyXG4gICAgICAgIGlucHV0U3R5bGVTaG93KCk7XHJcblxyXG4gICAgICAgIC8vIOmYu+atoua7keWKqOmhtemdolxyXG4gICAgICAgIGJhblRvdWNobW92ZSgnI2ZpbmQtcGFzc3dvcmQnKTtcclxuXHJcbiAgICAgICAgLy8g6I635Y+W6aqM6K+B56CBXHJcbiAgICAgICAgJGJ0blNtc2NvZGUub24oJ2NsaWNrJywgc2VuZFNNUyk7XHJcblxyXG4gICAgICAgIC8v6YeN572u5o+Q5LqkXHJcbiAgICAgICAgJGJ0blN1Y2Nlc3Mub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIHN1Ym1pdERhdGEpO1xyXG5cclxuICAgICAgICAvL+iOt+WPluefreS/oemqjOivgeeggVxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbmRTTVMoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWdQaG9uZSA9IC9eMVxcZHsxMH0kLztcclxuICAgICAgICAgICAgdmFyIGltZ2NvZGUgPSAkKCcjaW5wdXQtaW1nY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgcGhvbmVudW0gPSAkKCcjaW5wdXQtcGhvbmUnKS52YWwoKTtcclxuICAgICAgICAgICAgLy/liJ3mraXpqozor4HmiYvmnLrlj7dcclxuICAgICAgICAgICAgaWYgKCFyZWdQaG9uZS50ZXN0KHBob25lbnVtKSkge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn5omL5py65Y+36L6T5YWl5pyJ6K+v77yM6K+36YeN5paw6L6T5YWlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpbWdjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAkLnRvYXN0KCfor7fovpPlhaXlm77lvaLpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJCgnI2J0bi1zbXNjb2RlJykudW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgICAgICAkKCcjYnRuLXNtc2NvZGUnKS5hdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcblxyXG4gICAgICAgICAgICBzbXNUaW1lciA9IHNldEludGVydmFsKHNtc0NkLCAxMDAwKTtcclxuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XHJcbiAgICAgICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9QdWJsaWMvZ2V0VW5pb25TbXNDb2RlJywgeyBwaG9uZTogcGhvbmVudW0sIHNpbXBsZUNvZGU6IGltZ2NvZGUsIHRpbWVzOiBzbXNUaW1lcywgdHlwZTogMiB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2J0bi1zbXNjb2RlJykuYXR0cignZGlzYWJsZWQnLCAnZmFsc2UnKS5odG1sKCfojrflj5bpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzbXNUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNidG4tc21zY29kZScpLmNsaWNrKHNlbmRTTVMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtc1RpbWVzICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v55+t5L+h5YCS6K6h5pe2XHJcbiAgICAgICAgZnVuY3Rpb24gc21zQ2QoKSB7XHJcbiAgICAgICAgICAgIGlmIChzbXNjZCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bi1zbXNjb2RlJykuYXR0cignZGlzYWJsZWQnLCAnZmFsc2UnKS5odG1sKCfojrflj5bpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc21zVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bi1zbXNjb2RlJykuY2xpY2soc2VuZFNNUyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItaW1hZ2UtZHJhdyBpbWcnKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgc21zY2QgPSA2MDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNtc2NkLS07XHJcbiAgICAgICAgICAgICAgICAkKCcjYnRuLXNtc2NvZGUnKS5odG1sKHNtc2NkICsgJ+enkicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+aPkOS6pOmHjee9ruS/oeaBr1xyXG4gICAgICAgIGZ1bmN0aW9uIHN1Ym1pdERhdGEoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWdQaG9uZSA9IC9eMVxcZHsxMH0kLztcclxuICAgICAgICAgICAgdmFyIHNtc2NvZGUgPSAkKCcjaW5wdXQtc21zY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgcGhvbmVudW0gPSAkKCcjaW5wdXQtcGhvbmUnKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIGltZ2NvZGUgPSAkKCcjaW5wdXQtaW1nY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBkYXRhLnBob25lID0gcGhvbmVudW07XHJcbiAgICAgICAgICAgIGRhdGEuZHluYW1pY2NvZGUgPSBzbXNjb2RlO1xyXG4gICAgICAgICAgICBkYXRhLnBhc3MgPSAkKCcjaW5wdXQtcGFzcycpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVwYXNzID0gJCgnI2lucHV0LXJlcGFzcycpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgLy8g56m65YC85qOA5p+lXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdCgn6K+35aGr5YaZ5a6M5pW05rOo5YaM5L+h5oGv5ZOmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghcmVnUGhvbmUudGVzdChwaG9uZW51bSkpIHtcclxuICAgICAgICAgICAgICAgICQudG9hc3QoJ+aJi+acuuWPt+i+k+WFpeacieivryzor7fmo4Dmn6XkuIDkuIvlk6YnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEucGFzcy5sZW5ndGggPCA2KSB7XHJcbiAgICAgICAgICAgICAgICAkLnRvYXN0KCfkuLrkuobkv53or4HmgqjnmoTotKbmiLflronlhags6K+36K6+572u5aSa5LqONuS4quWtl+avjeeahOWvhueggeWTpicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5wYXNzICE9IHJlcGFzcykge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0LOivt+ajgOafpeS4gOS4i+WTpicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xyXG4gICAgICAgICAgICAkLnBvc3QobV9tb2R1bGUgKyAnL0FwaS9yZXNldFBhc3MnLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93U3VjY2Vzcygn6YeN572u5oiQ5YqfJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc21zVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIC8vIOeUs+iviemhtemdolxyXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNhcHBlYWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAvL+mYu+atoua7keWKqOmhtemdolxyXG4gICAgICAgIGJhblRvdWNobW92ZSgnI2FwcGVhbCcpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9qcy9sb2dpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=")
}, function(module, exports) {
	eval("$(function() {\r\n    // 注册页面\r\n    var smsTimer;\r\n\r\n    $(document).on('pageInit', '#register', function(e, id, page) {\r\n        // 选择赋值\r\n        var $btnSuccess = $('#btn-success'); // 注册按钮\r\n        var $btnSmscode = $('#btn-smscode'); // 获取验证码按钮\r\n        var $hmAgreement = $('#hm-agreement'); // 海马体协议链接\r\n        var smsTimes = 0;\r\n        var smscd = 60;\r\n\r\n        // 计时器初始化\r\n        clearInterval(smsTimer);\r\n        $('#btn-smscode').attr('disabled', 'false').html('获取验证码');\r\n\r\n        // 关闭模态框\r\n        $.closeModal('.modal-in');\r\n\r\n        // input焦点样式\r\n        inputStyleShow();\r\n\r\n        // 阻止滑动页面\r\n        banTouchmove('#register');\r\n\r\n        // 获取验证码\r\n        $btnSmscode.on('click', sendSMS);\r\n\r\n        // 前往协议页面\r\n        $hmAgreement.on('click', function() {\r\n            $.router.load('/Index/agreement');\r\n        });\r\n\r\n        //注册提交\r\n        $btnSuccess.on('click', submitData);\r\n\r\n        //获取短信验证码\r\n        function sendSMS() {\r\n            var regPhone = /^1\\d{10}$/;\r\n            var imgcode = $('#input-imgcode').val();\r\n            var phonenum = $('#input-phone').val();\r\n            //初步验证手机号\r\n            if (!regPhone.test(phonenum)) {\r\n                $.toast('手机号输入有误，请重新输入');\r\n                return false;\r\n            }\r\n            if (!imgcode) {\r\n                $.toast('请输入图形验证码');\r\n                return false;\r\n            }\r\n\r\n            $('#btn-smscode').unbind('click');\r\n            $('#btn-smscode').attr('disabled', 'true');\r\n\r\n            smsTimer = setInterval(smsCd, 1000);\r\n            $.showIndicator();\r\n            $.get(m_module + '/Public/getUnionSmsCode', { phone: phonenum, simpleCode: imgcode, times: smsTimes, type: 1 },\r\n                function(response) {\r\n                    $.hideIndicator();\r\n                    if (response.error !== 0) {\r\n                        $('#btn-smscode').attr('disabled', 'false').html('获取验证码');\r\n                        clearInterval(smsTimer);\r\n                        $('#btn-smscode').click(sendSMS);\r\n                    } else {\r\n                        smsTimes += 1;\r\n                    }\r\n                    $.toast(response.msg);\r\n                }\r\n            );\r\n        }\r\n\r\n        //短信倒计时\r\n        function smsCd() {\r\n            if (smscd === 0) {\r\n                $('#btn-smscode').attr('disabled', 'false').html('获取验证码');\r\n                clearInterval(smsTimer);\r\n                $('#btn-smscode').click(sendSMS);\r\n                $('.register-image-draw img').click();\r\n                smscd = 60;\r\n            } else {\r\n                smscd--;\r\n                $('#btn-smscode').html(smscd + '秒');\r\n            }\r\n        }\r\n\r\n        //提交注册信息\r\n        function submitData() {\r\n            var regPhone = /^1\\d{10}$/;\r\n            var smscode = $('#input-smscode').val();\r\n            var phonenum = $('#input-phone').val();\r\n            var $checkagree = $('#input-checkagree');\r\n            var data = {};\r\n            data.phone = phonenum;\r\n            data.dynamiccode = smscode;\r\n            data.pass = $('#input-pass').val();\r\n            var repass = $('#input-repass').val();\r\n\r\n            // 空值检查\r\n            for (var i in data) {\r\n                if (!data[i]) {\r\n                    $.toast('请填写完整注册信息哦');\r\n                    return false;\r\n                }\r\n            }\r\n            if (!regPhone.test(phonenum)) {\r\n                $.toast('手机号输入有误,请检查一下哦');\r\n                return false;\r\n            }\r\n\r\n            if (!$checkagree.prop('checked')) {\r\n                $.toast('同意《海马体照相馆协议》才可以注册哦');\r\n                return false;\r\n            }\r\n\r\n            if (data.pass.length < 6) {\r\n                $.toast('为了保证您的账户安全,请设置多于6个字母的密码哦');\r\n                return false;\r\n            }\r\n\r\n            if (data.pass != repass) {\r\n                $.toast('两次输入密码不一致,请检查一下哦');\r\n                return false;\r\n            }\r\n            $.showIndicator();\r\n            $.post(\r\n                m_module + '/Api/register', data,\r\n                function(response) {\r\n                    $.hideIndicator();\r\n                    if (response.error === 0) {\r\n                        showSuccess('注册成功', function() {\r\n                            clearInterval(smsTimer);\r\n                            //跳转回登陆前的页面\r\n                            window.history.pushState({}, '海马体照相馆', m_module);\r\n                            if (response.msg != '注册成功') {\r\n                                $.router.load(response.msg);\r\n                            } else {\r\n                                $.router.load('/Index/home');\r\n                            }\r\n                        });\r\n                    } else {\r\n                        $.toast(response.msg);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    });\r\n\r\n    // 协议页面\r\n    $(document).on('pageInit', '#agreement', function(e, id, page) {\r\n        $('#agreement').scroller('refresh');\r\n    });\r\n});\r\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvcmVnaXN0ZXIuanM/ZjY4OSJdLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCkge1xyXG4gICAgLy8g5rOo5YaM6aG16Z2iXHJcbiAgICB2YXIgc21zVGltZXI7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNyZWdpc3RlcicsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XHJcbiAgICAgICAgLy8g6YCJ5oup6LWL5YC8XHJcbiAgICAgICAgdmFyICRidG5TdWNjZXNzID0gJCgnI2J0bi1zdWNjZXNzJyk7IC8vIOazqOWGjOaMiemSrlxyXG4gICAgICAgIHZhciAkYnRuU21zY29kZSA9ICQoJyNidG4tc21zY29kZScpOyAvLyDojrflj5bpqozor4HnoIHmjInpkq5cclxuICAgICAgICB2YXIgJGhtQWdyZWVtZW50ID0gJCgnI2htLWFncmVlbWVudCcpOyAvLyDmtbfpqazkvZPljY/orq7pk77mjqVcclxuICAgICAgICB2YXIgc21zVGltZXMgPSAwO1xyXG4gICAgICAgIHZhciBzbXNjZCA9IDYwO1xyXG5cclxuICAgICAgICAvLyDorqHml7blmajliJ3lp4vljJZcclxuICAgICAgICBjbGVhckludGVydmFsKHNtc1RpbWVyKTtcclxuICAgICAgICAkKCcjYnRuLXNtc2NvZGUnKS5hdHRyKCdkaXNhYmxlZCcsICdmYWxzZScpLmh0bWwoJ+iOt+WPlumqjOivgeeggScpO1xyXG5cclxuICAgICAgICAvLyDlhbPpl63mqKHmgIHmoYZcclxuICAgICAgICAkLmNsb3NlTW9kYWwoJy5tb2RhbC1pbicpO1xyXG5cclxuICAgICAgICAvLyBpbnB1dOeEpueCueagt+W8j1xyXG4gICAgICAgIGlucHV0U3R5bGVTaG93KCk7XHJcblxyXG4gICAgICAgIC8vIOmYu+atoua7keWKqOmhtemdolxyXG4gICAgICAgIGJhblRvdWNobW92ZSgnI3JlZ2lzdGVyJyk7XHJcblxyXG4gICAgICAgIC8vIOiOt+WPlumqjOivgeeggVxyXG4gICAgICAgICRidG5TbXNjb2RlLm9uKCdjbGljaycsIHNlbmRTTVMpO1xyXG5cclxuICAgICAgICAvLyDliY3lvoDljY/orq7pobXpnaJcclxuICAgICAgICAkaG1BZ3JlZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9hZ3JlZW1lbnQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/ms6jlhozmj5DkuqRcclxuICAgICAgICAkYnRuU3VjY2Vzcy5vbignY2xpY2snLCBzdWJtaXREYXRhKTtcclxuXHJcbiAgICAgICAgLy/ojrflj5bnn63kv6Hpqozor4HnoIFcclxuICAgICAgICBmdW5jdGlvbiBzZW5kU01TKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnUGhvbmUgPSAvXjFcXGR7MTB9JC87XHJcbiAgICAgICAgICAgIHZhciBpbWdjb2RlID0gJCgnI2lucHV0LWltZ2NvZGUnKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIHBob25lbnVtID0gJCgnI2lucHV0LXBob25lJykudmFsKCk7XHJcbiAgICAgICAgICAgIC8v5Yid5q2l6aqM6K+B5omL5py65Y+3XHJcbiAgICAgICAgICAgIGlmICghcmVnUGhvbmUudGVzdChwaG9uZW51bSkpIHtcclxuICAgICAgICAgICAgICAgICQudG9hc3QoJ+aJi+acuuWPt+i+k+WFpeacieivr++8jOivt+mHjeaWsOi+k+WFpScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaW1nY29kZSkge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn6K+36L6T5YWl5Zu+5b2i6aqM6K+B56CBJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoJyNidG4tc21zY29kZScpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAgICAgJCgnI2J0bi1zbXNjb2RlJykuYXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgc21zVGltZXIgPSBzZXRJbnRlcnZhbChzbXNDZCwgMTAwMCk7XHJcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xyXG4gICAgICAgICAgICAkLmdldChtX21vZHVsZSArICcvUHVibGljL2dldFVuaW9uU21zQ29kZScsIHsgcGhvbmU6IHBob25lbnVtLCBzaW1wbGVDb2RlOiBpbWdjb2RlLCB0aW1lczogc21zVGltZXMsIHR5cGU6IDEgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNidG4tc21zY29kZScpLmF0dHIoJ2Rpc2FibGVkJywgJ2ZhbHNlJykuaHRtbCgn6I635Y+W6aqM6K+B56CBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc21zVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjYnRuLXNtc2NvZGUnKS5jbGljayhzZW5kU01TKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbXNUaW1lcyArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KHJlc3BvbnNlLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+efreS/oeWAkuiuoeaXtlxyXG4gICAgICAgIGZ1bmN0aW9uIHNtc0NkKCkge1xyXG4gICAgICAgICAgICBpZiAoc21zY2QgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICQoJyNidG4tc21zY29kZScpLmF0dHIoJ2Rpc2FibGVkJywgJ2ZhbHNlJykuaHRtbCgn6I635Y+W6aqM6K+B56CBJyk7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNtc1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICQoJyNidG4tc21zY29kZScpLmNsaWNrKHNlbmRTTVMpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWltYWdlLWRyYXcgaW1nJykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgIHNtc2NkID0gNjA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzbXNjZC0tO1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bi1zbXNjb2RlJykuaHRtbChzbXNjZCArICfnp5InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/mj5DkuqTms6jlhozkv6Hmga9cclxuICAgICAgICBmdW5jdGlvbiBzdWJtaXREYXRhKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnUGhvbmUgPSAvXjFcXGR7MTB9JC87XHJcbiAgICAgICAgICAgIHZhciBzbXNjb2RlID0gJCgnI2lucHV0LXNtc2NvZGUnKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIHBob25lbnVtID0gJCgnI2lucHV0LXBob25lJykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciAkY2hlY2thZ3JlZSA9ICQoJyNpbnB1dC1jaGVja2FncmVlJyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgICAgIGRhdGEucGhvbmUgPSBwaG9uZW51bTtcclxuICAgICAgICAgICAgZGF0YS5keW5hbWljY29kZSA9IHNtc2NvZGU7XHJcbiAgICAgICAgICAgIGRhdGEucGFzcyA9ICQoJyNpbnB1dC1wYXNzJykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciByZXBhc3MgPSAkKCcjaW5wdXQtcmVwYXNzJykudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDnqbrlgLzmo4Dmn6VcclxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGFbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KCfor7floavlhpnlrozmlbTms6jlhozkv6Hmga/lk6YnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFyZWdQaG9uZS50ZXN0KHBob25lbnVtKSkge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn5omL5py65Y+36L6T5YWl5pyJ6K+vLOivt+ajgOafpeS4gOS4i+WTpicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoISRjaGVja2FncmVlLnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn5ZCM5oSP44CK5rW36ams5L2T54Wn55u46aaG5Y2P6K6u44CL5omN5Y+v5Lul5rOo5YaM5ZOmJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnBhc3MubGVuZ3RoIDwgNikge1xyXG4gICAgICAgICAgICAgICAgJC50b2FzdCgn5Li65LqG5L+d6K+B5oKo55qE6LSm5oi35a6J5YWoLOivt+iuvue9ruWkmuS6jjbkuKrlrZfmr43nmoTlr4bnoIHlk6YnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEucGFzcyAhPSByZXBhc3MpIHtcclxuICAgICAgICAgICAgICAgICQudG9hc3QoJ+S4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCzor7fmo4Dmn6XkuIDkuIvlk6YnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcclxuICAgICAgICAgICAgJC5wb3N0KFxyXG4gICAgICAgICAgICAgICAgbV9tb2R1bGUgKyAnL0FwaS9yZWdpc3RlcicsIGRhdGEsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93U3VjY2Vzcygn5rOo5YaM5oiQ5YqfJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNtc1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6Lez6L2s5Zue55m76ZmG5YmN55qE6aG16Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sICfmtbfpqazkvZPnhafnm7jppoYnLCBtX21vZHVsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubXNnICE9ICfms6jlhozmiJDlip8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZChyZXNwb25zZS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvaG9tZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KHJlc3BvbnNlLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOWNj+iurumhtemdolxyXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNhZ3JlZW1lbnQnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xyXG4gICAgICAgICQoJyNhZ3JlZW1lbnQnKS5zY3JvbGxlcigncmVmcmVzaCcpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9qcy9yZWdpc3Rlci5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");
}, function(module, exports) {
	eval("$(function() {\n    // 首页模块\n    // 首页\n    $(document).on('pageInit', '#index-page', function(e, id, page) {\n        var scid = cookie.get('scid');\n\n        $.reinitSwiper('#index-page');\n        getProductList(); // 获得产品列表\n        if (scid) {\n            var _city = getCityName(scid);\n            $('.index-position em').html(_city.split('市')[0]); // 处理定位错误\n        } else {\n            geolocation(); // 定位请求及处理\n        }\n        $('.index-position').on('click', function() {\n            $.router.load('/Index/reservationPosition'); // 前往选择城市页面\n        });\n        $('nav a').on('click', function() {\n            var linkfrom = $(this).data('link');\n            cookie.set('linkfrom', linkfrom);\n            window.location.href = m_module + linkfrom;\n        });\n\n        /**\n         * 根据百度逆解析获得的城市名得到城市码,并更改cookie -> scid(当前选择城市)的值\n         * @param  {String} scname 城市名,要求完整,比如'杭州市'\n         * @return {Object}        设置cookie对象\n         */\n        function getCityCode(scname) {\n            var cityCodeArr = []; // 城市码数组\n            var cityNameArr = []; // 城市名数组,两者一一对应\n            var n, returnCookieStr;\n            for (var i in cityCodeList) {\n                cityCodeArr.push(cityCodeList[i].citycode);\n                cityNameArr.push(cityCodeList[i].cityname);\n            }\n            n = $.inArray(scname, cityNameArr);\n            return cityCodeArr[n];\n        }\n\n\n        /**\n         * 定位请求,仅在移动端使用\n         */\n        function geolocation() {\n            if (navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(getLocationCity, locationError);\n            } else {\n                $('.index-position em').html('暂无定位信息'); // 处理定位错误\n            }\n        }\n\n\n        /**\n         * 获取当前位置经纬度,通过百度地址逆解析服务获取当前城市\n         * @param  {[type]} position 经纬度信息处理\n         */\n        function getLocationCity(position) {\n            var longitude = position.coords.longitude;\n            var latitude = position.coords.latitude;\n            var point = new BMap.Point(longitude, latitude);\n            var gc = new BMap.Geocoder();\n            gc.getLocation(point, function(rs) {\n                var addComp = rs.addressComponents;\n                var cd = getCityCode(addComp.city); // 获得定位城市\n                var _city = getCityName(cd); // 获得城市名\n                cookie.set('scid', cd); // 获取真实位置id，传值\n                $('.index-position em').html(_city.split('市')[0]); // 左上角显示定位城市\n            });\n        }\n\n\n        /**\n         * 定位失败时处理方法\n         * @param  {[type]} error 定位失败处理\n         */\n        function locationError(error) {\n            var msg = '';\n            switch (error.code) {\n                case 1:\n                    msg = '用户拒绝了位置服务';\n                    break;\n                case 2:\n                    msg = '无法获取位置信息';\n                    break;\n                case 3:\n                    msg = '获取信息超时';\n                    break;\n                default:\n                    msg = 'code: ' + error.code + 'msg: ' + error.messgae;\n            }\n            $('.index-position em').html('暂无定位信息'); // 处理定位错误\n        }\n\n\n        /**\n         * 产品介绍列表\n         */\n        function getProductList() {\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getIndexData',\n                function(data) {\n                    if (data.error === 0) {\n                        $.hideIndicator();\n                        var products = data.msg.product; // 获得产品数据\n                        var banners = data.msg.banner; // 获得banner数据\n                        var bannersHtml = '';\n                        var swiperHtml = '';\n                        var $banner = $('#slide-index');\n                        var tabHtml = '';\n                        var tabUnitHtml = '';\n                        var tabCHtml = '';\n                        var tabCUnitHtml = '';\n\n\n                        // banner图\n                        for (var index in banners) {\n                            var bannerUrl = banners[index].BA_Url ? banners[index].BA_Url : 'javascript:;';\n                            bannersHtml += '<div class=\"swiper-slide\"><a class=\"external\" href=\"' +\n                                bannerUrl + '\"><img src=\"' +\n                                banners[index].BA_Path + '\" alt=\"banner\" style=\"display:none;\"></a></div>';\n                        }\n                        swiperHtml = '<div class=\"swiper-container\" id=\"swiper-banners\"><div class=\"swiper-wrapper\">' +\n                            bannersHtml + '</div><div class=\"swiper-pagination\"></div><div class=\"wrapper\"><div class=\"loadingWrap\"><div class=\"cupWrap\"><div class=\"coffee_cup\"></div></div></div></div></div></div>';\n                        $('#slider-index').html(swiperHtml);\n                        $(\"#swiper-banners\").swiper({ speed: 400, spaceBetween: 0, autoplay: 3000, loop: true });\n\n                        //图片加载完成回调\n                        $('.external img').on('load', function() {\n                            $(this).parents().find('.wrapper').remove();\n                            $(this).show();\n                        });\n\n                        for (var j in products) {\n                            var proUnitHtml = '';\n                            var pid = parseInt(products[j].PT_Id);\n                            var pname = products[j].PT_Name;\n\n                            // 模块名\n                            // 隐藏模块\n                            if (products[j].PT_Product.length !== 0) {\n                                tabUnitHtml += '<a href=\"#pro-' + pid + '\" class=\"tab-link button ' + (pid === 1 ? 'active' : '') + '\">' + pname + '</a>';\n                            } else {\n                                tabUnitHtml += '';\n                            }\n                            // 获取首页产品列表\n                            for (var z in products[j].PT_Product) {\n                                var _products = products[j].PT_Product[z];\n                                proUnitHtml += '<div class=\"photo-list\" data-pid=\"' +\n                                    _products.P_Id + '\"><img src=\"' +\n                                    _products.P_ImgPath + '\" alt=\"' +\n                                    _products.P_Name + '\" style=\"display:none\"><div class=\"wrapper\"><div class=\"loadingWrap\"><div class=\"cupWrap\"><div class=\"coffee_cup\"></div></div></div></div></div>';\n                            }\n                            tabCUnitHtml += '<div id=\"pro-' + pid + '\" class=\"tab ' + (pid === 1 ? 'active' : '') + '\"><div class=\"content-block\">' + proUnitHtml + '</div></div>';\n                        }\n                        tabHtml = '<div class=\"buttons-tab\">' + tabUnitHtml + '</div>';\n                        tabCHtml = '<div class=\"content-block\"><div class=\"tabs\">' + tabCUnitHtml + '</div></div>';\n                        $('#home-content').html(tabHtml + tabCHtml);\n                        //图片加载完成回调\n                        $('.photo-list img').on('load', function() {\n                            $(this).parent().find('.wrapper').remove();\n                            $(this).show();\n                        });\n                    }\n                    $('.photo-list').on('click', photoHandle); // 列表绑定点击事件\n                });\n        }\n\n        // 产品点击处理\n        var photoHandle = function() {\n            var pid = $(this).data('pid');\n            cookie.set('pid', pid);\n            $.router.load('/Index/productDetails');\n        };\n    });\n\n\n\n    $(document).on('pageAnimationStart', '#product-details', function(e, id, page) {\n        $('#product-intro').html('');\n        $('#product-showList .row').html('');\n    });\n\n\n\n    // 产品详情页\n    $(document).on('pageInit', '#product-details', function(e, id, page) {\n        var pid = cookie.get('pid') || 1; // 获得选中的产品p_id\n        var paged = 1;\n        showProDetails();\n        $('.product-appointment').on('click', function() {\n            window.location.href = m_module + '/Index/reservation';\n        });\n        $('#product-showList .product-moreBtn').on('click', function() {\n            showMoreHandle();\n        });\n\n\n        /**\n         * 展示产品详情\n         */\n        function showProDetails() {\n            $('.content').scrollTop(0);\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getProductDetail/pid/' + pid + '/page/' + paged, function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n\n                    var proDetails = data.msg;\n                    var proIntroHtml = '';\n                    var picShowHtml = '';\n                    var picTypeHtml = '';\n                    var priceHtml = '';\n                    var scid = cookie.get('scid');\n                    var pidColArr = ['1', '2', '21', '7', '30', '31', '32', '33']; // 竖图数组\n                    var imgStatus;\n\n                    var priceNow = parseInt(!isSupercity(scid) ? proDetails.P_Price : proDetails.P_Price_Ext1);\n                    var priceOri = parseInt(!isSupercity(scid) ? proDetails.P_OriPrice : proDetails.P_OriPrice_Ext1);\n                    var priceDouble = parseInt(!isSupercity(scid) ? proDetails.PD_DoublePrice : proDetails.PD_DoublePrice_Ext1);\n                    var priceDoublePrint = parseInt(!isSupercity(scid) ? proDetails.PD_DoublePrintPrice : proDetails.PD_DoublePrintPrice_Ext1);\n\n                    if (priceNow === priceOri || priceOri === 0) {\n                        priceHtml = '<span class=\"product-price\">' + priceNow + '元/套</span>';\n                    } else {\n                        priceHtml = '<span class=\"product-price\">' + priceNow + '元/套</span></p><span class=\"product-price-origin\">' + priceOri + '元/套</span>';\n                    }\n\n                    proIntroHtml = '<div class=\"product-infoGroup\"><p>' +\n                        proDetails.P_Name + priceHtml + '<span class=\"product-tip\">' +\n                        proDetails.PD_Desc + '</span></div><div class=\"product-infoGroup\"><p>加修加印<span class=\"product-price\">' +\n                        priceDouble + '元/张</span></p><span class=\"product-tip\">' +\n                        proDetails.PD_DoubleDesc + '</span></div><div class=\"product-infoGroup\"><p>加印<span class=\"product-price\">' +\n                        priceDoublePrint + ((pid == 1 || pid == 2 || pid == 3) ? '元/版' : '元/张') + '</span></p><span class=\"product-tip\">' +\n                        proDetails.PD_DoublePrintDesc + (proDetails.PD_Note ? '</span></div><p class=\"product-prompt\"><span>*</span>' +\n                        proDetails.PD_Note + '</p>' : '</span></div><p class=\"product-prompt\"><span></span></p>');\n\n                    // 横图类型判断\n                    if ($.inArray(pid, pidColArr) >= 0) {\n                        picTypeHtml = '<div class=\"col-33 img-group\"><img src=\"';\n                        imgStatus = '!MobileV2Vertical';\n                    } else {\n                        picTypeHtml = '<div class=\"cross-img img-group\"><img src=\"';\n                        imgStatus = '!MobileV2Horizontal';\n                    }\n                    for (var index in proDetails.P_Photo) {\n                        picShowHtml += picTypeHtml + proDetails.P_Photo[index] + imgStatus + '\" alt=\"\" style=\"display:none\"><div class=\"wrapper\"><div class=\"loadingWrap\"><div class=\"cupWrap\"><div class=\"coffee_cup\"></div></div></div></div></div>';\n                    }\n\n\n                    if (data.msg.P_Photo.length === 9) {\n                        $('#product-showList .product-moreBtn').html('加载更多图片');\n                    } else {\n                        $('#product-showList .product-moreBtn').html('无更多图片');\n                        $('#product-showList .product-moreBtn').off('click');\n                    }\n                    $('#product-intro').html(proIntroHtml); // 产品详情\n                    $('#product-showList .row').html(picShowHtml); // 客片展示\n                    $('.img-group img').on('load', function() {\n                        $(this).parent().find('.wrapper').remove();\n                        $(this).show();\n                    });\n                } else {\n                    $.toast(data.msg);\n                }\n            });\n        }\n\n\n        /**\n         * 展示更多客片\n         */\n        function showMoreHandle() {\n            paged++;\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getProductDetail/pid/' + pid + '/page/' + paged, function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n                    var morePhoto = data.msg.P_Photo;\n                    var morePhotoHtml = '';\n                    var picTypeHtml = '';\n                    var pidColArr = ['1', '2', '21', '7', '30', '31', '32', '33']; // 竖图数组\n                    var imgStatus;\n                    // 横图类型判断\n                    if ($.inArray(pid, pidColArr) >= 0) {\n                        picTypeHtml = '<div class=\"col-33 img-group\"><img src=\"';\n                        imgStatus = '!MobileV2Vertical';\n\n                    } else {\n                        picTypeHtml = '<div class=\"cross-img img-group\"><img src=\"';\n                        imgStatus = '!MobileV2Horizontal';\n                    }\n                    for (var index in morePhoto) {\n                        morePhotoHtml += picTypeHtml + morePhoto[index] + imgStatus + '\" alt=\"\" style=\"display:none\"><div class=\"wrapper\"><div class=\"loadingWrap\"><div class=\"cupWrap\"><div class=\"coffee_cup\"></div></div></div></div></div>';\n                    }\n\n                    if (morePhoto.length < 9) {\n                        $('#product-showList .product-moreBtn').html('无更多图片');\n                        $('#product-showList .product-moreBtn').off('click');\n                        // return false;\n                    } else {\n                        $('#product-showList .product-moreBtn').html('加载更多图片');\n                    }\n\n                    $('#product-showList .row').append(morePhotoHtml);\n                    $('.img-group img').on('load', function() {\n                        $(this).parent().find('.wrapper').remove();\n                        $(this).show();\n                    });\n\n                }\n            });\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvaG9tZS5qcz9iZjQzIl0sInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG4gICAgLy8g6aaW6aG15qih5Z2XXG4gICAgLy8g6aaW6aG1XG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNpbmRleC1wYWdlJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIHNjaWQgPSBjb29raWUuZ2V0KCdzY2lkJyk7XG5cbiAgICAgICAgJC5yZWluaXRTd2lwZXIoJyNpbmRleC1wYWdlJyk7XG4gICAgICAgIGdldFByb2R1Y3RMaXN0KCk7IC8vIOiOt+W+l+S6p+WTgeWIl+ihqFxuICAgICAgICBpZiAoc2NpZCkge1xuICAgICAgICAgICAgdmFyIF9jaXR5ID0gZ2V0Q2l0eU5hbWUoc2NpZCk7XG4gICAgICAgICAgICAkKCcuaW5kZXgtcG9zaXRpb24gZW0nKS5odG1sKF9jaXR5LnNwbGl0KCfluIInKVswXSk7IC8vIOWkhOeQhuWumuS9jemUmeivr1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VvbG9jYXRpb24oKTsgLy8g5a6a5L2N6K+35rGC5Y+K5aSE55CGXG4gICAgICAgIH1cbiAgICAgICAgJCgnLmluZGV4LXBvc2l0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcmVzZXJ2YXRpb25Qb3NpdGlvbicpOyAvLyDliY3lvoDpgInmi6nln47luILpobXpnaJcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ25hdiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbGlua2Zyb20gPSAkKHRoaXMpLmRhdGEoJ2xpbmsnKTtcbiAgICAgICAgICAgIGNvb2tpZS5zZXQoJ2xpbmtmcm9tJywgbGlua2Zyb20pO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtX21vZHVsZSArIGxpbmtmcm9tO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICog5qC55o2u55m+5bqm6YCG6Kej5p6Q6I635b6X55qE5Z+O5biC5ZCN5b6X5Yiw5Z+O5biC56CBLOW5tuabtOaUuWNvb2tpZSAtPiBzY2lkKOW9k+WJjemAieaLqeWfjuW4ginnmoTlgLxcbiAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBzY25hbWUg5Z+O5biC5ZCNLOimgeaxguWujOaVtCzmr5TlpoIn5p2t5bee5biCJ1xuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICDorr7nva5jb29raWXlr7nosaFcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldENpdHlDb2RlKHNjbmFtZSkge1xuICAgICAgICAgICAgdmFyIGNpdHlDb2RlQXJyID0gW107IC8vIOWfjuW4gueggeaVsOe7hFxuICAgICAgICAgICAgdmFyIGNpdHlOYW1lQXJyID0gW107IC8vIOWfjuW4guWQjeaVsOe7hCzkuKTogIXkuIDkuIDlr7nlupRcbiAgICAgICAgICAgIHZhciBuLCByZXR1cm5Db29raWVTdHI7XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIGNpdHlDb2RlTGlzdCkge1xuICAgICAgICAgICAgICAgIGNpdHlDb2RlQXJyLnB1c2goY2l0eUNvZGVMaXN0W2ldLmNpdHljb2RlKTtcbiAgICAgICAgICAgICAgICBjaXR5TmFtZUFyci5wdXNoKGNpdHlDb2RlTGlzdFtpXS5jaXR5bmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuID0gJC5pbkFycmF5KHNjbmFtZSwgY2l0eU5hbWVBcnIpO1xuICAgICAgICAgICAgcmV0dXJuIGNpdHlDb2RlQXJyW25dO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5a6a5L2N6K+35rGCLOS7heWcqOenu+WKqOerr+S9v+eUqFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2VvbG9jYXRpb24oKSB7XG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihnZXRMb2NhdGlvbkNpdHksIGxvY2F0aW9uRXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuaW5kZXgtcG9zaXRpb24gZW0nKS5odG1sKCfmmoLml6DlrprkvY3kv6Hmga8nKTsgLy8g5aSE55CG5a6a5L2N6ZSZ6K+vXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5blvZPliY3kvY3nva7nu4/nuqzluqYs6YCa6L+H55m+5bqm5Zyw5Z2A6YCG6Kej5p6Q5pyN5Yqh6I635Y+W5b2T5YmN5Z+O5biCXG4gICAgICAgICAqIEBwYXJhbSAge1t0eXBlXX0gcG9zaXRpb24g57uP57qs5bqm5L+h5oGv5aSE55CGXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbkNpdHkocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBsb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICAgdmFyIGxhdGl0dWRlID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gbmV3IEJNYXAuUG9pbnQobG9uZ2l0dWRlLCBsYXRpdHVkZSk7XG4gICAgICAgICAgICB2YXIgZ2MgPSBuZXcgQk1hcC5HZW9jb2RlcigpO1xuICAgICAgICAgICAgZ2MuZ2V0TG9jYXRpb24ocG9pbnQsIGZ1bmN0aW9uKHJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFkZENvbXAgPSBycy5hZGRyZXNzQ29tcG9uZW50cztcbiAgICAgICAgICAgICAgICB2YXIgY2QgPSBnZXRDaXR5Q29kZShhZGRDb21wLmNpdHkpOyAvLyDojrflvpflrprkvY3ln47luIJcbiAgICAgICAgICAgICAgICB2YXIgX2NpdHkgPSBnZXRDaXR5TmFtZShjZCk7IC8vIOiOt+W+l+WfjuW4guWQjVxuICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ3NjaWQnLCBjZCk7IC8vIOiOt+WPluecn+WunuS9jee9rmlk77yM5Lyg5YC8XG4gICAgICAgICAgICAgICAgJCgnLmluZGV4LXBvc2l0aW9uIGVtJykuaHRtbChfY2l0eS5zcGxpdCgn5biCJylbMF0pOyAvLyDlt6bkuIrop5LmmL7npLrlrprkvY3ln47luIJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5a6a5L2N5aSx6LSl5pe25aSE55CG5pa55rOVXG4gICAgICAgICAqIEBwYXJhbSAge1t0eXBlXX0gZXJyb3Ig5a6a5L2N5aSx6LSl5aSE55CGXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBsb2NhdGlvbkVycm9yKGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgbXNnID0gJyc7XG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9ICfnlKjmiLfmi5Lnu53kuobkvY3nva7mnI3liqEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9ICfml6Dms5Xojrflj5bkvY3nva7kv6Hmga8nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9ICfojrflj5bkv6Hmga/otoXml7YnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBtc2cgPSAnY29kZTogJyArIGVycm9yLmNvZGUgKyAnbXNnOiAnICsgZXJyb3IubWVzc2dhZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJy5pbmRleC1wb3NpdGlvbiBlbScpLmh0bWwoJ+aaguaXoOWumuS9jeS/oeaBrycpOyAvLyDlpITnkIblrprkvY3plJnor69cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOS6p+WTgeS7i+e7jeWIl+ihqFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvZHVjdExpc3QoKSB7XG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9TYXBpL2dldEluZGV4RGF0YScsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHMgPSBkYXRhLm1zZy5wcm9kdWN0OyAvLyDojrflvpfkuqflk4HmlbDmja5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gZGF0YS5tc2cuYmFubmVyOyAvLyDojrflvpdiYW5uZXLmlbDmja5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3aXBlckh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkYmFubmVyID0gJCgnI3NsaWRlLWluZGV4Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYlVuaXRIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiQ0h0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJDVW5pdEh0bWwgPSAnJztcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYW5uZXLlm75cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGJhbm5lcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVyVXJsID0gYmFubmVyc1tpbmRleF0uQkFfVXJsID8gYmFubmVyc1tpbmRleF0uQkFfVXJsIDogJ2phdmFzY3JpcHQ6Oyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyc0h0bWwgKz0gJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGVcIj48YSBjbGFzcz1cImV4dGVybmFsXCIgaHJlZj1cIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJVcmwgKyAnXCI+PGltZyBzcmM9XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyc1tpbmRleF0uQkFfUGF0aCArICdcIiBhbHQ9XCJiYW5uZXJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj48L2E+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlckh0bWwgPSAnPGRpdiBjbGFzcz1cInN3aXBlci1jb250YWluZXJcIiBpZD1cInN3aXBlci1iYW5uZXJzXCI+PGRpdiBjbGFzcz1cInN3aXBlci13cmFwcGVyXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyc0h0bWwgKyAnPC9kaXY+PGRpdiBjbGFzcz1cInN3aXBlci1wYWdpbmF0aW9uXCI+PC9kaXY+PGRpdiBjbGFzcz1cIndyYXBwZXJcIj48ZGl2IGNsYXNzPVwibG9hZGluZ1dyYXBcIj48ZGl2IGNsYXNzPVwiY3VwV3JhcFwiPjxkaXYgY2xhc3M9XCJjb2ZmZWVfY3VwXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzbGlkZXItaW5kZXgnKS5odG1sKHN3aXBlckh0bWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzd2lwZXItYmFubmVyc1wiKS5zd2lwZXIoeyBzcGVlZDogNDAwLCBzcGFjZUJldHdlZW46IDAsIGF1dG9wbGF5OiAzMDAwLCBsb29wOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WbvueJh+WKoOi9veWujOaIkOWbnuiwg1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmV4dGVybmFsIGltZycpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCkuZmluZCgnLndyYXBwZXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIHByb2R1Y3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb1VuaXRIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpZCA9IHBhcnNlSW50KHByb2R1Y3RzW2pdLlBUX0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG5hbWUgPSBwcm9kdWN0c1tqXS5QVF9OYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qih5Z2X5ZCNXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6ZqQ6JeP5qih5Z2XXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RzW2pdLlBUX1Byb2R1Y3QubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYlVuaXRIdG1sICs9ICc8YSBocmVmPVwiI3Byby0nICsgcGlkICsgJ1wiIGNsYXNzPVwidGFiLWxpbmsgYnV0dG9uICcgKyAocGlkID09PSAxID8gJ2FjdGl2ZScgOiAnJykgKyAnXCI+JyArIHBuYW1lICsgJzwvYT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYlVuaXRIdG1sICs9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bpppbpobXkuqflk4HliJfooahcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB6IGluIHByb2R1Y3RzW2pdLlBUX1Byb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9wcm9kdWN0cyA9IHByb2R1Y3RzW2pdLlBUX1Byb2R1Y3Rbel07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb1VuaXRIdG1sICs9ICc8ZGl2IGNsYXNzPVwicGhvdG8tbGlzdFwiIGRhdGEtcGlkPVwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcHJvZHVjdHMuUF9JZCArICdcIj48aW1nIHNyYz1cIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Byb2R1Y3RzLlBfSW1nUGF0aCArICdcIiBhbHQ9XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wcm9kdWN0cy5QX05hbWUgKyAnXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48ZGl2IGNsYXNzPVwid3JhcHBlclwiPjxkaXYgY2xhc3M9XCJsb2FkaW5nV3JhcFwiPjxkaXYgY2xhc3M9XCJjdXBXcmFwXCI+PGRpdiBjbGFzcz1cImNvZmZlZV9jdXBcIj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJDVW5pdEh0bWwgKz0gJzxkaXYgaWQ9XCJwcm8tJyArIHBpZCArICdcIiBjbGFzcz1cInRhYiAnICsgKHBpZCA9PT0gMSA/ICdhY3RpdmUnIDogJycpICsgJ1wiPjxkaXYgY2xhc3M9XCJjb250ZW50LWJsb2NrXCI+JyArIHByb1VuaXRIdG1sICsgJzwvZGl2PjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJIdG1sID0gJzxkaXYgY2xhc3M9XCJidXR0b25zLXRhYlwiPicgKyB0YWJVbml0SHRtbCArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFiQ0h0bWwgPSAnPGRpdiBjbGFzcz1cImNvbnRlbnQtYmxvY2tcIj48ZGl2IGNsYXNzPVwidGFic1wiPicgKyB0YWJDVW5pdEh0bWwgKyAnPC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNob21lLWNvbnRlbnQnKS5odG1sKHRhYkh0bWwgKyB0YWJDSHRtbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WbvueJh+WKoOi9veWujOaIkOWbnuiwg1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnBob3RvLWxpc3QgaW1nJykub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy53cmFwcGVyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKCcucGhvdG8tbGlzdCcpLm9uKCdjbGljaycsIHBob3RvSGFuZGxlKTsgLy8g5YiX6KGo57uR5a6a54K55Ye75LqL5Lu2XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDkuqflk4Hngrnlh7vlpITnkIZcbiAgICAgICAgdmFyIHBob3RvSGFuZGxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcGlkID0gJCh0aGlzKS5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgIGNvb2tpZS5zZXQoJ3BpZCcsIHBpZCk7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcHJvZHVjdERldGFpbHMnKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUFuaW1hdGlvblN0YXJ0JywgJyNwcm9kdWN0LWRldGFpbHMnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAkKCcjcHJvZHVjdC1pbnRybycpLmh0bWwoJycpO1xuICAgICAgICAkKCcjcHJvZHVjdC1zaG93TGlzdCAucm93JykuaHRtbCgnJyk7XG4gICAgfSk7XG5cblxuXG4gICAgLy8g5Lqn5ZOB6K+m5oOF6aG1XG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNwcm9kdWN0LWRldGFpbHMnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICB2YXIgcGlkID0gY29va2llLmdldCgncGlkJykgfHwgMTsgLy8g6I635b6X6YCJ5Lit55qE5Lqn5ZOBcF9pZFxuICAgICAgICB2YXIgcGFnZWQgPSAxO1xuICAgICAgICBzaG93UHJvRGV0YWlscygpO1xuICAgICAgICAkKCcucHJvZHVjdC1hcHBvaW50bWVudCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtX21vZHVsZSArICcvSW5kZXgvcmVzZXJ2YXRpb24nO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnI3Byb2R1Y3Qtc2hvd0xpc3QgLnByb2R1Y3QtbW9yZUJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2hvd01vcmVIYW5kbGUoKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5bGV56S65Lqn5ZOB6K+m5oOFXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzaG93UHJvRGV0YWlscygpIHtcbiAgICAgICAgICAgICQoJy5jb250ZW50Jykuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAkLmdldChtX21vZHVsZSArICcvU2FwaS9nZXRQcm9kdWN0RGV0YWlsL3BpZC8nICsgcGlkICsgJy9wYWdlLycgKyBwYWdlZCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb0RldGFpbHMgPSBkYXRhLm1zZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb0ludHJvSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGljU2hvd0h0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBpY1R5cGVIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmljZUh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjaWQgPSBjb29raWUuZ2V0KCdzY2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwaWRDb2xBcnIgPSBbJzEnLCAnMicsICcyMScsICc3JywgJzMwJywgJzMxJywgJzMyJywgJzMzJ107IC8vIOerluWbvuaVsOe7hFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1nU3RhdHVzO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmljZU5vdyA9IHBhcnNlSW50KCFpc1N1cGVyY2l0eShzY2lkKSA/IHByb0RldGFpbHMuUF9QcmljZSA6IHByb0RldGFpbHMuUF9QcmljZV9FeHQxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlT3JpID0gcGFyc2VJbnQoIWlzU3VwZXJjaXR5KHNjaWQpID8gcHJvRGV0YWlscy5QX09yaVByaWNlIDogcHJvRGV0YWlscy5QX09yaVByaWNlX0V4dDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpY2VEb3VibGUgPSBwYXJzZUludCghaXNTdXBlcmNpdHkoc2NpZCkgPyBwcm9EZXRhaWxzLlBEX0RvdWJsZVByaWNlIDogcHJvRGV0YWlscy5QRF9Eb3VibGVQcmljZV9FeHQxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlRG91YmxlUHJpbnQgPSBwYXJzZUludCghaXNTdXBlcmNpdHkoc2NpZCkgPyBwcm9EZXRhaWxzLlBEX0RvdWJsZVByaW50UHJpY2UgOiBwcm9EZXRhaWxzLlBEX0RvdWJsZVByaW50UHJpY2VfRXh0MSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaWNlTm93ID09PSBwcmljZU9yaSB8fCBwcmljZU9yaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VIdG1sID0gJzxzcGFuIGNsYXNzPVwicHJvZHVjdC1wcmljZVwiPicgKyBwcmljZU5vdyArICflhYMv5aWXPC9zcGFuPic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZUh0bWwgPSAnPHNwYW4gY2xhc3M9XCJwcm9kdWN0LXByaWNlXCI+JyArIHByaWNlTm93ICsgJ+WFgy/lpZc8L3NwYW4+PC9wPjxzcGFuIGNsYXNzPVwicHJvZHVjdC1wcmljZS1vcmlnaW5cIj4nICsgcHJpY2VPcmkgKyAn5YWDL+Wllzwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcHJvSW50cm9IdG1sID0gJzxkaXYgY2xhc3M9XCJwcm9kdWN0LWluZm9Hcm91cFwiPjxwPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvRGV0YWlscy5QX05hbWUgKyBwcmljZUh0bWwgKyAnPHNwYW4gY2xhc3M9XCJwcm9kdWN0LXRpcFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvRGV0YWlscy5QRF9EZXNjICsgJzwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwicHJvZHVjdC1pbmZvR3JvdXBcIj48cD7liqDkv67liqDljbA8c3BhbiBjbGFzcz1cInByb2R1Y3QtcHJpY2VcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlRG91YmxlICsgJ+WFgy/lvKA8L3NwYW4+PC9wPjxzcGFuIGNsYXNzPVwicHJvZHVjdC10aXBcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb0RldGFpbHMuUERfRG91YmxlRGVzYyArICc8L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cInByb2R1Y3QtaW5mb0dyb3VwXCI+PHA+5Yqg5Y2wPHNwYW4gY2xhc3M9XCJwcm9kdWN0LXByaWNlXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZURvdWJsZVByaW50ICsgKChwaWQgPT0gMSB8fCBwaWQgPT0gMiB8fCBwaWQgPT0gMykgPyAn5YWDL+eJiCcgOiAn5YWDL+W8oCcpICsgJzwvc3Bhbj48L3A+PHNwYW4gY2xhc3M9XCJwcm9kdWN0LXRpcFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvRGV0YWlscy5QRF9Eb3VibGVQcmludERlc2MgKyAocHJvRGV0YWlscy5QRF9Ob3RlID8gJzwvc3Bhbj48L2Rpdj48cCBjbGFzcz1cInByb2R1Y3QtcHJvbXB0XCI+PHNwYW4+Kjwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb0RldGFpbHMuUERfTm90ZSArICc8L3A+JyA6ICc8L3NwYW4+PC9kaXY+PHAgY2xhc3M9XCJwcm9kdWN0LXByb21wdFwiPjxzcGFuPjwvc3Bhbj48L3A+Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g5qiq5Zu+57G75Z6L5Yik5patXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkocGlkLCBwaWRDb2xBcnIpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY1R5cGVIdG1sID0gJzxkaXYgY2xhc3M9XCJjb2wtMzMgaW1nLWdyb3VwXCI+PGltZyBzcmM9XCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3RhdHVzID0gJyFNb2JpbGVWMlZlcnRpY2FsJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY1R5cGVIdG1sID0gJzxkaXYgY2xhc3M9XCJjcm9zcy1pbWcgaW1nLWdyb3VwXCI+PGltZyBzcmM9XCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3RhdHVzID0gJyFNb2JpbGVWMkhvcml6b250YWwnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIHByb0RldGFpbHMuUF9QaG90bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGljU2hvd0h0bWwgKz0gcGljVHlwZUh0bWwgKyBwcm9EZXRhaWxzLlBfUGhvdG9baW5kZXhdICsgaW1nU3RhdHVzICsgJ1wiIGFsdD1cIlwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cIndyYXBwZXJcIj48ZGl2IGNsYXNzPVwibG9hZGluZ1dyYXBcIj48ZGl2IGNsYXNzPVwiY3VwV3JhcFwiPjxkaXYgY2xhc3M9XCJjb2ZmZWVfY3VwXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubXNnLlBfUGhvdG8ubGVuZ3RoID09PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdC1zaG93TGlzdCAucHJvZHVjdC1tb3JlQnRuJykuaHRtbCgn5Yqg6L295pu05aSa5Zu+54mHJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdC1zaG93TGlzdCAucHJvZHVjdC1tb3JlQnRuJykuaHRtbCgn5peg5pu05aSa5Zu+54mHJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdC1zaG93TGlzdCAucHJvZHVjdC1tb3JlQnRuJykub2ZmKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJyNwcm9kdWN0LWludHJvJykuaHRtbChwcm9JbnRyb0h0bWwpOyAvLyDkuqflk4Hor6bmg4VcbiAgICAgICAgICAgICAgICAgICAgJCgnI3Byb2R1Y3Qtc2hvd0xpc3QgLnJvdycpLmh0bWwocGljU2hvd0h0bWwpOyAvLyDlrqLniYflsZXnpLpcbiAgICAgICAgICAgICAgICAgICAgJCgnLmltZy1ncm91cCBpbWcnKS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcud3JhcHBlcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5bGV56S65pu05aSa5a6i54mHXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzaG93TW9yZUhhbmRsZSgpIHtcbiAgICAgICAgICAgIHBhZ2VkKys7XG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9TYXBpL2dldFByb2R1Y3REZXRhaWwvcGlkLycgKyBwaWQgKyAnL3BhZ2UvJyArIHBhZ2VkLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vcmVQaG90byA9IGRhdGEubXNnLlBfUGhvdG87XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb3JlUGhvdG9IdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwaWNUeXBlSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGlkQ29sQXJyID0gWycxJywgJzInLCAnMjEnLCAnNycsICczMCcsICczMScsICczMicsICczMyddOyAvLyDnq5blm77mlbDnu4RcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1N0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgLy8g5qiq5Zu+57G75Z6L5Yik5patXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkocGlkLCBwaWRDb2xBcnIpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY1R5cGVIdG1sID0gJzxkaXYgY2xhc3M9XCJjb2wtMzMgaW1nLWdyb3VwXCI+PGltZyBzcmM9XCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3RhdHVzID0gJyFNb2JpbGVWMlZlcnRpY2FsJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGljVHlwZUh0bWwgPSAnPGRpdiBjbGFzcz1cImNyb3NzLWltZyBpbWctZ3JvdXBcIj48aW1nIHNyYz1cIic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdTdGF0dXMgPSAnIU1vYmlsZVYySG9yaXpvbnRhbCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gbW9yZVBob3RvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3JlUGhvdG9IdG1sICs9IHBpY1R5cGVIdG1sICsgbW9yZVBob3RvW2luZGV4XSArIGltZ1N0YXR1cyArICdcIiBhbHQ9XCJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxkaXYgY2xhc3M9XCJ3cmFwcGVyXCI+PGRpdiBjbGFzcz1cImxvYWRpbmdXcmFwXCI+PGRpdiBjbGFzcz1cImN1cFdyYXBcIj48ZGl2IGNsYXNzPVwiY29mZmVlX2N1cFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobW9yZVBob3RvLmxlbmd0aCA8IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwcm9kdWN0LXNob3dMaXN0IC5wcm9kdWN0LW1vcmVCdG4nKS5odG1sKCfml6Dmm7TlpJrlm77niYcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwcm9kdWN0LXNob3dMaXN0IC5wcm9kdWN0LW1vcmVCdG4nKS5vZmYoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdC1zaG93TGlzdCAucHJvZHVjdC1tb3JlQnRuJykuaHRtbCgn5Yqg6L295pu05aSa5Zu+54mHJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdC1zaG93TGlzdCAucm93JykuYXBwZW5kKG1vcmVQaG90b0h0bWwpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuaW1nLWdyb3VwIGltZycpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy53cmFwcGVyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9qcy9ob21lLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
}, function(module, exports) {
	eval("// 选择门店\n$(function() {\n    // 选择门店\n    $(document).on('pageAnimationStart', '#reservation', function(e, id, page) {\n        //初始化操作\n        $('#reservation-city').html('');\n    });\n\n\n\n    $(document).on('pageInit', '#reservation', function(e, id, page) {\n        var scid = cookie.get('scid'); // 选择的城市id\n        var $city = $('#reservation-city');\n        var storeId; // 当前门店id\n        var cityHtml = '';\n        $('#reservation .wrapper').css('margin-top', '1.75rem');\n        $('.reservation-checkBtn').hide();\n        $('.tipButton').on('click', function() {\n            $(this).parents('.tipModelWrap').hide();\n        });\n\n        if (scid && (scid != 'null')) { //判断是否已经获得定位城市, 若未获得城市, 则跳到城市选择页面, 否则判断获取的城市是否有门店\n            checkNoStore(scid); // 如果没有当前城市没有门店, 跳转到选择城市页面\n        } else {\n            geolocation(); // 定位请求及处理\n        }\n\n        // 城市选择\n        $city.on('click', function() {\n            $.router.load('/Index/reservationPosition');\n        });\n\n\n        /**\n         * 定位请求,仅在移动端使用\n         */\n        function geolocation() {\n            if (navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(getLocationCity, locationError);\n            } else {\n                $.router.load('/Index/reservationPosition');\n            }\n        }\n\n\n        /**\n         * 获取当前位置经纬度,通过百度地址逆解析服务获取当前城市\n         * @param  {[type]} position 经纬度信息处理\n         */\n        function getLocationCity(position) {\n            var longitude = position.coords.longitude;\n            var latitude = position.coords.latitude;\n            var point = new BMap.Point(longitude, latitude);\n            var gc = new BMap.Geocoder();\n            gc.getLocation(point, function(rs) {\n                var addComp = rs.addressComponents;\n                var cd = getCityCode(addComp.city); // 获得定位城市\n                cookie.set('scid', cd); // 获取真实位置id，传值\n                checkNoStore(cd);\n            });\n        }\n\n\n        /**\n         * 定位失败时处理方法\n         * @param  {[type]} error 定位失败处理\n         */\n        function locationError(error) {\n            var msg = '';\n            var _cityhtml = '';\n            switch (error.code) {\n                case 1:\n                    msg = '用户拒绝了位置服务';\n                    break;\n                case 2:\n                    msg = '无法获取位置信息';\n                    break;\n                case 3:\n                    msg = '获取信息超时';\n                    break;\n                default:\n                    msg = 'code: ' + error.code + 'msg: ' + error.messgae;\n            }\n            _cityhtml = setTipText('暂无定位信息');\n            $city.html(_cityhtml); // 处理定位错误\n            $.router.load('/Index/reservationPosition');\n        }\n\n\n        /**\n         * 设置当前城市\n         */\n        function setCurrentCity() {\n            var cityS = getCityName(cookie.get('scid'));\n            var _cityHtml = setTipText(cityS.split('市')[0]);\n            $city.html(_cityHtml); // 改变显示城市\n            $('#reservation .wrapper').show(); //显示加载图\n            showStoreInfo(cookie.get('scid')); // 展示店铺信息\n        }\n\n\n        // 设置tip条文字\n        function setTipText(text) {\n            var tipHtml = text + '<em class=\"icon icon-down\"></em>';\n            return tipHtml;\n        }\n\n\n        /**\n         * 根据城市码判断是否已有门店\n         * @param  {String} citycode 城市码\n         */\n        function checkNoStore(citycode) {\n            var cityHaveStoreArr = [];\n            var isUs;\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getCityList', function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n                    var cityHaveStoreArr = [];\n                    var citylist = data.msg.city;\n                    for (var i in citylist) {\n                        for (var j in citylist[i]) {\n                            cityHaveStoreArr.push(citylist[i][j].SC_Id);\n                        }\n                    }\n                    isUs = $.inArray(citycode, cityHaveStoreArr); // 定位到的城市码是否在已有门店的城市码数组中\n                    if (isUs === -1) {\n                        $.router.load('/Index/reservationPosition');\n                    } else {\n                        setCurrentCity();\n                    }\n                }\n            });\n        }\n\n\n        /**\n         * 根据百度逆解析获得的城市名得到城市码, 并更改cookie -> scid(当前选择城市)的值\n         * @param  {String} scname 城市名, 要求完整, 比如'杭州市'\n         * @return {Object}        设置cookie对象\n         */\n        function getCityCode(scname) {\n            var cityDic = {}; // 城市码数组\n            var n, returnCookieStr;\n            for (var i in cityCodeList) {\n                cityDic[cityCodeList[i].cityname] = cityCodeList[i].citycode;\n            }\n            return cityDic[scname];\n        }\n\n\n        /**\n         * 店铺信息展示, 默认选择当前城市列表下第一家\n         */\n        function showStoreInfo(cid) {\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getStoreByCity/cid/' + cid, function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n                    var cityInfo = data.msg.city; // 当前选择城市\n                    var storeList = data.msg.storelist; // 当前选择城市下的门店列表\n                    var storeInfo = data.msg.storeinfo; // 门店详情\n                    var storeIdArr = [];\n                    var currentStoreArr = [];\n\n                    for (var i in storeList) {\n                        currentStoreArr.push(storeList[i].S_Name);\n                        storeIdArr.push(storeList[i].S_Id);\n                    }\n                    // 判断当前选择门店\n                    if (cookie.get('storeId')) {\n                        var storeIdTemp = cookie.get('storeId');\n                        if ($.inArray(storeIdTemp, storeIdArr) != -1) {\n                            storeId = storeIdTemp;\n                        } else {\n                            storeId = storeIdArr[0];\n                        }\n                    } else {\n                        storeId = storeIdArr[0];\n                    }\n                    changeStoreInfo(storeInfo, storeId); // 展示门店信息\n                    //门店选择\n                    $('#reservation-store').picker({\n                        toolbarTemplate: '<header class=\"bar bar-nav\">' +\n                            '<button class=\"button button-link pull-right close-picker\">确定</button>' +\n                            '<h1 class=\"title\">请选择门店</h1></header>',\n                        cols: [{\n                            textAlign: 'center',\n                            values: currentStoreArr\n                        }],\n                        onClose: function() {\n                            var _self = $('.picker-selected');\n                            var num = $.inArray(_self.html(), currentStoreArr);\n                            storeId = storeIdArr[num];\n                            changeStoreInfo(storeInfo, storeId);\n                            $('#reservation .wrapper').show();\n                        }\n                    });\n\n                    $('.reservation-checkBtn').on('click', function() {\n                        if ($(this).hasClass('btn-disabled')) {\n                            return false;\n                        }\n                        var storeName = $('#reservation-storeInfo .reservation-storename').html();\n                        cookie.set('storeId', storeId);\n                        cookie.set('storeName', storeName);\n                        $.router.load('/Index/selectMeal');\n                    });\n                } else {\n                    $.toast(data.msg);\n                }\n            });\n        }\n\n\n        /**\n         * 改变门店展示信息, 刚进入页面和改变门店时出发\n         */\n        function changeStoreInfo(storeInfo, storeId) {\n            var storeinfoHtml = '';\n            var storeArr = Object.keys(storeInfo);\n            var storeServiceArr = storeInfo[storeId].S_Service.split('');\n            var $service = $('#reservation-storeService .reservation-serviceList'); //门店服务\n            var opents = parseInt(storeInfo[storeId].S_StartTime);\n            var tsNow = parseInt(+new Date() / 1000); // 获取当前的时间戳\n            var btnHtml = '选择套餐';\n            $('.reservation-checkBtn').removeClass('btn-disabled');\n\n            if (opents && (tsNow < opents)) {\n                var _date = new Date(opents * 1000);\n                var _mnum = _date.getMonth();\n                var _dnum = _date.getDate();\n                var _hnum = _date.getHours();\n                var _minum = _date.getMinutes();\n                btnHtml = '将于' + (_mnum + 1) + '月' + _dnum + '日' + _hnum + ':' + (_minum < 10 ? '0' + _minum : _minum) + '开放预约,敬请期待';\n                $('.reservation-checkBtn').addClass('btn-disabled');\n            }\n\n            $service.removeClass('off');\n            for (var i in storeServiceArr) {\n                if (storeServiceArr[i] === '0') {\n                    $($service[i]).addClass('off');\n                }\n            }\n            $service.on('click', function() {\n                var picIndex = $(this).index() + 1;\n                if ($(this).hasClass('off')) {\n                    return false;\n                }\n                $('.tipModelWrap').find('img').attr('src', 'http://cdn.haimati.cn/HMA_M_Static/img/fwtc_' + picIndex + '.png');\n                setTimeout(function() {\n                    $('.tipModelWrap').show();\n                }, 50);\n            });\n            $('#reservation-store .reservation-storename').text(storeInfo[storeId].S_Name); // 门店名\n            $('#address-maplink').attr('href', storeInfo[storeId].S_MapUrl); // 地图链接\n            $('#address-maplink .addressText').html(storeInfo[storeId].S_Address); // 地址\n            $('#reservation-store .reservation-storeNum').text(storeArr.length); // 门店数量\n            $('.reservation-top img').attr('src', storeInfo[storeId].S_Photo);\n            $('#reservation-storeInfo').show(); // 门店详情展示出现\n            $('.reservation-checkBtn').html(btnHtml); // 门店开放预约时间\n            $('.reservation-checkBtn').css('display', 'block'); // 按钮展示出现\n        }\n    });\n\n\n\n    // 选择城市\n    $(document).on('pageAnimationStart', '#reservation-position', function(e, id, page) {\n        //初始化操作\n        $('.check-city-info b').html('');\n    });\n\n\n\n    $(document).on('pageInit', '#reservation-position', function(e, id, page) {\n        var scid = cookie.get('scid');\n        // 展示信息列表\n        showCityList();\n\n\n        /**\n         * 获取城市列表, 热门、全部、侧边导航\n         */\n        function showCityList() {\n            $.showIndicator();\n            var cityHaveStoreArr = [];\n            var isUs;\n            $.get(m_module + '/Sapi/getCityList', function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n                    var hotcity = data.msg.hotcity;\n                    var cityfirstchar = data.msg.cityfirstchar;\n                    var city = data.msg.city;\n                    var hotcityHtml = '';\n                    var cityHtml = '';\n                    var citySearchHtml = '';\n                    var cityHaveStoreArr = [];\n                    var scid = cookie.get('scid');\n                    var slideNavHandle = function() {\n                        var target = '#id-' + $(this).html();\n                        var oldTop = $('.content').scrollTop();\n                        var top = $(target).offset().top;\n                        top = top + oldTop;\n                        $('.content').scrollTop(top);\n                    };\n\n                    for (var k in hotcity) {\n                        hotcityHtml += '<div class=\"col-33\"><a class=\"city back\" data-scid=\"city-' +\n                            hotcity[k].SC_Id + '\" href=\"/Index/reservation\">' +\n                            hotcity[k].SC_Name + '</a></div>';\n                    }\n                    $('#hotcity .row').html(hotcityHtml); // 插入热门城市表\n\n\n                    for (var i in city) {\n                        for (var j in city[i]) {\n                            cityHaveStoreArr.push(city[i][j].SC_Id);\n                        }\n                    }\n                    isUs = $.inArray(scid, cityHaveStoreArr); // 定位到的城市码是否在已有门店的城市码数组中\n                    if (scid) {\n                        if (isUs === -1) {\n                            $('.check-city-info b').html(getCityName(scid).split('市')[0] + ' 当前城市没有海马体门店'); // top-tip显示当前选择城市\n                        } else {\n                            $('.check-city-info b').html(getCityName(scid).split('市')[0]); // top-tip显示当前选择城市\n                        }\n                    } else {\n                        $('.check-city-info b').html('无法获取当前位置');\n                    }\n\n\n                    for (var index in cityfirstchar) {\n                        var cityChar = cityfirstchar[index];\n                        var cityUnitHtml = '';\n                        citySearchHtml += '<a href=\"javascirpt:;\" class=\"external\">' + cityChar + '</a>';\n                        cityHtml += '<ul id=\"id-' + cityChar + '\"><h3>' + cityChar + '</h3>';\n                        for (var indexz in city[cityChar]) {\n                            cityUnitHtml += '<li><a class=\"city back\" data-scid=\"city-' +\n                                city[cityChar][indexz].SC_Id + '\" href=\"/Index/reservation\">' +\n                                city[cityChar][indexz].SC_Name + '</a></li>';\n                        }\n                        cityHtml += cityUnitHtml + '</ul>';\n                    }\n                    $('#reservation-city').html(cityHtml); // 插入城市列表\n                    $('#city-searchlist').html(citySearchHtml); // 插入城市列表\n\n                    $('.external').on('click', slideNavHandle);\n                    $('.city').on('click', function() {\n                        cookie.set('scid', $(this).data('scid').split('-')[1], 100);\n                    });\n                }\n            });\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0U3RvcmUuanM/NmZhMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDpgInmi6npl6jlupdcbiQoZnVuY3Rpb24oKSB7XG4gICAgLy8g6YCJ5oup6Zeo5bqXXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VBbmltYXRpb25TdGFydCcsICcjcmVzZXJ2YXRpb24nLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAvL+WIneWni+WMluaTjeS9nFxuICAgICAgICAkKCcjcmVzZXJ2YXRpb24tY2l0eScpLmh0bWwoJycpO1xuICAgIH0pO1xuXG5cblxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlSW5pdCcsICcjcmVzZXJ2YXRpb24nLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICB2YXIgc2NpZCA9IGNvb2tpZS5nZXQoJ3NjaWQnKTsgLy8g6YCJ5oup55qE5Z+O5biCaWRcbiAgICAgICAgdmFyICRjaXR5ID0gJCgnI3Jlc2VydmF0aW9uLWNpdHknKTtcbiAgICAgICAgdmFyIHN0b3JlSWQ7IC8vIOW9k+WJjemXqOW6l2lkXG4gICAgICAgIHZhciBjaXR5SHRtbCA9ICcnO1xuICAgICAgICAkKCcjcmVzZXJ2YXRpb24gLndyYXBwZXInKS5jc3MoJ21hcmdpbi10b3AnLCAnMS43NXJlbScpO1xuICAgICAgICAkKCcucmVzZXJ2YXRpb24tY2hlY2tCdG4nKS5oaWRlKCk7XG4gICAgICAgICQoJy50aXBCdXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLnRpcE1vZGVsV3JhcCcpLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNjaWQgJiYgKHNjaWQgIT0gJ251bGwnKSkgeyAvL+WIpOaWreaYr+WQpuW3sue7j+iOt+W+l+WumuS9jeWfjuW4giwg6Iul5pyq6I635b6X5Z+O5biCLCDliJnot7PliLDln47luILpgInmi6npobXpnaIsIOWQpuWImeWIpOaWreiOt+WPlueahOWfjuW4guaYr+WQpuaciemXqOW6l1xuICAgICAgICAgICAgY2hlY2tOb1N0b3JlKHNjaWQpOyAvLyDlpoLmnpzmsqHmnInlvZPliY3ln47luILmsqHmnInpl6jlupcsIOi3s+i9rOWIsOmAieaLqeWfjuW4gumhtemdolxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VvbG9jYXRpb24oKTsgLy8g5a6a5L2N6K+35rGC5Y+K5aSE55CGXG4gICAgICAgIH1cblxuICAgICAgICAvLyDln47luILpgInmi6lcbiAgICAgICAgJGNpdHkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcmVzZXJ2YXRpb25Qb3NpdGlvbicpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDlrprkvY3or7fmsYIs5LuF5Zyo56e75Yqo56uv5L2/55SoXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZW9sb2NhdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGdldExvY2F0aW9uQ2l0eSwgbG9jYXRpb25FcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvblBvc2l0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5blvZPliY3kvY3nva7nu4/nuqzluqYs6YCa6L+H55m+5bqm5Zyw5Z2A6YCG6Kej5p6Q5pyN5Yqh6I635Y+W5b2T5YmN5Z+O5biCXG4gICAgICAgICAqIEBwYXJhbSAge1t0eXBlXX0gcG9zaXRpb24g57uP57qs5bqm5L+h5oGv5aSE55CGXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbkNpdHkocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBsb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICAgdmFyIGxhdGl0dWRlID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gbmV3IEJNYXAuUG9pbnQobG9uZ2l0dWRlLCBsYXRpdHVkZSk7XG4gICAgICAgICAgICB2YXIgZ2MgPSBuZXcgQk1hcC5HZW9jb2RlcigpO1xuICAgICAgICAgICAgZ2MuZ2V0TG9jYXRpb24ocG9pbnQsIGZ1bmN0aW9uKHJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFkZENvbXAgPSBycy5hZGRyZXNzQ29tcG9uZW50cztcbiAgICAgICAgICAgICAgICB2YXIgY2QgPSBnZXRDaXR5Q29kZShhZGRDb21wLmNpdHkpOyAvLyDojrflvpflrprkvY3ln47luIJcbiAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdzY2lkJywgY2QpOyAvLyDojrflj5bnnJ/lrp7kvY3nva5pZO+8jOS8oOWAvFxuICAgICAgICAgICAgICAgIGNoZWNrTm9TdG9yZShjZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWumuS9jeWksei0peaXtuWkhOeQhuaWueazlVxuICAgICAgICAgKiBAcGFyYW0gIHtbdHlwZV19IGVycm9yIOWumuS9jeWksei0peWkhOeQhlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbG9jYXRpb25FcnJvcihlcnJvcikge1xuICAgICAgICAgICAgdmFyIG1zZyA9ICcnO1xuICAgICAgICAgICAgdmFyIF9jaXR5aHRtbCA9ICcnO1xuICAgICAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtc2cgPSAn55So5oi35ouS57ud5LqG5L2N572u5pyN5YqhJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtc2cgPSAn5peg5rOV6I635Y+W5L2N572u5L+h5oGvJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtc2cgPSAn6I635Y+W5L+h5oGv6LaF5pe2JztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gJ2NvZGU6ICcgKyBlcnJvci5jb2RlICsgJ21zZzogJyArIGVycm9yLm1lc3NnYWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfY2l0eWh0bWwgPSBzZXRUaXBUZXh0KCfmmoLml6DlrprkvY3kv6Hmga8nKTtcbiAgICAgICAgICAgICRjaXR5Lmh0bWwoX2NpdHlodG1sKTsgLy8g5aSE55CG5a6a5L2N6ZSZ6K+vXG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcmVzZXJ2YXRpb25Qb3NpdGlvbicpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog6K6+572u5b2T5YmN5Z+O5biCXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRDdXJyZW50Q2l0eSgpIHtcbiAgICAgICAgICAgIHZhciBjaXR5UyA9IGdldENpdHlOYW1lKGNvb2tpZS5nZXQoJ3NjaWQnKSk7XG4gICAgICAgICAgICB2YXIgX2NpdHlIdG1sID0gc2V0VGlwVGV4dChjaXR5Uy5zcGxpdCgn5biCJylbMF0pO1xuICAgICAgICAgICAgJGNpdHkuaHRtbChfY2l0eUh0bWwpOyAvLyDmlLnlj5jmmL7npLrln47luIJcbiAgICAgICAgICAgICQoJyNyZXNlcnZhdGlvbiAud3JhcHBlcicpLnNob3coKTsgLy/mmL7npLrliqDovb3lm75cbiAgICAgICAgICAgIHNob3dTdG9yZUluZm8oY29va2llLmdldCgnc2NpZCcpKTsgLy8g5bGV56S65bqX6ZO65L+h5oGvXG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIOiuvue9rnRpcOadoeaWh+Wtl1xuICAgICAgICBmdW5jdGlvbiBzZXRUaXBUZXh0KHRleHQpIHtcbiAgICAgICAgICAgIHZhciB0aXBIdG1sID0gdGV4dCArICc8ZW0gY2xhc3M9XCJpY29uIGljb24tZG93blwiPjwvZW0+JztcbiAgICAgICAgICAgIHJldHVybiB0aXBIdG1sO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5qC55o2u5Z+O5biC56CB5Yik5pat5piv5ZCm5bey5pyJ6Zeo5bqXXG4gICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gY2l0eWNvZGUg5Z+O5biC56CBXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjaGVja05vU3RvcmUoY2l0eWNvZGUpIHtcbiAgICAgICAgICAgIHZhciBjaXR5SGF2ZVN0b3JlQXJyID0gW107XG4gICAgICAgICAgICB2YXIgaXNVcztcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL1NhcGkvZ2V0Q2l0eUxpc3QnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNpdHlIYXZlU3RvcmVBcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNpdHlsaXN0ID0gZGF0YS5tc2cuY2l0eTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBjaXR5bGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBjaXR5bGlzdFtpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHlIYXZlU3RvcmVBcnIucHVzaChjaXR5bGlzdFtpXVtqXS5TQ19JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaXNVcyA9ICQuaW5BcnJheShjaXR5Y29kZSwgY2l0eUhhdmVTdG9yZUFycik7IC8vIOWumuS9jeWIsOeahOWfjuW4gueggeaYr+WQpuWcqOW3suaciemXqOW6l+eahOWfjuW4gueggeaVsOe7hOS4rVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNVcyA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvblBvc2l0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50Q2l0eSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmoLnmja7nmb7luqbpgIbop6PmnpDojrflvpfnmoTln47luILlkI3lvpfliLDln47luILnoIEsIOW5tuabtOaUuWNvb2tpZSAtPiBzY2lkKOW9k+WJjemAieaLqeWfjuW4ginnmoTlgLxcbiAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBzY25hbWUg5Z+O5biC5ZCNLCDopoHmsYLlrozmlbQsIOavlOWmgifmna3lt57luIInXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICAgIOiuvue9rmNvb2tpZeWvueixoVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2l0eUNvZGUoc2NuYW1lKSB7XG4gICAgICAgICAgICB2YXIgY2l0eURpYyA9IHt9OyAvLyDln47luILnoIHmlbDnu4RcbiAgICAgICAgICAgIHZhciBuLCByZXR1cm5Db29raWVTdHI7XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIGNpdHlDb2RlTGlzdCkge1xuICAgICAgICAgICAgICAgIGNpdHlEaWNbY2l0eUNvZGVMaXN0W2ldLmNpdHluYW1lXSA9IGNpdHlDb2RlTGlzdFtpXS5jaXR5Y29kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaXR5RGljW3NjbmFtZV07XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDlupfpk7rkv6Hmga/lsZXnpLosIOm7mOiupOmAieaLqeW9k+WJjeWfjuW4guWIl+ihqOS4i+esrOS4gOWutlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2hvd1N0b3JlSW5mbyhjaWQpIHtcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL1NhcGkvZ2V0U3RvcmVCeUNpdHkvY2lkLycgKyBjaWQsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2l0eUluZm8gPSBkYXRhLm1zZy5jaXR5OyAvLyDlvZPliY3pgInmi6nln47luIJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTGlzdCA9IGRhdGEubXNnLnN0b3JlbGlzdDsgLy8g5b2T5YmN6YCJ5oup5Z+O5biC5LiL55qE6Zeo5bqX5YiX6KGoXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZUluZm8gPSBkYXRhLm1zZy5zdG9yZWluZm87IC8vIOmXqOW6l+ivpuaDhVxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVJZEFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFN0b3JlQXJyID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBzdG9yZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdG9yZUFyci5wdXNoKHN0b3JlTGlzdFtpXS5TX05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZEFyci5wdXNoKHN0b3JlTGlzdFtpXS5TX0lkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3lvZPliY3pgInmi6npl6jlupdcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvb2tpZS5nZXQoJ3N0b3JlSWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlSWRUZW1wID0gY29va2llLmdldCgnc3RvcmVJZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQuaW5BcnJheShzdG9yZUlkVGVtcCwgc3RvcmVJZEFycikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkID0gc3RvcmVJZFRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQgPSBzdG9yZUlkQXJyWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZCA9IHN0b3JlSWRBcnJbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3RvcmVJbmZvKHN0b3JlSW5mbywgc3RvcmVJZCk7IC8vIOWxleekuumXqOW6l+S/oeaBr1xuICAgICAgICAgICAgICAgICAgICAvL+mXqOW6l+mAieaLqVxuICAgICAgICAgICAgICAgICAgICAkKCcjcmVzZXJ2YXRpb24tc3RvcmUnKS5waWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhclRlbXBsYXRlOiAnPGhlYWRlciBjbGFzcz1cImJhciBiYXItbmF2XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWxpbmsgcHVsbC1yaWdodCBjbG9zZS1waWNrZXJcIj7noa7lrpo8L2J1dHRvbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGgxIGNsYXNzPVwidGl0bGVcIj7or7fpgInmi6npl6jlupc8L2gxPjwvaGVhZGVyPicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBjdXJyZW50U3RvcmVBcnJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9zZWxmID0gJCgnLnBpY2tlci1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSAkLmluQXJyYXkoX3NlbGYuaHRtbCgpLCBjdXJyZW50U3RvcmVBcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQgPSBzdG9yZUlkQXJyW251bV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3RvcmVJbmZvKHN0b3JlSW5mbywgc3RvcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc2VydmF0aW9uIC53cmFwcGVyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcucmVzZXJ2YXRpb24tY2hlY2tCdG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdidG4tZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSAkKCcjcmVzZXJ2YXRpb24tc3RvcmVJbmZvIC5yZXNlcnZhdGlvbi1zdG9yZW5hbWUnKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdzdG9yZUlkJywgc3RvcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdzdG9yZU5hbWUnLCBzdG9yZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L3NlbGVjdE1lYWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmlLnlj5jpl6jlupflsZXnpLrkv6Hmga8sIOWImui/m+WFpemhtemdouWSjOaUueWPmOmXqOW6l+aXtuWHuuWPkVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlU3RvcmVJbmZvKHN0b3JlSW5mbywgc3RvcmVJZCkge1xuICAgICAgICAgICAgdmFyIHN0b3JlaW5mb0h0bWwgPSAnJztcbiAgICAgICAgICAgIHZhciBzdG9yZUFyciA9IE9iamVjdC5rZXlzKHN0b3JlSW5mbyk7XG4gICAgICAgICAgICB2YXIgc3RvcmVTZXJ2aWNlQXJyID0gc3RvcmVJbmZvW3N0b3JlSWRdLlNfU2VydmljZS5zcGxpdCgnJyk7XG4gICAgICAgICAgICB2YXIgJHNlcnZpY2UgPSAkKCcjcmVzZXJ2YXRpb24tc3RvcmVTZXJ2aWNlIC5yZXNlcnZhdGlvbi1zZXJ2aWNlTGlzdCcpOyAvL+mXqOW6l+acjeWKoVxuICAgICAgICAgICAgdmFyIG9wZW50cyA9IHBhcnNlSW50KHN0b3JlSW5mb1tzdG9yZUlkXS5TX1N0YXJ0VGltZSk7XG4gICAgICAgICAgICB2YXIgdHNOb3cgPSBwYXJzZUludCgrbmV3IERhdGUoKSAvIDEwMDApOyAvLyDojrflj5blvZPliY3nmoTml7bpl7TmiLNcbiAgICAgICAgICAgIHZhciBidG5IdG1sID0gJ+mAieaLqeWll+mkkCc7XG4gICAgICAgICAgICAkKCcucmVzZXJ2YXRpb24tY2hlY2tCdG4nKS5yZW1vdmVDbGFzcygnYnRuLWRpc2FibGVkJyk7XG5cbiAgICAgICAgICAgIGlmIChvcGVudHMgJiYgKHRzTm93IDwgb3BlbnRzKSkge1xuICAgICAgICAgICAgICAgIHZhciBfZGF0ZSA9IG5ldyBEYXRlKG9wZW50cyAqIDEwMDApO1xuICAgICAgICAgICAgICAgIHZhciBfbW51bSA9IF9kYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIF9kbnVtID0gX2RhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciBfaG51bSA9IF9kYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgdmFyIF9taW51bSA9IF9kYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgICBidG5IdG1sID0gJ+WwhuS6jicgKyAoX21udW0gKyAxKSArICfmnIgnICsgX2RudW0gKyAn5pelJyArIF9obnVtICsgJzonICsgKF9taW51bSA8IDEwID8gJzAnICsgX21pbnVtIDogX21pbnVtKSArICflvIDmlL7pooTnuqYs5pWs6K+35pyf5b6FJztcbiAgICAgICAgICAgICAgICAkKCcucmVzZXJ2YXRpb24tY2hlY2tCdG4nKS5hZGRDbGFzcygnYnRuLWRpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzZXJ2aWNlLnJlbW92ZUNsYXNzKCdvZmYnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gc3RvcmVTZXJ2aWNlQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlU2VydmljZUFycltpXSA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJHNlcnZpY2VbaV0pLmFkZENsYXNzKCdvZmYnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2VydmljZS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGljSW5kZXggPSAkKHRoaXMpLmluZGV4KCkgKyAxO1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdvZmYnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy50aXBNb2RlbFdyYXAnKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCAnaHR0cDovL2Nkbi5oYWltYXRpLmNuL0hNQV9NX1N0YXRpYy9pbWcvZnd0Y18nICsgcGljSW5kZXggKyAnLnBuZycpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy50aXBNb2RlbFdyYXAnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcjcmVzZXJ2YXRpb24tc3RvcmUgLnJlc2VydmF0aW9uLXN0b3JlbmFtZScpLnRleHQoc3RvcmVJbmZvW3N0b3JlSWRdLlNfTmFtZSk7IC8vIOmXqOW6l+WQjVxuICAgICAgICAgICAgJCgnI2FkZHJlc3MtbWFwbGluaycpLmF0dHIoJ2hyZWYnLCBzdG9yZUluZm9bc3RvcmVJZF0uU19NYXBVcmwpOyAvLyDlnLDlm77pk77mjqVcbiAgICAgICAgICAgICQoJyNhZGRyZXNzLW1hcGxpbmsgLmFkZHJlc3NUZXh0JykuaHRtbChzdG9yZUluZm9bc3RvcmVJZF0uU19BZGRyZXNzKTsgLy8g5Zyw5Z2AXG4gICAgICAgICAgICAkKCcjcmVzZXJ2YXRpb24tc3RvcmUgLnJlc2VydmF0aW9uLXN0b3JlTnVtJykudGV4dChzdG9yZUFyci5sZW5ndGgpOyAvLyDpl6jlupfmlbDph49cbiAgICAgICAgICAgICQoJy5yZXNlcnZhdGlvbi10b3AgaW1nJykuYXR0cignc3JjJywgc3RvcmVJbmZvW3N0b3JlSWRdLlNfUGhvdG8pO1xuICAgICAgICAgICAgJCgnI3Jlc2VydmF0aW9uLXN0b3JlSW5mbycpLnNob3coKTsgLy8g6Zeo5bqX6K+m5oOF5bGV56S65Ye6546wXG4gICAgICAgICAgICAkKCcucmVzZXJ2YXRpb24tY2hlY2tCdG4nKS5odG1sKGJ0bkh0bWwpOyAvLyDpl6jlupflvIDmlL7pooTnuqbml7bpl7RcbiAgICAgICAgICAgICQoJy5yZXNlcnZhdGlvbi1jaGVja0J0bicpLmNzcygnZGlzcGxheScsICdibG9jaycpOyAvLyDmjInpkq7lsZXnpLrlh7rnjrBcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cblxuICAgIC8vIOmAieaLqeWfjuW4glxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlQW5pbWF0aW9uU3RhcnQnLCAnI3Jlc2VydmF0aW9uLXBvc2l0aW9uJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgLy/liJ3lp4vljJbmk43kvZxcbiAgICAgICAgJCgnLmNoZWNrLWNpdHktaW5mbyBiJykuaHRtbCgnJyk7XG4gICAgfSk7XG5cblxuXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNyZXNlcnZhdGlvbi1wb3NpdGlvbicsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgIHZhciBzY2lkID0gY29va2llLmdldCgnc2NpZCcpO1xuICAgICAgICAvLyDlsZXnpLrkv6Hmga/liJfooahcbiAgICAgICAgc2hvd0NpdHlMaXN0KCk7XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+W5Z+O5biC5YiX6KGoLCDng63pl6jjgIHlhajpg6jjgIHkvqfovrnlr7zoiKpcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNob3dDaXR5TGlzdCgpIHtcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgdmFyIGNpdHlIYXZlU3RvcmVBcnIgPSBbXTtcbiAgICAgICAgICAgIHZhciBpc1VzO1xuICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL1NhcGkvZ2V0Q2l0eUxpc3QnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvdGNpdHkgPSBkYXRhLm1zZy5ob3RjaXR5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2l0eWZpcnN0Y2hhciA9IGRhdGEubXNnLmNpdHlmaXJzdGNoYXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaXR5ID0gZGF0YS5tc2cuY2l0eTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvdGNpdHlIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaXR5SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2l0eVNlYXJjaEh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNpdHlIYXZlU3RvcmVBcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjaWQgPSBjb29raWUuZ2V0KCdzY2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGlkZU5hdkhhbmRsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICcjaWQtJyArICQodGhpcykuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFRvcCA9ICQoJy5jb250ZW50Jykuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHRvcCArIG9sZFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb250ZW50Jykuc2Nyb2xsVG9wKHRvcCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBob3RjaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3RjaXR5SHRtbCArPSAnPGRpdiBjbGFzcz1cImNvbC0zM1wiPjxhIGNsYXNzPVwiY2l0eSBiYWNrXCIgZGF0YS1zY2lkPVwiY2l0eS0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3RjaXR5W2tdLlNDX0lkICsgJ1wiIGhyZWY9XCIvSW5kZXgvcmVzZXJ2YXRpb25cIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3RjaXR5W2tdLlNDX05hbWUgKyAnPC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJCgnI2hvdGNpdHkgLnJvdycpLmh0bWwoaG90Y2l0eUh0bWwpOyAvLyDmj5LlhaXng63pl6jln47luILooahcblxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBjaXR5W2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eUhhdmVTdG9yZUFyci5wdXNoKGNpdHlbaV1bal0uU0NfSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlzVXMgPSAkLmluQXJyYXkoc2NpZCwgY2l0eUhhdmVTdG9yZUFycik7IC8vIOWumuS9jeWIsOeahOWfjuW4gueggeaYr+WQpuWcqOW3suaciemXqOW6l+eahOWfjuW4gueggeaVsOe7hOS4rVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVXMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrLWNpdHktaW5mbyBiJykuaHRtbChnZXRDaXR5TmFtZShzY2lkKS5zcGxpdCgn5biCJylbMF0gKyAnIOW9k+WJjeWfjuW4guayoeaciea1t+mprOS9k+mXqOW6lycpOyAvLyB0b3AtdGlw5pi+56S65b2T5YmN6YCJ5oup5Z+O5biCXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jaGVjay1jaXR5LWluZm8gYicpLmh0bWwoZ2V0Q2l0eU5hbWUoc2NpZCkuc3BsaXQoJ+W4gicpWzBdKTsgLy8gdG9wLXRpcOaYvuekuuW9k+WJjemAieaLqeWfjuW4glxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrLWNpdHktaW5mbyBiJykuaHRtbCgn5peg5rOV6I635Y+W5b2T5YmN5L2N572uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGNpdHlmaXJzdGNoYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaXR5Q2hhciA9IGNpdHlmaXJzdGNoYXJbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNpdHlVbml0SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2l0eVNlYXJjaEh0bWwgKz0gJzxhIGhyZWY9XCJqYXZhc2NpcnB0OjtcIiBjbGFzcz1cImV4dGVybmFsXCI+JyArIGNpdHlDaGFyICsgJzwvYT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2l0eUh0bWwgKz0gJzx1bCBpZD1cImlkLScgKyBjaXR5Q2hhciArICdcIj48aDM+JyArIGNpdHlDaGFyICsgJzwvaDM+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4eiBpbiBjaXR5W2NpdHlDaGFyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHlVbml0SHRtbCArPSAnPGxpPjxhIGNsYXNzPVwiY2l0eSBiYWNrXCIgZGF0YS1zY2lkPVwiY2l0eS0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eVtjaXR5Q2hhcl1baW5kZXh6XS5TQ19JZCArICdcIiBocmVmPVwiL0luZGV4L3Jlc2VydmF0aW9uXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHlbY2l0eUNoYXJdW2luZGV4el0uU0NfTmFtZSArICc8L2E+PC9saT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2l0eUh0bWwgKz0gY2l0eVVuaXRIdG1sICsgJzwvdWw+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKCcjcmVzZXJ2YXRpb24tY2l0eScpLmh0bWwoY2l0eUh0bWwpOyAvLyDmj5LlhaXln47luILliJfooahcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NpdHktc2VhcmNobGlzdCcpLmh0bWwoY2l0eVNlYXJjaEh0bWwpOyAvLyDmj5LlhaXln47luILliJfooahcblxuICAgICAgICAgICAgICAgICAgICAkKCcuZXh0ZXJuYWwnKS5vbignY2xpY2snLCBzbGlkZU5hdkhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5jaXR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdzY2lkJywgJCh0aGlzKS5kYXRhKCdzY2lkJykuc3BsaXQoJy0nKVsxXSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0U3RvcmUuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");
}, function(module, exports) {
	eval("// 套餐选择\n$(function() {\n    $(document).on('pageInit', '#select-meal', function(e, id, page) {\n        banTouchmove('.select-meal-tipNode'); //解决移动端遮罩层可滚动\n\n        // 预约须知提示层,第一次进入预约页面会自动弹出,若用户点击不在提示，则以后再进入此页面将不再跳出提示框\n        var nohintFlag = cookie.get('nohintFlag');\n\n        if (nohintFlag !== 'true') {\n            $('.select-meal-tipNode').show();\n        }\n\n        $('.select-meal-tip').on('click', function() {\n            $('.select-meal-tipNode').show();\n        });\n        $('#btn-sure').on('click', function() {\n            $('.select-meal-tipNode').hide();\n        });\n        $('#btn-nohint').on('click', function() {\n            $('.select-meal-tipNode').hide();\n            cookie.set('nohintFlag', true, 100);\n        });\n        $('.select-meal-NextBtn').on('click', function() {\n            if ($('.select-mealIsChecked input:checked').length === 0) {\n                $.toast('请选择产品再点击下一步哦');\n                return false;\n            }\n            getSelectedMeal();\n            $.router.load('/Index/selectMealInfo');\n        });\n\n        getMenu(); // 获取对应城市和门店的产品菜单\n        /**\n         * 获取产品菜单\n         */\n        function getMenu() {\n            var storeId = cookie.get('storeId');\n            $.showIndicator();\n            $.post(m_module + '/Sapi/getProductByStore/sid/' + storeId, function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n                    var ptList = data.msg;\n                    var proHtml = '';\n                    for (var i in ptList) {\n                        var proUnitHtml = '';\n                        var product = ptList[i].PT_Product;\n                        if (!product) {\n                            continue;\n                        }\n                        proHtml += '<div class=\"select-mealList\"><h3>' + ptList[i].PT_Name + '<b>' + ptList[i].PT_EName + '</b></h3>';\n                        for (var j in product) {\n                            var proUnitPriceHtml = '';\n                            var priceNow = parseFloat(product[j].P_Price);\n                            var priceOri = parseFloat(product[j].P_OriPrice);\n\n                            if (priceNow === priceOri || priceOri === 0) {\n                                proUnitPriceHtml = '<p class=\"select-mealPrice\">¥ ' +\n                                    priceNow + '</p><p class=\"select-mealTip\">' +\n                                (!product[j].P_Tip ? '' : '<i>*</i>' + product[j].P_Tip) + '</p>';\n                            } else {\n                                proUnitPriceHtml = '<p class=\"select-mealPrice\">¥ ' +\n                                    priceNow + '</p><p class=\"select-mealTip\">' +\n                                    (!product[j].P_Tip ? '' : '<i>*</i>' + product[j].P_Tip) + '</p><p class=\"select-mealPrice-origin\">¥ ' +\n                                    priceOri + '</p>';\n                            }\n\n                            proUnitHtml += '<div class=\"select-mealInfo\"><div class=\"select-mealImg\"><img src=\"' +\n                                product[j].P_SmallImgPath + '\" alt=\"' +\n                                product[j].P_Name + '\" style=\"display:none;\"><div class=\"wrapper\"><div class=\"loadingWrap\"><div class=\"cupWrap\"><div class=\"coffee_cup\"></div></div></div></div></div><div class=\"select-mealDetails\"><p class=\"select-mealProdcut\">' +\n                                product[j].P_Name + '</p><p class=\"select-mealIsChecked\"><input type=\"checkbox\" id=\"pro-' +\n                                product[j].P_Id + '\"><label for=\"pro-' +\n                                product[j].P_Id + '\"></label><span class=\"weui_icon_\"></span></p>' + \n                                proUnitPriceHtml +'</div></div>';\n                        }\n                        proHtml += proUnitHtml + '</div>';\n                    }\n\n                    $('#product-menu').html(proHtml); // 插入菜单列表\n                    $('.select-mealImg img').on('load', function() {\n                        $(this).parent().find('.wrapper').hide();\n                        $(this).show();\n                    });\n                } else if (data.error === 401) {\n                    $.toast(data.msg);\n                    setTimeout(function() {\n                        $.router.load('/Index/reservation');\n                    }, 2000);\n                } else {\n                    $.toast(data.msg);\n                }\n                $('.select-mealInfo input').on('click', function() {\n                    if ($(this).parent().hasClass('active')) {\n                        $(this).parent().removeClass('active');\n                    } else {\n                        $(this).parent().addClass('active');\n                    }\n                });\n            });\n        }\n\n        /**\n         * 获得选中的套餐\n         * @return {String} 选择的套餐,存至cookie,传给下一个页面\n         */\n        function getSelectedMeal() {\n            var proSelected = $('.select-mealIsChecked input:checked'); // 获得选中的产品\n            var proSelectedStr = '';\n            var proSelectedArr = [];\n\n            for (var i = 0; i < proSelected.length; i++) {\n                proSelectedArr.push($(proSelected[i]).attr('id').split('-')[1]);\n            }\n            proSelectedStr = proSelectedArr.join('-');\n            cookie.set('proSelected', proSelectedStr);\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0TWVhbC5qcz81YTkxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIOWll+mkkOmAieaLqVxuJChmdW5jdGlvbigpIHtcbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI3NlbGVjdC1tZWFsJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgYmFuVG91Y2htb3ZlKCcuc2VsZWN0LW1lYWwtdGlwTm9kZScpOyAvL+ino+WGs+enu+WKqOerr+mBrue9qeWxguWPr+a7muWKqFxuXG4gICAgICAgIC8vIOmihOe6pumhu+efpeaPkOekuuWxgiznrKzkuIDmrKHov5vlhaXpooTnuqbpobXpnaLkvJroh6rliqjlvLnlh7os6Iul55So5oi354K55Ye75LiN5Zyo5o+Q56S677yM5YiZ5Lul5ZCO5YaN6L+b5YWl5q2k6aG16Z2i5bCG5LiN5YaN6Lez5Ye65o+Q56S65qGGXG4gICAgICAgIHZhciBub2hpbnRGbGFnID0gY29va2llLmdldCgnbm9oaW50RmxhZycpO1xuXG4gICAgICAgIGlmIChub2hpbnRGbGFnICE9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICQoJy5zZWxlY3QtbWVhbC10aXBOb2RlJykuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLnNlbGVjdC1tZWFsLXRpcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLnNlbGVjdC1tZWFsLXRpcE5vZGUnKS5zaG93KCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcjYnRuLXN1cmUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5zZWxlY3QtbWVhbC10aXBOb2RlJykuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnI2J0bi1ub2hpbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5zZWxlY3QtbWVhbC10aXBOb2RlJykuaGlkZSgpO1xuICAgICAgICAgICAgY29va2llLnNldCgnbm9oaW50RmxhZycsIHRydWUsIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuc2VsZWN0LW1lYWwtTmV4dEJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQoJy5zZWxlY3QtbWVhbElzQ2hlY2tlZCBpbnB1dDpjaGVja2VkJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJC50b2FzdCgn6K+36YCJ5oup5Lqn5ZOB5YaN54K55Ye75LiL5LiA5q2l5ZOmJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0U2VsZWN0ZWRNZWFsKCk7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvc2VsZWN0TWVhbEluZm8nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZ2V0TWVudSgpOyAvLyDojrflj5blr7nlupTln47luILlkozpl6jlupfnmoTkuqflk4Hoj5zljZVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+WPluS6p+WTgeiPnOWNlVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0TWVudSgpIHtcbiAgICAgICAgICAgIHZhciBzdG9yZUlkID0gY29va2llLmdldCgnc3RvcmVJZCcpO1xuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAkLnBvc3QobV9tb2R1bGUgKyAnL1NhcGkvZ2V0UHJvZHVjdEJ5U3RvcmUvc2lkLycgKyBzdG9yZUlkLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB0TGlzdCA9IGRhdGEubXNnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHB0TGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb1VuaXRIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9IHB0TGlzdFtpXS5QVF9Qcm9kdWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9IdG1sICs9ICc8ZGl2IGNsYXNzPVwic2VsZWN0LW1lYWxMaXN0XCI+PGgzPicgKyBwdExpc3RbaV0uUFRfTmFtZSArICc8Yj4nICsgcHRMaXN0W2ldLlBUX0VOYW1lICsgJzwvYj48L2gzPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvVW5pdFByaWNlSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZU5vdyA9IHBhcnNlRmxvYXQocHJvZHVjdFtqXS5QX1ByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJpY2VPcmkgPSBwYXJzZUZsb2F0KHByb2R1Y3Rbal0uUF9PcmlQcmljZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpY2VOb3cgPT09IHByaWNlT3JpIHx8IHByaWNlT3JpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb1VuaXRQcmljZUh0bWwgPSAnPHAgY2xhc3M9XCJzZWxlY3QtbWVhbFByaWNlXCI+wqUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZU5vdyArICc8L3A+PHAgY2xhc3M9XCJzZWxlY3QtbWVhbFRpcFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIXByb2R1Y3Rbal0uUF9UaXAgPyAnJyA6ICc8aT4qPC9pPicgKyBwcm9kdWN0W2pdLlBfVGlwKSArICc8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9Vbml0UHJpY2VIdG1sID0gJzxwIGNsYXNzPVwic2VsZWN0LW1lYWxQcmljZVwiPsKlICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VOb3cgKyAnPC9wPjxwIGNsYXNzPVwic2VsZWN0LW1lYWxUaXBcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghcHJvZHVjdFtqXS5QX1RpcCA/ICcnIDogJzxpPio8L2k+JyArIHByb2R1Y3Rbal0uUF9UaXApICsgJzwvcD48cCBjbGFzcz1cInNlbGVjdC1tZWFsUHJpY2Utb3JpZ2luXCI+wqUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZU9yaSArICc8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9Vbml0SHRtbCArPSAnPGRpdiBjbGFzcz1cInNlbGVjdC1tZWFsSW5mb1wiPjxkaXYgY2xhc3M9XCJzZWxlY3QtbWVhbEltZ1wiPjxpbWcgc3JjPVwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rbal0uUF9TbWFsbEltZ1BhdGggKyAnXCIgYWx0PVwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rbal0uUF9OYW1lICsgJ1wiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPjxkaXYgY2xhc3M9XCJ3cmFwcGVyXCI+PGRpdiBjbGFzcz1cImxvYWRpbmdXcmFwXCI+PGRpdiBjbGFzcz1cImN1cFdyYXBcIj48ZGl2IGNsYXNzPVwiY29mZmVlX2N1cFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJzZWxlY3QtbWVhbERldGFpbHNcIj48cCBjbGFzcz1cInNlbGVjdC1tZWFsUHJvZGN1dFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0W2pdLlBfTmFtZSArICc8L3A+PHAgY2xhc3M9XCJzZWxlY3QtbWVhbElzQ2hlY2tlZFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInByby0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFtqXS5QX0lkICsgJ1wiPjxsYWJlbCBmb3I9XCJwcm8tJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rbal0uUF9JZCArICdcIj48L2xhYmVsPjxzcGFuIGNsYXNzPVwid2V1aV9pY29uX1wiPjwvc3Bhbj48L3A+JyArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9Vbml0UHJpY2VIdG1sICsnPC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb0h0bWwgKz0gcHJvVW5pdEh0bWwgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQoJyNwcm9kdWN0LW1lbnUnKS5odG1sKHByb0h0bWwpOyAvLyDmj5LlhaXoj5zljZXliJfooahcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdC1tZWFsSW1nIGltZycpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy53cmFwcGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvciA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L3Jlc2VydmF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0LW1lYWxJbmZvIGlucHV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICog6I635b6X6YCJ5Lit55qE5aWX6aSQXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30g6YCJ5oup55qE5aWX6aSQLOWtmOiHs2Nvb2tpZSzkvKDnu5nkuIvkuIDkuKrpobXpnaJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkTWVhbCgpIHtcbiAgICAgICAgICAgIHZhciBwcm9TZWxlY3RlZCA9ICQoJy5zZWxlY3QtbWVhbElzQ2hlY2tlZCBpbnB1dDpjaGVja2VkJyk7IC8vIOiOt+W+l+mAieS4reeahOS6p+WTgVxuICAgICAgICAgICAgdmFyIHByb1NlbGVjdGVkU3RyID0gJyc7XG4gICAgICAgICAgICB2YXIgcHJvU2VsZWN0ZWRBcnIgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9TZWxlY3RlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHByb1NlbGVjdGVkQXJyLnB1c2goJChwcm9TZWxlY3RlZFtpXSkuYXR0cignaWQnKS5zcGxpdCgnLScpWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb1NlbGVjdGVkU3RyID0gcHJvU2VsZWN0ZWRBcnIuam9pbignLScpO1xuICAgICAgICAgICAgY29va2llLnNldCgncHJvU2VsZWN0ZWQnLCBwcm9TZWxlY3RlZFN0cik7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0TWVhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// 套餐选择\n$(function() {\n    // 套餐选择详情\n    $(document).on('pageInit', '#select-mealInfo', function(e, id, page) {\n        var store = cookie.get('storeId');\n        var products = cookie.get('proSelected');\n        var parentDatas;\n        var childDatas;\n        var productOptions = {};\n        var accountTotalPrice = 0;\n        var accountTotalDiscount = 0;\n        var productData = {}; //获取产品选项\n        productData.store = store;\n        productData.products = products;\n\n        $.showIndicator();\n        $.post(m_module + '/Api/getProductOption', productData, showSelectProduct);\n\n\n        $('.select-mealInfo-close').on('click', function() {\n            $('.select-mealInfo-tipModal').hide();\n            $('.select-mealInfo-tipModal img').hide();\n        });\n\n        $('.select-mealInfo-mask').on('click', function() {\n            $('.select-mealInfo-tipModal').hide();\n            $('.select-mealInfo-tipModal img').hide();\n        });\n\n\n        /**\n         * 展示选择的套餐内容\n         */\n        function showSelectProduct(response) {\n            $.hideIndicator();\n            if (response.error === 0) {\n                var pinfo = response.msg;\n                parentDatas = pinfo.parent;\n                childDatas = pinfo.child;\n\n                //读取子产品数据\n                for (var _index in childDatas) {\n                    var _pid = childDatas[_index].P_Id;\n                    productOptions[_pid] = new ProductOptionPanel(childDatas[_pid]);\n                }\n                var productContentHtml = '';\n                //读取父产品数据\n                for (var _index in parentDatas) {\n                    var _pid = parentDatas[_index].P_Id;\n                    productOptions[_pid] = new ProductOptionPanel(parentDatas[_pid]);\n                    productContentHtml += productOptions[_pid].outputHtml();\n                }\n                //绑定事件\n                ProductOptionPanel.bindEvent($('.content'), productContentHtml);\n\n                //下一步\n                $('.mealInfo-btnWrap').on('click', '#btn-next', function(e) {\n                    var productPkg = []; //发往后台的数据\n                    var productNamePkg = {}; //在提交订单展示的数据\n                    productNamePkg.item = [];\n                    for (var _optionIndex in productOptions) {\n                        var _optionData = productOptions[_optionIndex];\n                        //检测虚拟产品是否选择子产品\n                        if (_optionData.panelType == 3 && _optionData.childs.length == 0) {\n                            $.toast('请选择' + _optionData.config.P_Name + '产品类型后再点击下一步哦');\n                            return false;\n                        }\n                        //过滤虚拟产品\n                        if (_optionData.totalPrice == 0) {\n                            continue;\n                        }\n                        //存入产品数据\n                        var _optionItem = {};\n                        _optionItem.pid = _optionData.config.P_Id;\n                        _optionItem.count = _optionData.nowPerson;\n                        _optionItem.sku = _optionData.skus;\n                        productPkg.push(_optionItem);\n                        //存入展示数据\n                        var _optionShowItem = {};\n                        if (_optionData.config.P_Parent != 0) {\n                            var _optionParentData = productOptions[_optionData.config.P_Parent];\n                            _optionShowItem.name = _optionParentData.config.P_Name + '-' + _optionData.config.P_Name;\n                        } else {\n                            _optionShowItem.name = _optionData.config.P_Name;\n                        }\n\n                        if (_optionData.skus.length > 0) {\n                            var _skuname = [];\n                            for (var _skuIndex in _optionData.skus) {\n                                _skuname.push(_optionData.skuPrice[_optionData.skus[_skuIndex]].PS_Title);\n                            }\n                            _optionShowItem.name += '(' + _skuname.join(',') + ')';\n                        }\n                        _optionShowItem.price = _optionData.totalPrice.toFixed(2);\n                        productNamePkg.item.push(_optionShowItem);\n                    }\n                    productNamePkg.accountTotalPrice = accountTotalPrice;\n                    productNamePkg.accountTotalDiscount = accountTotalDiscount;\n\n                    //计算产品占位\n                    var countHold = datePlaceHold(productId);\n\n                    //写入产品数据至COOKIES\n                    cookie.set('countPlaceHold', JSON.stringify(countHold));\n                    cookie.set('productPkg', JSON.stringify(productPkg));\n                    cookie.set('productNamePkg', JSON.stringify(productNamePkg));\n                    $.router.load('/Index/reservationDate');\n                });\n            } else if (response.error === 401) {\n                $.toast(response.msg);\n                setTimeout(function() {\n                    $.router.load('/Index/reservation');\n                }, 2000);\n            } else if (data.error === 400) {\n                $.router.load('/Index/login');\n            } else {\n                $.toast(response.msg);\n            }\n        }\n        \n        //获取占位产品id\n        function productId() {\n            var productLen = $('.select-mealList');\n            var productArr = [];\n            for (var i = 0; i < productLen.length; i++) {\n                var target = productLen[i];\n                (function(target) {\n                    var dia = $(target).data('pid');\n                    var diaLen = $(target).children().find('.select-mealProduct a.active');\n\n                    if (dia === 29) {\n                        for (var i = 0; i < diaLen.length; i++) {\n                            productArr.push($(diaLen[i]).data('pid'));\n                        }\n                    } else if (dia === 25) {\n                        for (var i = 0; i < diaLen.length; i++) {\n                            productArr.push($(diaLen[i]).data('pid'));\n                        }\n                    } else {\n                        productArr.push(dia);\n                    }\n                })(target)\n            }\n            return productArr;\n        }\n\n        /**\n         * 产品面板组件\n         */\n        var ProductOptionPanel = (function() {\n            var ProductOptionPanel = function(config) {\n                this.panelType; //1-基本产品 2-有SKU的基本产品 3-虚拟产品\n                this.config = config; //基本配置\n                this.nowPerson = parseInt(config.P_MinPerson); //当前人数\n                this.totalPrice = 0; //面板小计总价\n                this.skuPrice = {}; //SKU价目表\n                this.childs = []; //已选的子产品\n                this.skus = []; //已选的SKU\n\n                //判断面板类型\n                if (!config.P_Sku && !config.P_Child) {\n                    this.panelType = 1;\n                    if (config.P_Parent == 0) {\n                        this.totalPrice = parseFloat(config.P_Price);\n                    }\n                } else if (config.P_Child) {\n                    this.panelType = 3;\n                } else if (config.P_Sku) {\n                    this.panelType = 2;\n                    if (config.P_Parent == 0) {\n                        this.totalPrice = parseFloat(config.P_Price);\n                    }\n                    //生成SKU价目表\n                    for (var _skuType in config.P_Sku) {\n                        for (var _sku in config.P_Sku[_skuType].PST_Sku) {\n                            var _skuData = config.P_Sku[_skuType].PST_Sku[_sku];\n                            _skuData.PS_Price = parseFloat(_skuData.PS_Price);\n                            this.skuPrice[_skuData.PS_Id] = _skuData;\n                        }\n                    }\n                }\n            };\n\n            //输出面板HTML\n            ProductOptionPanel.prototype.outputHtml = function() {\n                var config = this.config;\n                var panelHtml = '';\n                switch (this.panelType) {\n                    case 1:\n                        panelHtml = '<div class=\"select-mealList\" data-pid=\"' + config.P_Id + '\"><p class=\"select-mealList-total\"><span class=\"select-mealInfo-pruduct\">' + config.P_Name + '</span>合计：<em class=\"unit-sum\">￥' + this.totalPrice.toFixed(2) + '</em></p></div>';\n                        break;\n                    case 2:\n                        var personCountHtml = _createPersonCountHtml(config, this.nowPerson);\n                        var skuHtml = _createSkuHtml([config.P_Sku]);\n                        panelHtml = '<div class=\"select-mealList\" data-pid=\"' + config.P_Id + '\"><h3>' + config.P_Name + '</h3>' + personCountHtml + skuHtml + '<p class=\"select-mealList-total\">合计：<em class=\"unit-sum\">￥' + this.totalPrice.toFixed(2) + '</em></p></div>';\n                        break;\n                    case 3:\n                        var childHtml = _createChildHtml(config.P_Child);\n                        panelHtml = '<div class=\"select-mealList\" data-pid=\"' + config.P_Id + '\"><h3>' + config.P_Name + '</h3><div class=\"upgrade-meal btn-set-child\"><p class=\"select-mealList-tip\">选择类型</p><div class=\"select-mealProduct\">' + childHtml + '</div></div><p class=\"select-mealList-total\">合计：<em class=\"unit-sum\">￥' + this.totalPrice.toFixed(2) + '</em></p></div>';\n                        break;\n                }\n                return panelHtml;\n            };\n\n            //绑定事件\n            ProductOptionPanel.bindEvent = function($contain, panelHtml) {\n                $contain.html(panelHtml);\n                //绑定人数选择器\n                $('.select-mealList').on('click', 'a', _clickHandle);\n                //更新总价\n                _updateTotalPrice();\n            }\n\n            //处理产品选项点击事件\n            var _clickHandle = function(e) {\n                var btnType = $(this).data('type');\n                switch (btnType) {\n                    case 'add':\n                        _addPerson(this);\n                        break;\n                    case 'reduce':\n                        _reducePerson(this);\n                        break;\n                    case 'sku':\n                        _handleSku(this);\n                        break;\n                    case 'child':\n                        _handleChild(this);\n                        break;\n                    case 'intro':\n                        _handleIntro(this);\n                    default:\n                        break;\n                }\n            };\n\n            //生成人数选择器\n            var _createPersonCountHtml = function(config, nowPerson) {\n                //判断是否需要选择器\n                if (config.P_MinPerson == config.P_MaxPerson) {\n                    return '';\n                }\n                //判断选择器名称\n                var _label = (config.P_Parent != 0) ? config.P_Name + '拍摄人数' : '拍摄人数';\n                var personCountHtml = '<div class=\"select-mealInfo-checkNum\" data-pid=\"' + config.P_Id + '\" style=\"display:block\"><span>' + _label + '</span><div class=\"select-inputGroup wyPhoto\"><a href=\"javascript:;\" class=\"select-mealInfo-reduceIcon\" data-type=\"reduce\"></a><span class=\"select-mealInfo-num\">' + nowPerson + '</span><a href=\"javascript:;\" class=\"select-mealInfo-addIcon\" data-type=\"add\"></a></div></div>';\n                return personCountHtml;\n            };\n\n            //生成CHILD HTML\n            var _createChildHtml = function(childData) {\n                var childHtml = '';\n                for (var _childIndex in childData) {\n                    var _childId = childData[_childIndex];\n                    var _child = childDatas[_childId];\n                    childHtml += '<a href=\"javascript:;\" data-type=\"child\" data-pid=\"' + _child.P_Id + '\" data-parent=\"' + _child.P_Parent + '\">' + _child.P_Name + '</a>';\n                }\n                return childHtml;\n            };\n\n            //生成SKU HTML\n            var _createSkuHtml = function(skuDatas) {\n                var skuHtml = '';\n                var skuData = {};\n                var skuItem = [];\n                //初始化分类\n                for (var _i in skuDatas) {\n                    for (var _skuIndex in skuDatas[_i]) {\n                        var _sku = skuDatas[_i][_skuIndex];\n                        if (!skuData[_sku.PST_Id]) {\n                            skuData[_sku.PST_Id] = {};\n                            skuData[_sku.PST_Id].tid = _sku.PST_Id;\n                            skuData[_sku.PST_Id].title = _sku.PST_Title;\n                            skuData[_sku.PST_Id].isRequire = _sku.PST_IsRequire;\n                            skuData[_sku.PST_Id].isMulti = _sku.PST_IsMulti;\n                            skuData[_sku.PST_Id].skuHtmlSet = [];\n                        }\n                        skuItem = skuItem.concat(_sku.PST_Sku);\n                    }\n                }\n                //遍历SKU分项\n                for (var _itemIndex in skuItem) {\n                    var _itme = skuItem[_itemIndex];\n                    var _isDisable = '';\n                    var _isActive = '';\n                    var _isExt = '';\n                    var _group = 0;\n                    //判断人数限制\n                    var nowPerson = productOptions[_itme.PS_Pid].nowPerson;\n                    if (_itme.PS_MinPerson && (nowPerson < _itme.PS_MinPerson || nowPerson > _itme.PS_MaxPerson)) {\n                        _isDisable = 'btn-disabled';\n                    }\n                    //第一个选项默认激活\n                    if (_isDisable == '' && _itemIndex == 0 && skuData[_itme.PS_Type].isRequire == 1) {\n                        _isActive = 'active';\n                        productOptions[_itme.PS_Pid].skus.push(parseInt(_itme.PS_Id));\n                        _updatePrice(_itme.PS_Pid);\n                    }\n                    //带颜色的SKU按钮\n                    if (_itme.PS_Ext) {\n                        _isExt = '<span class=\"select-colorWhite\" style=\"background-color:' + _itme.PS_Ext + '\"></span>';\n                    }\n                    //单选组按钮\n                    if (skuData[_itme.PS_Type].isMulti == 0) {\n                        _group = _itme.PS_Pid;\n                    }\n\n                    skuData[_itme.PS_Type].skuHtmlSet.push('<a href=\"javascript:;\" class=\"' + _isDisable + ' ' + _isActive + '\" data-sid=\"' + _itme.PS_Id + '\" data-pid=\"' + _itme.PS_Pid + '\" data-type=\"sku\" data-group=\"' + _group + '\">' + _itme.PS_Title + _isExt + '</a>');\n                }\n                //拼接SKU-HTML\n                for (var _skuIndex in skuData) {\n                    var _sku = skuData[_skuIndex];\n                    skuHtml += '<div class=\"upgrade-meal btn-set-sku\" data-skurequire=\"' + _sku.isRequire + '\"><p class=\"select-mealList-tip\">' + _sku.title + '<a data-type=\"intro\">' + _sku.title + '说明<em></em></a></p><div class=\"select-mealColor zjPhoto\">' + _sku.skuHtmlSet.join('') + '</div></div>';\n                }\n                return skuHtml;\n            };\n\n            //增加人数\n            var _addPerson = function(self) {\n                var $self = $(self);\n                var pid = $self.parents('.select-mealInfo-checkNum').data('pid');\n                var pData = productOptions[pid];\n                //子产品兼容\n                if (pData.P_Parent != 0) {\n                    var parentData = productOptions[pData.config.P_Parent];\n                }\n                //判断上限\n                if (pData.nowPerson + 1 > parseInt(pData.config.P_MaxPerson)) {\n                    return false;\n                }\n                var _nowPerson = pData.nowPerson + 1;\n                productOptions[pid].nowPerson = _nowPerson;\n                $self.siblings('.select-mealInfo-num').html(_nowPerson);\n                //重新输出SKU\n                var skuDatas = [];\n                if (parentData.childs.length > 0) {\n                    for (var _childIndex in parentData.childs) {\n                        productOptions[parentData.childs[_childIndex]].skus = [];\n                        if (childDatas[parentData.childs[_childIndex]].P_Sku) {\n                            skuDatas = skuDatas.concat(childDatas[parentData.childs[_childIndex]].P_Sku);\n                        }\n                        _updatePrice(parentData.childs[_childIndex]);\n                    }\n                } else {\n                    skuDatas = skuDatas.concat(pData.config.P_Sku);\n                }\n                var _newSkuHtml = _createSkuHtml(skuDatas);\n                $self.parents('.select-mealList').find('.btn-set-sku').html($(_newSkuHtml).html());\n                //更新价格\n                if (pData.config.P_Parent != 0) {\n                    _updatePrice(pData.config.P_Parent, self);\n                } else {\n                    _updatePrice(pid, self);\n                }\n            };\n\n            //减少人数\n            var _reducePerson = function(self) {\n                var $self = $(self);\n                var pid = $self.parents('.select-mealInfo-checkNum').data('pid');\n                var pData = productOptions[pid];\n                //子产品兼容\n                if (pData.P_Parent != 0) {\n                    var parentData = productOptions[pData.config.P_Parent];\n                }\n                //判断上限\n                if (pData.nowPerson - 1 < parseInt(pData.config.P_MinPerson)) {\n                    return false;\n                }\n                var _nowPerson = pData.nowPerson - 1;\n                productOptions[pid].nowPerson = _nowPerson;\n                $self.siblings('.select-mealInfo-num').html(_nowPerson);\n                //重新输出SKU\n                var skuDatas = [];\n                if (parentData.childs.length > 0) {\n                    for (var _childIndex in parentData.childs) {\n                        productOptions[parentData.childs[_childIndex]].skus = [];\n                        if (childDatas[parentData.childs[_childIndex]].P_Sku) {\n                            skuDatas = skuDatas.concat(childDatas[parentData.childs[_childIndex]].P_Sku);\n                        }\n                        _updatePrice(parentData.childs[_childIndex]);\n                    }\n                } else {\n                    skuDatas = skuDatas.concat(pData.config.P_Sku);\n                }\n                var _newSkuHtml = _createSkuHtml(skuDatas);\n                $self.parents('.select-mealList').find('.btn-set-sku').html($(_newSkuHtml).html());\n                //更新价格\n                if (pData.config.P_Parent != 0) {\n                    _updatePrice(pData.config.P_Parent, self);\n                } else {\n                    _updatePrice(pid, self);\n                }\n            };\n\n            //处理SKU\n            var _handleSku = function(self) {\n                var $self = $(self);\n                var sid = $self.data('sid');\n                var pid = $self.data('pid');\n                var group = $self.data('group');\n                var activeSku = [];\n\n                //判断是否禁止\n                if ($self.hasClass('btn-disabled')) {\n                    return false;\n                }\n                //判断行为\n                if ($self.hasClass('active')) {\n                    //判断是否必选\n                    var skuRequire = $self.parents('.btn-set-sku').data('skurequire');\n                    var skuCount = $self.siblings('a.active').length;\n                    if (skuRequire == 1 && skuCount == 0) {\n                        return false;\n                    }\n                    //恢复单选组\n                    if (group && group > 0) {\n                        $self.siblings('a[data-group=\"' + group + '\"]').each(function() {\n                            $(this).removeClass('btn-disabled');\n                        });\n                    }\n                    $self.removeClass('active');\n                } else {\n                    //单选组处理\n                    if (group && group > 0) {\n                        $self.siblings('a[data-group=\"' + group + '\"]').each(function() {\n                            $(this).addClass('btn-disabled');\n                        });\n                    }\n                    $self.addClass('active');\n                    activeSku.push(sid);\n                }\n                //获取已经选择的SKU\n                $self.siblings('a.active').each(function() {\n                    var _pid = $(this).data('pid');\n                    var _sid = $(this).data('sid');\n                    if (_pid == pid) {\n                        activeSku.push(_sid);\n                    }\n                });\n\n                productOptions[pid].skus = activeSku;\n                //更新价格\n                if (productOptions[pid].config.P_Parent != 0) {\n                    _updatePrice(pid);\n                    _updatePrice(productOptions[pid].config.P_Parent, self);\n                } else {\n                    _updatePrice(pid, self);\n                }\n            };\n\n            //处理子产品\n            var _handleChild = function(self) {\n                var $self = $(self);\n                var pid = $self.data('pid');\n                var parentid = $self.data('parent');\n                var activeChild = [];\n\n                //判断行为\n                if ($self.hasClass('active')) {\n                    $self.removeClass('active');\n                    productOptions[pid].totalPrice = 0;\n                    productOptions[pid].skus = [];\n                } else {\n                    $self.addClass('active');\n                    activeChild.push(pid);\n                }\n\n                //获取已经选择的子产品\n                $self.siblings('a.active').each(function() {\n                    activeChild.push($(this).data('pid'));\n                });\n                productOptions[parentid].childs = activeChild;\n                //重新生成人数选择器\n                var childPersonCountHtml = '';\n                $self.parents('.select-mealList').find('.select-mealInfo-checkNum').remove();\n                for (var _childIndex in activeChild) {\n                    childPersonCountHtml += _createPersonCountHtml(childDatas[activeChild[_childIndex]], productOptions[activeChild[_childIndex]].nowPerson);\n                }\n                $self.parents('.btn-set-child').after(childPersonCountHtml);\n                //重新生成SKU\n                $self.parents('.select-mealList').find('.btn-set-sku').remove();\n                var skuDatas = [];\n                for (var _childIndex in activeChild) {\n                    if (childDatas[activeChild[_childIndex]].P_Sku) {\n                        skuDatas = skuDatas.concat(childDatas[activeChild[_childIndex]].P_Sku);\n                    }\n                    //更新子产品价格\n                    _updatePrice(activeChild[_childIndex]);\n                }\n                var childSkuHtml = '';\n                childSkuHtml = _createSkuHtml(skuDatas);\n                if ($self.parents('.select-mealList').find('.select-mealInfo-checkNum').length > 0) {\n                    $self.parents('.select-mealList').find('.select-mealInfo-checkNum').last().after(childSkuHtml);\n                } else {\n                    $self.parents('.btn-set-child').after(childSkuHtml);\n                }\n                //标记已选SKU\n                for (var _childIndex in activeChild) {\n                    var _skusChecked = productOptions[activeChild[_childIndex]].skus;\n                    if (_skusChecked.length > 0) {\n                        for (var _skuIndex in _skusChecked) {\n                            $self.parents('.select-mealList').find('.btn-set-sku').find('a[data-sid=\"' + _skusChecked[_skuIndex] + '\"]').each(function() {\n                                //手动调用事件方法\n                                _handleSku(this);\n                            });\n                        }\n                    }\n                }\n                //更新父价格\n                _updatePrice(parentid, self);\n            };\n\n            //升级体验介绍\n            var _handleIntro = function(self) {\n                var introId = $(self).parents('.select-mealList').data('pid');\n                switch (parseInt(introId)) {\n                    case 1:\n                        $('.select-mealInfo-tipModal .intro-zjz').show();\n                        break;\n                    case 3:\n                        $('.select-mealInfo-tipModal .intro-marry').show();\n                        break;\n                    case 25:\n                        $('.select-mealInfo-tipModal .intro-grid').show();\n                        break;\n                }\n                $('.select-mealInfo-tipModal').show();\n            };\n\n            //更新价格\n            var _updatePrice = function(pid, self) {\n                var pData = productOptions[pid];\n                switch (pData.panelType) {\n                    case 1:\n                        if (pData.config.P_Parent == 0) {\n                            return;\n                        } else {\n                            var _productPrice = parseFloat(pData.config.P_Price);\n                            var _addPrice = (pData.nowPerson - parseInt(pData.config.P_MinPerson)) * parseFloat(pData.config.P_AddPersonPrice);\n                            var _totalPrice = _productPrice + _addPrice;\n                            productOptions[pid].totalPrice = _totalPrice;\n                        }\n                        break;\n                    case 2:\n                        var _productPrice = parseFloat(pData.config.P_Price);\n                        var _addPrice = (pData.nowPerson - parseInt(pData.config.P_MinPerson)) * parseFloat(pData.config.P_AddPersonPrice);\n                        var _skuPrice = 0;\n                        for (var _skuIndex in pData.skus) {\n                            _skuPrice += pData.skuPrice[pData.skus[_skuIndex]].PS_Price;\n                        }\n                        //去除产品包含的SKU价格\n                        _productPrice -= parseFloat(pData.config.P_Price_Sku);\n                        //计算总价\n                        var _totalPrice = _productPrice + _addPrice + _skuPrice;\n                        productOptions[pid].totalPrice = _totalPrice;\n                        break;\n                    case 3:\n                        var _totalPrice = 0;\n                        //获取所有子产品总价\n                        for (var _childIndex in pData.childs) {\n                            var _childData = productOptions[pData.childs[_childIndex]];\n                            _totalPrice += _childData.totalPrice;\n                        }\n                        break;\n                }\n                if (self) {\n                    //更新面板小计\n                    $(self).parents('.select-mealList').find('.select-mealList-total').html('合计：<em class=\"unit-sum\">￥' + _totalPrice.toFixed(2) + '</em>');\n                    _updateTotalPrice();\n                }\n            };\n            //计算总价\n            var _updateTotalPrice = function() {\n                //计算总价\n                var _allProductPrice = 0;\n                var _productCount = 0;\n                for (var _optionIndex in productOptions) {\n                    //过滤虚拟产品\n                    if (productOptions[_optionIndex].totalPrice == 0) {\n                        continue;\n                    }\n                    _allProductPrice += productOptions[_optionIndex].totalPrice;\n                    _productCount++;\n                }\n                var _discount = (_productCount - 1) * 30;\n                var _discountHtml = '';\n                if (_discount > 0) {\n                    _allProductPrice -= _discount;\n                    _discountHtml = '<b class=\"mealInfo-discount\">（优惠:￥' + _discount.toFixed(2) + '）</b>';\n                    accountTotalDiscount = _discount.toFixed(2);\n                } else {\n                    accountTotalDiscount = 0;\n                }\n                accountTotalPrice = _allProductPrice.toFixed(2);\n                //更新总价格\n                var _allPriceHtml = '总计:<em>￥' + _allProductPrice.toFixed(2) + '</em>' + _discountHtml + '<a id=\"btn-next\">下一步</a>';\n                $('.mealInfo-btnWrap').html(_allPriceHtml);\n            };\n\n            return ProductOptionPanel;\n        })();\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0TWVhbEluZm8uanM/MzBlYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlpZfppJDpgInmi6lcbiQoZnVuY3Rpb24oKSB7XG4gICAgLy8g5aWX6aSQ6YCJ5oup6K+m5oOFXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNzZWxlY3QtbWVhbEluZm8nLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICB2YXIgc3RvcmUgPSBjb29raWUuZ2V0KCdzdG9yZUlkJyk7XG4gICAgICAgIHZhciBwcm9kdWN0cyA9IGNvb2tpZS5nZXQoJ3Byb1NlbGVjdGVkJyk7XG4gICAgICAgIHZhciBwYXJlbnREYXRhcztcbiAgICAgICAgdmFyIGNoaWxkRGF0YXM7XG4gICAgICAgIHZhciBwcm9kdWN0T3B0aW9ucyA9IHt9O1xuICAgICAgICB2YXIgYWNjb3VudFRvdGFsUHJpY2UgPSAwO1xuICAgICAgICB2YXIgYWNjb3VudFRvdGFsRGlzY291bnQgPSAwO1xuICAgICAgICB2YXIgcHJvZHVjdERhdGEgPSB7fTsgLy/ojrflj5bkuqflk4HpgInpoblcbiAgICAgICAgcHJvZHVjdERhdGEuc3RvcmUgPSBzdG9yZTtcbiAgICAgICAgcHJvZHVjdERhdGEucHJvZHVjdHMgPSBwcm9kdWN0cztcblxuICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvZ2V0UHJvZHVjdE9wdGlvbicsIHByb2R1Y3REYXRhLCBzaG93U2VsZWN0UHJvZHVjdCk7XG5cblxuICAgICAgICAkKCcuc2VsZWN0LW1lYWxJbmZvLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuc2VsZWN0LW1lYWxJbmZvLXRpcE1vZGFsJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLnNlbGVjdC1tZWFsSW5mby10aXBNb2RhbCBpbWcnKS5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5zZWxlY3QtbWVhbEluZm8tbWFzaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLnNlbGVjdC1tZWFsSW5mby10aXBNb2RhbCcpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5zZWxlY3QtbWVhbEluZm8tdGlwTW9kYWwgaW1nJykuaGlkZSgpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDlsZXnpLrpgInmi6nnmoTlpZfppJDlhoXlrrlcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNob3dTZWxlY3RQcm9kdWN0KHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBwaW5mbyA9IHJlc3BvbnNlLm1zZztcbiAgICAgICAgICAgICAgICBwYXJlbnREYXRhcyA9IHBpbmZvLnBhcmVudDtcbiAgICAgICAgICAgICAgICBjaGlsZERhdGFzID0gcGluZm8uY2hpbGQ7XG5cbiAgICAgICAgICAgICAgICAvL+ivu+WPluWtkOS6p+WTgeaVsOaNrlxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pbmRleCBpbiBjaGlsZERhdGFzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfcGlkID0gY2hpbGREYXRhc1tfaW5kZXhdLlBfSWQ7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RPcHRpb25zW19waWRdID0gbmV3IFByb2R1Y3RPcHRpb25QYW5lbChjaGlsZERhdGFzW19waWRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RDb250ZW50SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIC8v6K+75Y+W54i25Lqn5ZOB5pWw5o2uXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2luZGV4IGluIHBhcmVudERhdGFzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfcGlkID0gcGFyZW50RGF0YXNbX2luZGV4XS5QX0lkO1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0T3B0aW9uc1tfcGlkXSA9IG5ldyBQcm9kdWN0T3B0aW9uUGFuZWwocGFyZW50RGF0YXNbX3BpZF0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0Q29udGVudEh0bWwgKz0gcHJvZHVjdE9wdGlvbnNbX3BpZF0ub3V0cHV0SHRtbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+e7keWumuS6i+S7tlxuICAgICAgICAgICAgICAgIFByb2R1Y3RPcHRpb25QYW5lbC5iaW5kRXZlbnQoJCgnLmNvbnRlbnQnKSwgcHJvZHVjdENvbnRlbnRIdG1sKTtcblxuICAgICAgICAgICAgICAgIC8v5LiL5LiA5q2lXG4gICAgICAgICAgICAgICAgJCgnLm1lYWxJbmZvLWJ0bldyYXAnKS5vbignY2xpY2snLCAnI2J0bi1uZXh0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdFBrZyA9IFtdOyAvL+WPkeW+gOWQjuWPsOeahOaVsOaNrlxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdE5hbWVQa2cgPSB7fTsgLy/lnKjmj5DkuqTorqLljZXlsZXnpLrnmoTmlbDmja5cbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdE5hbWVQa2cuaXRlbSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfb3B0aW9uSW5kZXggaW4gcHJvZHVjdE9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfb3B0aW9uRGF0YSA9IHByb2R1Y3RPcHRpb25zW19vcHRpb25JbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+ajgOa1i+iZmuaLn+S6p+WTgeaYr+WQpumAieaLqeWtkOS6p+WTgVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9vcHRpb25EYXRhLnBhbmVsVHlwZSA9PSAzICYmIF9vcHRpb25EYXRhLmNoaWxkcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QoJ+ivt+mAieaLqScgKyBfb3B0aW9uRGF0YS5jb25maWcuUF9OYW1lICsgJ+S6p+WTgeexu+Wei+WQjuWGjeeCueWHu+S4i+S4gOatpeWTpicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+H5ruk6Jma5ouf5Lqn5ZOBXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX29wdGlvbkRhdGEudG90YWxQcmljZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WtmOWFpeS6p+WTgeaVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9vcHRpb25JdGVtID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uSXRlbS5waWQgPSBfb3B0aW9uRGF0YS5jb25maWcuUF9JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcHRpb25JdGVtLmNvdW50ID0gX29wdGlvbkRhdGEubm93UGVyc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29wdGlvbkl0ZW0uc2t1ID0gX29wdGlvbkRhdGEuc2t1cztcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RQa2cucHVzaChfb3B0aW9uSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WtmOWFpeWxleekuuaVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9vcHRpb25TaG93SXRlbSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9vcHRpb25EYXRhLmNvbmZpZy5QX1BhcmVudCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9vcHRpb25QYXJlbnREYXRhID0gcHJvZHVjdE9wdGlvbnNbX29wdGlvbkRhdGEuY29uZmlnLlBfUGFyZW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uU2hvd0l0ZW0ubmFtZSA9IF9vcHRpb25QYXJlbnREYXRhLmNvbmZpZy5QX05hbWUgKyAnLScgKyBfb3B0aW9uRGF0YS5jb25maWcuUF9OYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uU2hvd0l0ZW0ubmFtZSA9IF9vcHRpb25EYXRhLmNvbmZpZy5QX05hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfb3B0aW9uRGF0YS5za3VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3NrdW5hbWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfc2t1SW5kZXggaW4gX29wdGlvbkRhdGEuc2t1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2t1bmFtZS5wdXNoKF9vcHRpb25EYXRhLnNrdVByaWNlW19vcHRpb25EYXRhLnNrdXNbX3NrdUluZGV4XV0uUFNfVGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uU2hvd0l0ZW0ubmFtZSArPSAnKCcgKyBfc2t1bmFtZS5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uU2hvd0l0ZW0ucHJpY2UgPSBfb3B0aW9uRGF0YS50b3RhbFByaWNlLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0TmFtZVBrZy5pdGVtLnB1c2goX29wdGlvblNob3dJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0TmFtZVBrZy5hY2NvdW50VG90YWxQcmljZSA9IGFjY291bnRUb3RhbFByaWNlO1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0TmFtZVBrZy5hY2NvdW50VG90YWxEaXNjb3VudCA9IGFjY291bnRUb3RhbERpc2NvdW50O1xuXG4gICAgICAgICAgICAgICAgICAgIC8v6K6h566X5Lqn5ZOB5Y2g5L2NXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudEhvbGQgPSBkYXRlUGxhY2VIb2xkKHByb2R1Y3RJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy/lhpnlhaXkuqflk4HmlbDmja7oh7NDT09LSUVTXG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ2NvdW50UGxhY2VIb2xkJywgSlNPTi5zdHJpbmdpZnkoY291bnRIb2xkKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ3Byb2R1Y3RQa2cnLCBKU09OLnN0cmluZ2lmeShwcm9kdWN0UGtnKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ3Byb2R1Y3ROYW1lUGtnJywgSlNPTi5zdHJpbmdpZnkocHJvZHVjdE5hbWVQa2cpKTtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L3Jlc2VydmF0aW9uRGF0ZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvbicpO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvL+iOt+WPluWNoOS9jeS6p+WTgWlkXG4gICAgICAgIGZ1bmN0aW9uIHByb2R1Y3RJZCgpIHtcbiAgICAgICAgICAgIHZhciBwcm9kdWN0TGVuID0gJCgnLnNlbGVjdC1tZWFsTGlzdCcpO1xuICAgICAgICAgICAgdmFyIHByb2R1Y3RBcnIgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdExlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBwcm9kdWN0TGVuW2ldO1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpYSA9ICQodGFyZ2V0KS5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpYUxlbiA9ICQodGFyZ2V0KS5jaGlsZHJlbigpLmZpbmQoJy5zZWxlY3QtbWVhbFByb2R1Y3QgYS5hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlhID09PSAyOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaWFMZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0QXJyLnB1c2goJChkaWFMZW5baV0pLmRhdGEoJ3BpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWEgPT09IDI1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpYUxlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RBcnIucHVzaCgkKGRpYUxlbltpXSkuZGF0YSgncGlkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEFyci5wdXNoKGRpYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSh0YXJnZXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvZHVjdEFycjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDkuqflk4HpnaLmnb/nu4Tku7ZcbiAgICAgICAgICovXG4gICAgICAgIHZhciBQcm9kdWN0T3B0aW9uUGFuZWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgUHJvZHVjdE9wdGlvblBhbmVsID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lbFR5cGU7IC8vMS3ln7rmnKzkuqflk4EgMi3mnIlTS1XnmoTln7rmnKzkuqflk4EgMy3omZrmi5/kuqflk4FcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZzsgLy/ln7rmnKzphY3nva5cbiAgICAgICAgICAgICAgICB0aGlzLm5vd1BlcnNvbiA9IHBhcnNlSW50KGNvbmZpZy5QX01pblBlcnNvbik7IC8v5b2T5YmN5Lq65pWwXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFByaWNlID0gMDsgLy/pnaLmnb/lsI/orqHmgLvku7dcbiAgICAgICAgICAgICAgICB0aGlzLnNrdVByaWNlID0ge307IC8vU0tV5Lu355uu6KGoXG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHMgPSBbXTsgLy/lt7LpgInnmoTlrZDkuqflk4FcbiAgICAgICAgICAgICAgICB0aGlzLnNrdXMgPSBbXTsgLy/lt7LpgInnmoRTS1VcblxuICAgICAgICAgICAgICAgIC8v5Yik5pat6Z2i5p2/57G75Z6LXG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcuUF9Ta3UgJiYgIWNvbmZpZy5QX0NoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFuZWxUeXBlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5QX1BhcmVudCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSBwYXJzZUZsb2F0KGNvbmZpZy5QX1ByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLlBfQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYW5lbFR5cGUgPSAzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLlBfU2t1KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFuZWxUeXBlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5QX1BhcmVudCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSBwYXJzZUZsb2F0KGNvbmZpZy5QX1ByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL+eUn+aIkFNLVeS7t+ebruihqFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfc2t1VHlwZSBpbiBjb25maWcuUF9Ta3UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9za3UgaW4gY29uZmlnLlBfU2t1W19za3VUeXBlXS5QU1RfU2t1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9za3VEYXRhID0gY29uZmlnLlBfU2t1W19za3VUeXBlXS5QU1RfU2t1W19za3VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9za3VEYXRhLlBTX1ByaWNlID0gcGFyc2VGbG9hdChfc2t1RGF0YS5QU19QcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5za3VQcmljZVtfc2t1RGF0YS5QU19JZF0gPSBfc2t1RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8v6L6T5Ye66Z2i5p2/SFRNTFxuICAgICAgICAgICAgUHJvZHVjdE9wdGlvblBhbmVsLnByb3RvdHlwZS5vdXRwdXRIdG1sID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgICAgICAgICAgICAgIHZhciBwYW5lbEh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMucGFuZWxUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsSHRtbCA9ICc8ZGl2IGNsYXNzPVwic2VsZWN0LW1lYWxMaXN0XCIgZGF0YS1waWQ9XCInICsgY29uZmlnLlBfSWQgKyAnXCI+PHAgY2xhc3M9XCJzZWxlY3QtbWVhbExpc3QtdG90YWxcIj48c3BhbiBjbGFzcz1cInNlbGVjdC1tZWFsSW5mby1wcnVkdWN0XCI+JyArIGNvbmZpZy5QX05hbWUgKyAnPC9zcGFuPuWQiOiuoe+8mjxlbSBjbGFzcz1cInVuaXQtc3VtXCI+77+lJyArIHRoaXMudG90YWxQcmljZS50b0ZpeGVkKDIpICsgJzwvZW0+PC9wPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcnNvbkNvdW50SHRtbCA9IF9jcmVhdGVQZXJzb25Db3VudEh0bWwoY29uZmlnLCB0aGlzLm5vd1BlcnNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2t1SHRtbCA9IF9jcmVhdGVTa3VIdG1sKFtjb25maWcuUF9Ta3VdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsSHRtbCA9ICc8ZGl2IGNsYXNzPVwic2VsZWN0LW1lYWxMaXN0XCIgZGF0YS1waWQ9XCInICsgY29uZmlnLlBfSWQgKyAnXCI+PGgzPicgKyBjb25maWcuUF9OYW1lICsgJzwvaDM+JyArIHBlcnNvbkNvdW50SHRtbCArIHNrdUh0bWwgKyAnPHAgY2xhc3M9XCJzZWxlY3QtbWVhbExpc3QtdG90YWxcIj7lkIjorqHvvJo8ZW0gY2xhc3M9XCJ1bml0LXN1bVwiPu+/pScgKyB0aGlzLnRvdGFsUHJpY2UudG9GaXhlZCgyKSArICc8L2VtPjwvcD48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEh0bWwgPSBfY3JlYXRlQ2hpbGRIdG1sKGNvbmZpZy5QX0NoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsSHRtbCA9ICc8ZGl2IGNsYXNzPVwic2VsZWN0LW1lYWxMaXN0XCIgZGF0YS1waWQ9XCInICsgY29uZmlnLlBfSWQgKyAnXCI+PGgzPicgKyBjb25maWcuUF9OYW1lICsgJzwvaDM+PGRpdiBjbGFzcz1cInVwZ3JhZGUtbWVhbCBidG4tc2V0LWNoaWxkXCI+PHAgY2xhc3M9XCJzZWxlY3QtbWVhbExpc3QtdGlwXCI+6YCJ5oup57G75Z6LPC9wPjxkaXYgY2xhc3M9XCJzZWxlY3QtbWVhbFByb2R1Y3RcIj4nICsgY2hpbGRIdG1sICsgJzwvZGl2PjwvZGl2PjxwIGNsYXNzPVwic2VsZWN0LW1lYWxMaXN0LXRvdGFsXCI+5ZCI6K6h77yaPGVtIGNsYXNzPVwidW5pdC1zdW1cIj7vv6UnICsgdGhpcy50b3RhbFByaWNlLnRvRml4ZWQoMikgKyAnPC9lbT48L3A+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFuZWxIdG1sO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/nu5Hlrprkuovku7ZcbiAgICAgICAgICAgIFByb2R1Y3RPcHRpb25QYW5lbC5iaW5kRXZlbnQgPSBmdW5jdGlvbigkY29udGFpbiwgcGFuZWxIdG1sKSB7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW4uaHRtbChwYW5lbEh0bWwpO1xuICAgICAgICAgICAgICAgIC8v57uR5a6a5Lq65pWw6YCJ5oup5ZmoXG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdC1tZWFsTGlzdCcpLm9uKCdjbGljaycsICdhJywgX2NsaWNrSGFuZGxlKTtcbiAgICAgICAgICAgICAgICAvL+abtOaWsOaAu+S7t1xuICAgICAgICAgICAgICAgIF91cGRhdGVUb3RhbFByaWNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8v5aSE55CG5Lqn5ZOB6YCJ6aG554K55Ye75LqL5Lu2XG4gICAgICAgICAgICB2YXIgX2NsaWNrSGFuZGxlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBidG5UeXBlID0gJCh0aGlzKS5kYXRhKCd0eXBlJyk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChidG5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkUGVyc29uKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZHVjZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVkdWNlUGVyc29uKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NrdSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGFuZGxlU2t1KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oYW5kbGVDaGlsZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnRybyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGFuZGxlSW50cm8odGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL+eUn+aIkOS6uuaVsOmAieaLqeWZqFxuICAgICAgICAgICAgdmFyIF9jcmVhdGVQZXJzb25Db3VudEh0bWwgPSBmdW5jdGlvbihjb25maWcsIG5vd1BlcnNvbikge1xuICAgICAgICAgICAgICAgIC8v5Yik5pat5piv5ZCm6ZyA6KaB6YCJ5oup5ZmoXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5QX01pblBlcnNvbiA9PSBjb25maWcuUF9NYXhQZXJzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+WIpOaWremAieaLqeWZqOWQjeensFxuICAgICAgICAgICAgICAgIHZhciBfbGFiZWwgPSAoY29uZmlnLlBfUGFyZW50ICE9IDApID8gY29uZmlnLlBfTmFtZSArICfmi43mkYTkurrmlbAnIDogJ+aLjeaRhOS6uuaVsCc7XG4gICAgICAgICAgICAgICAgdmFyIHBlcnNvbkNvdW50SHRtbCA9ICc8ZGl2IGNsYXNzPVwic2VsZWN0LW1lYWxJbmZvLWNoZWNrTnVtXCIgZGF0YS1waWQ9XCInICsgY29uZmlnLlBfSWQgKyAnXCIgc3R5bGU9XCJkaXNwbGF5OmJsb2NrXCI+PHNwYW4+JyArIF9sYWJlbCArICc8L3NwYW4+PGRpdiBjbGFzcz1cInNlbGVjdC1pbnB1dEdyb3VwIHd5UGhvdG9cIj48YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJzZWxlY3QtbWVhbEluZm8tcmVkdWNlSWNvblwiIGRhdGEtdHlwZT1cInJlZHVjZVwiPjwvYT48c3BhbiBjbGFzcz1cInNlbGVjdC1tZWFsSW5mby1udW1cIj4nICsgbm93UGVyc29uICsgJzwvc3Bhbj48YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJzZWxlY3QtbWVhbEluZm8tYWRkSWNvblwiIGRhdGEtdHlwZT1cImFkZFwiPjwvYT48L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBwZXJzb25Db3VudEh0bWw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL+eUn+aIkENISUxEIEhUTUxcbiAgICAgICAgICAgIHZhciBfY3JlYXRlQ2hpbGRIdG1sID0gZnVuY3Rpb24oY2hpbGREYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9jaGlsZEluZGV4IGluIGNoaWxkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2NoaWxkSWQgPSBjaGlsZERhdGFbX2NoaWxkSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2NoaWxkID0gY2hpbGREYXRhc1tfY2hpbGRJZF07XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkSHRtbCArPSAnPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGRhdGEtdHlwZT1cImNoaWxkXCIgZGF0YS1waWQ9XCInICsgX2NoaWxkLlBfSWQgKyAnXCIgZGF0YS1wYXJlbnQ9XCInICsgX2NoaWxkLlBfUGFyZW50ICsgJ1wiPicgKyBfY2hpbGQuUF9OYW1lICsgJzwvYT4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRIdG1sO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/nlJ/miJBTS1UgSFRNTFxuICAgICAgICAgICAgdmFyIF9jcmVhdGVTa3VIdG1sID0gZnVuY3Rpb24oc2t1RGF0YXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2t1SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBza3VEYXRhID0ge307XG4gICAgICAgICAgICAgICAgdmFyIHNrdUl0ZW0gPSBbXTtcbiAgICAgICAgICAgICAgICAvL+WIneWni+WMluWIhuexu1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pIGluIHNrdURhdGFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9za3VJbmRleCBpbiBza3VEYXRhc1tfaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfc2t1ID0gc2t1RGF0YXNbX2ldW19za3VJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNrdURhdGFbX3NrdS5QU1RfSWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2t1RGF0YVtfc2t1LlBTVF9JZF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza3VEYXRhW19za3UuUFNUX0lkXS50aWQgPSBfc2t1LlBTVF9JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza3VEYXRhW19za3UuUFNUX0lkXS50aXRsZSA9IF9za3UuUFNUX1RpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNrdURhdGFbX3NrdS5QU1RfSWRdLmlzUmVxdWlyZSA9IF9za3UuUFNUX0lzUmVxdWlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza3VEYXRhW19za3UuUFNUX0lkXS5pc011bHRpID0gX3NrdS5QU1RfSXNNdWx0aTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza3VEYXRhW19za3UuUFNUX0lkXS5za3VIdG1sU2V0ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBza3VJdGVtID0gc2t1SXRlbS5jb25jYXQoX3NrdS5QU1RfU2t1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+mBjeWOhlNLVeWIhumhuVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVtSW5kZXggaW4gc2t1SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2l0bWUgPSBza3VJdGVtW19pdGVtSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2lzRGlzYWJsZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2lzQWN0aXZlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfaXNFeHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9ncm91cCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5Lq65pWw6ZmQ5Yi2XG4gICAgICAgICAgICAgICAgICAgIHZhciBub3dQZXJzb24gPSBwcm9kdWN0T3B0aW9uc1tfaXRtZS5QU19QaWRdLm5vd1BlcnNvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9pdG1lLlBTX01pblBlcnNvbiAmJiAobm93UGVyc29uIDwgX2l0bWUuUFNfTWluUGVyc29uIHx8IG5vd1BlcnNvbiA+IF9pdG1lLlBTX01heFBlcnNvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pc0Rpc2FibGUgPSAnYnRuLWRpc2FibGVkJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL+esrOS4gOS4qumAiemhuem7mOiupOa/gOa0u1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2lzRGlzYWJsZSA9PSAnJyAmJiBfaXRlbUluZGV4ID09IDAgJiYgc2t1RGF0YVtfaXRtZS5QU19UeXBlXS5pc1JlcXVpcmUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lzQWN0aXZlID0gJ2FjdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0T3B0aW9uc1tfaXRtZS5QU19QaWRdLnNrdXMucHVzaChwYXJzZUludChfaXRtZS5QU19JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3VwZGF0ZVByaWNlKF9pdG1lLlBTX1BpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy/luKbpopzoibLnmoRTS1XmjInpkq5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF9pdG1lLlBTX0V4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lzRXh0ID0gJzxzcGFuIGNsYXNzPVwic2VsZWN0LWNvbG9yV2hpdGVcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JyArIF9pdG1lLlBTX0V4dCArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL+WNlemAiee7hOaMiemSrlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2t1RGF0YVtfaXRtZS5QU19UeXBlXS5pc011bHRpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncm91cCA9IF9pdG1lLlBTX1BpZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNrdURhdGFbX2l0bWUuUFNfVHlwZV0uc2t1SHRtbFNldC5wdXNoKCc8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCInICsgX2lzRGlzYWJsZSArICcgJyArIF9pc0FjdGl2ZSArICdcIiBkYXRhLXNpZD1cIicgKyBfaXRtZS5QU19JZCArICdcIiBkYXRhLXBpZD1cIicgKyBfaXRtZS5QU19QaWQgKyAnXCIgZGF0YS10eXBlPVwic2t1XCIgZGF0YS1ncm91cD1cIicgKyBfZ3JvdXAgKyAnXCI+JyArIF9pdG1lLlBTX1RpdGxlICsgX2lzRXh0ICsgJzwvYT4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/mi7zmjqVTS1UtSFRNTFxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9za3VJbmRleCBpbiBza3VEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfc2t1ID0gc2t1RGF0YVtfc2t1SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBza3VIdG1sICs9ICc8ZGl2IGNsYXNzPVwidXBncmFkZS1tZWFsIGJ0bi1zZXQtc2t1XCIgZGF0YS1za3VyZXF1aXJlPVwiJyArIF9za3UuaXNSZXF1aXJlICsgJ1wiPjxwIGNsYXNzPVwic2VsZWN0LW1lYWxMaXN0LXRpcFwiPicgKyBfc2t1LnRpdGxlICsgJzxhIGRhdGEtdHlwZT1cImludHJvXCI+JyArIF9za3UudGl0bGUgKyAn6K+05piOPGVtPjwvZW0+PC9hPjwvcD48ZGl2IGNsYXNzPVwic2VsZWN0LW1lYWxDb2xvciB6alBob3RvXCI+JyArIF9za3Uuc2t1SHRtbFNldC5qb2luKCcnKSArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2t1SHRtbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8v5aKe5Yqg5Lq65pWwXG4gICAgICAgICAgICB2YXIgX2FkZFBlcnNvbiA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHNlbGYpO1xuICAgICAgICAgICAgICAgIHZhciBwaWQgPSAkc2VsZi5wYXJlbnRzKCcuc2VsZWN0LW1lYWxJbmZvLWNoZWNrTnVtJykuZGF0YSgncGlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBEYXRhID0gcHJvZHVjdE9wdGlvbnNbcGlkXTtcbiAgICAgICAgICAgICAgICAvL+WtkOS6p+WTgeWFvOWuuVxuICAgICAgICAgICAgICAgIGlmIChwRGF0YS5QX1BhcmVudCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnREYXRhID0gcHJvZHVjdE9wdGlvbnNbcERhdGEuY29uZmlnLlBfUGFyZW50XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/liKTmlq3kuIrpmZBcbiAgICAgICAgICAgICAgICBpZiAocERhdGEubm93UGVyc29uICsgMSA+IHBhcnNlSW50KHBEYXRhLmNvbmZpZy5QX01heFBlcnNvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgX25vd1BlcnNvbiA9IHBEYXRhLm5vd1BlcnNvbiArIDE7XG4gICAgICAgICAgICAgICAgcHJvZHVjdE9wdGlvbnNbcGlkXS5ub3dQZXJzb24gPSBfbm93UGVyc29uO1xuICAgICAgICAgICAgICAgICRzZWxmLnNpYmxpbmdzKCcuc2VsZWN0LW1lYWxJbmZvLW51bScpLmh0bWwoX25vd1BlcnNvbik7XG4gICAgICAgICAgICAgICAgLy/ph43mlrDovpPlh7pTS1VcbiAgICAgICAgICAgICAgICB2YXIgc2t1RGF0YXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50RGF0YS5jaGlsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfY2hpbGRJbmRleCBpbiBwYXJlbnREYXRhLmNoaWxkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdE9wdGlvbnNbcGFyZW50RGF0YS5jaGlsZHNbX2NoaWxkSW5kZXhdXS5za3VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGREYXRhc1twYXJlbnREYXRhLmNoaWxkc1tfY2hpbGRJbmRleF1dLlBfU2t1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2t1RGF0YXMgPSBza3VEYXRhcy5jb25jYXQoY2hpbGREYXRhc1twYXJlbnREYXRhLmNoaWxkc1tfY2hpbGRJbmRleF1dLlBfU2t1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF91cGRhdGVQcmljZShwYXJlbnREYXRhLmNoaWxkc1tfY2hpbGRJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2t1RGF0YXMgPSBza3VEYXRhcy5jb25jYXQocERhdGEuY29uZmlnLlBfU2t1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIF9uZXdTa3VIdG1sID0gX2NyZWF0ZVNrdUh0bWwoc2t1RGF0YXMpO1xuICAgICAgICAgICAgICAgICRzZWxmLnBhcmVudHMoJy5zZWxlY3QtbWVhbExpc3QnKS5maW5kKCcuYnRuLXNldC1za3UnKS5odG1sKCQoX25ld1NrdUh0bWwpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgLy/mm7TmlrDku7fmoLxcbiAgICAgICAgICAgICAgICBpZiAocERhdGEuY29uZmlnLlBfUGFyZW50ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3VwZGF0ZVByaWNlKHBEYXRhLmNvbmZpZy5QX1BhcmVudCwgc2VsZik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3VwZGF0ZVByaWNlKHBpZCwgc2VsZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/lh4/lsJHkurrmlbBcbiAgICAgICAgICAgIHZhciBfcmVkdWNlUGVyc29uID0gZnVuY3Rpb24oc2VsZikge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XG4gICAgICAgICAgICAgICAgdmFyIHBpZCA9ICRzZWxmLnBhcmVudHMoJy5zZWxlY3QtbWVhbEluZm8tY2hlY2tOdW0nKS5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcERhdGEgPSBwcm9kdWN0T3B0aW9uc1twaWRdO1xuICAgICAgICAgICAgICAgIC8v5a2Q5Lqn5ZOB5YW85a65XG4gICAgICAgICAgICAgICAgaWYgKHBEYXRhLlBfUGFyZW50ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudERhdGEgPSBwcm9kdWN0T3B0aW9uc1twRGF0YS5jb25maWcuUF9QYXJlbnRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+WIpOaWreS4iumZkFxuICAgICAgICAgICAgICAgIGlmIChwRGF0YS5ub3dQZXJzb24gLSAxIDwgcGFyc2VJbnQocERhdGEuY29uZmlnLlBfTWluUGVyc29uKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBfbm93UGVyc29uID0gcERhdGEubm93UGVyc29uIC0gMTtcbiAgICAgICAgICAgICAgICBwcm9kdWN0T3B0aW9uc1twaWRdLm5vd1BlcnNvbiA9IF9ub3dQZXJzb247XG4gICAgICAgICAgICAgICAgJHNlbGYuc2libGluZ3MoJy5zZWxlY3QtbWVhbEluZm8tbnVtJykuaHRtbChfbm93UGVyc29uKTtcbiAgICAgICAgICAgICAgICAvL+mHjeaWsOi+k+WHulNLVVxuICAgICAgICAgICAgICAgIHZhciBza3VEYXRhcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnREYXRhLmNoaWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jaGlsZEluZGV4IGluIHBhcmVudERhdGEuY2hpbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0T3B0aW9uc1twYXJlbnREYXRhLmNoaWxkc1tfY2hpbGRJbmRleF1dLnNrdXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZERhdGFzW3BhcmVudERhdGEuY2hpbGRzW19jaGlsZEluZGV4XV0uUF9Ta3UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza3VEYXRhcyA9IHNrdURhdGFzLmNvbmNhdChjaGlsZERhdGFzW3BhcmVudERhdGEuY2hpbGRzW19jaGlsZEluZGV4XV0uUF9Ta3UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3VwZGF0ZVByaWNlKHBhcmVudERhdGEuY2hpbGRzW19jaGlsZEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBza3VEYXRhcyA9IHNrdURhdGFzLmNvbmNhdChwRGF0YS5jb25maWcuUF9Ta3UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgX25ld1NrdUh0bWwgPSBfY3JlYXRlU2t1SHRtbChza3VEYXRhcyk7XG4gICAgICAgICAgICAgICAgJHNlbGYucGFyZW50cygnLnNlbGVjdC1tZWFsTGlzdCcpLmZpbmQoJy5idG4tc2V0LXNrdScpLmh0bWwoJChfbmV3U2t1SHRtbCkuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAvL+abtOaWsOS7t+agvFxuICAgICAgICAgICAgICAgIGlmIChwRGF0YS5jb25maWcuUF9QYXJlbnQgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlUHJpY2UocERhdGEuY29uZmlnLlBfUGFyZW50LCBzZWxmKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlUHJpY2UocGlkLCBzZWxmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL+WkhOeQhlNLVVxuICAgICAgICAgICAgdmFyIF9oYW5kbGVTa3UgPSBmdW5jdGlvbihzZWxmKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxmID0gJChzZWxmKTtcbiAgICAgICAgICAgICAgICB2YXIgc2lkID0gJHNlbGYuZGF0YSgnc2lkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBpZCA9ICRzZWxmLmRhdGEoJ3BpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBncm91cCA9ICRzZWxmLmRhdGEoJ2dyb3VwJyk7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVNrdSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy/liKTmlq3mmK/lkKbnpoHmraJcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaGFzQ2xhc3MoJ2J0bi1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/liKTmlq3ooYzkuLpcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5piv5ZCm5b+F6YCJXG4gICAgICAgICAgICAgICAgICAgIHZhciBza3VSZXF1aXJlID0gJHNlbGYucGFyZW50cygnLmJ0bi1zZXQtc2t1JykuZGF0YSgnc2t1cmVxdWlyZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2t1Q291bnQgPSAkc2VsZi5zaWJsaW5ncygnYS5hY3RpdmUnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza3VSZXF1aXJlID09IDEgJiYgc2t1Q291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8v5oGi5aSN5Y2V6YCJ57uEXG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cCAmJiBncm91cCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnNpYmxpbmdzKCdhW2RhdGEtZ3JvdXA9XCInICsgZ3JvdXAgKyAnXCJdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdidG4tZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL+WNlemAiee7hOWkhOeQhlxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXAgJiYgZ3JvdXAgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5zaWJsaW5ncygnYVtkYXRhLWdyb3VwPVwiJyArIGdyb3VwICsgJ1wiXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYnRuLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNrdS5wdXNoKHNpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v6I635Y+W5bey57uP6YCJ5oup55qEU0tVXG4gICAgICAgICAgICAgICAgJHNlbGYuc2libGluZ3MoJ2EuYWN0aXZlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9waWQgPSAkKHRoaXMpLmRhdGEoJ3BpZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3NpZCA9ICQodGhpcykuZGF0YSgnc2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfcGlkID09IHBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2t1LnB1c2goX3NpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHByb2R1Y3RPcHRpb25zW3BpZF0uc2t1cyA9IGFjdGl2ZVNrdTtcbiAgICAgICAgICAgICAgICAvL+abtOaWsOS7t+agvFxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0T3B0aW9uc1twaWRdLmNvbmZpZy5QX1BhcmVudCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF91cGRhdGVQcmljZShwaWQpO1xuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlUHJpY2UocHJvZHVjdE9wdGlvbnNbcGlkXS5jb25maWcuUF9QYXJlbnQsIHNlbGYpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF91cGRhdGVQcmljZShwaWQsIHNlbGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8v5aSE55CG5a2Q5Lqn5ZOBXG4gICAgICAgICAgICB2YXIgX2hhbmRsZUNoaWxkID0gZnVuY3Rpb24oc2VsZikge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XG4gICAgICAgICAgICAgICAgdmFyIHBpZCA9ICRzZWxmLmRhdGEoJ3BpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRpZCA9ICRzZWxmLmRhdGEoJ3BhcmVudCcpO1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVDaGlsZCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy/liKTmlq3ooYzkuLpcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdE9wdGlvbnNbcGlkXS50b3RhbFByaWNlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdE9wdGlvbnNbcGlkXS5za3VzID0gW107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDaGlsZC5wdXNoKHBpZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy/ojrflj5blt7Lnu4/pgInmi6nnmoTlrZDkuqflk4FcbiAgICAgICAgICAgICAgICAkc2VsZi5zaWJsaW5ncygnYS5hY3RpdmUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDaGlsZC5wdXNoKCQodGhpcykuZGF0YSgncGlkJykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb2R1Y3RPcHRpb25zW3BhcmVudGlkXS5jaGlsZHMgPSBhY3RpdmVDaGlsZDtcbiAgICAgICAgICAgICAgICAvL+mHjeaWsOeUn+aIkOS6uuaVsOmAieaLqeWZqFxuICAgICAgICAgICAgICAgIHZhciBjaGlsZFBlcnNvbkNvdW50SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICRzZWxmLnBhcmVudHMoJy5zZWxlY3QtbWVhbExpc3QnKS5maW5kKCcuc2VsZWN0LW1lYWxJbmZvLWNoZWNrTnVtJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2NoaWxkSW5kZXggaW4gYWN0aXZlQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRQZXJzb25Db3VudEh0bWwgKz0gX2NyZWF0ZVBlcnNvbkNvdW50SHRtbChjaGlsZERhdGFzW2FjdGl2ZUNoaWxkW19jaGlsZEluZGV4XV0sIHByb2R1Y3RPcHRpb25zW2FjdGl2ZUNoaWxkW19jaGlsZEluZGV4XV0ubm93UGVyc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNlbGYucGFyZW50cygnLmJ0bi1zZXQtY2hpbGQnKS5hZnRlcihjaGlsZFBlcnNvbkNvdW50SHRtbCk7XG4gICAgICAgICAgICAgICAgLy/ph43mlrDnlJ/miJBTS1VcbiAgICAgICAgICAgICAgICAkc2VsZi5wYXJlbnRzKCcuc2VsZWN0LW1lYWxMaXN0JykuZmluZCgnLmJ0bi1zZXQtc2t1JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNrdURhdGFzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2NoaWxkSW5kZXggaW4gYWN0aXZlQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkRGF0YXNbYWN0aXZlQ2hpbGRbX2NoaWxkSW5kZXhdXS5QX1NrdSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2t1RGF0YXMgPSBza3VEYXRhcy5jb25jYXQoY2hpbGREYXRhc1thY3RpdmVDaGlsZFtfY2hpbGRJbmRleF1dLlBfU2t1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL+abtOaWsOWtkOS6p+WTgeS7t+agvFxuICAgICAgICAgICAgICAgICAgICBfdXBkYXRlUHJpY2UoYWN0aXZlQ2hpbGRbX2NoaWxkSW5kZXhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkU2t1SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIGNoaWxkU2t1SHRtbCA9IF9jcmVhdGVTa3VIdG1sKHNrdURhdGFzKTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYucGFyZW50cygnLnNlbGVjdC1tZWFsTGlzdCcpLmZpbmQoJy5zZWxlY3QtbWVhbEluZm8tY2hlY2tOdW0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLnBhcmVudHMoJy5zZWxlY3QtbWVhbExpc3QnKS5maW5kKCcuc2VsZWN0LW1lYWxJbmZvLWNoZWNrTnVtJykubGFzdCgpLmFmdGVyKGNoaWxkU2t1SHRtbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYucGFyZW50cygnLmJ0bi1zZXQtY2hpbGQnKS5hZnRlcihjaGlsZFNrdUh0bWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+agh+iusOW3sumAiVNLVVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9jaGlsZEluZGV4IGluIGFjdGl2ZUNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfc2t1c0NoZWNrZWQgPSBwcm9kdWN0T3B0aW9uc1thY3RpdmVDaGlsZFtfY2hpbGRJbmRleF1dLnNrdXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfc2t1c0NoZWNrZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX3NrdUluZGV4IGluIF9za3VzQ2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnBhcmVudHMoJy5zZWxlY3QtbWVhbExpc3QnKS5maW5kKCcuYnRuLXNldC1za3UnKS5maW5kKCdhW2RhdGEtc2lkPVwiJyArIF9za3VzQ2hlY2tlZFtfc2t1SW5kZXhdICsgJ1wiXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omL5Yqo6LCD55So5LqL5Lu25pa55rOVXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oYW5kbGVTa3UodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy/mm7TmlrDniLbku7fmoLxcbiAgICAgICAgICAgICAgICBfdXBkYXRlUHJpY2UocGFyZW50aWQsIHNlbGYpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/ljYfnuqfkvZPpqozku4vnu41cbiAgICAgICAgICAgIHZhciBfaGFuZGxlSW50cm8gPSBmdW5jdGlvbihzZWxmKSB7XG4gICAgICAgICAgICAgICAgdmFyIGludHJvSWQgPSAkKHNlbGYpLnBhcmVudHMoJy5zZWxlY3QtbWVhbExpc3QnKS5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcnNlSW50KGludHJvSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZWxlY3QtbWVhbEluZm8tdGlwTW9kYWwgLmludHJvLXpqeicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0LW1lYWxJbmZvLXRpcE1vZGFsIC5pbnRyby1tYXJyeScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdC1tZWFsSW5mby10aXBNb2RhbCAuaW50cm8tZ3JpZCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0LW1lYWxJbmZvLXRpcE1vZGFsJykuc2hvdygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/mm7TmlrDku7fmoLxcbiAgICAgICAgICAgIHZhciBfdXBkYXRlUHJpY2UgPSBmdW5jdGlvbihwaWQsIHNlbGYpIHtcbiAgICAgICAgICAgICAgICB2YXIgcERhdGEgPSBwcm9kdWN0T3B0aW9uc1twaWRdO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocERhdGEucGFuZWxUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwRGF0YS5jb25maWcuUF9QYXJlbnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9wcm9kdWN0UHJpY2UgPSBwYXJzZUZsb2F0KHBEYXRhLmNvbmZpZy5QX1ByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2FkZFByaWNlID0gKHBEYXRhLm5vd1BlcnNvbiAtIHBhcnNlSW50KHBEYXRhLmNvbmZpZy5QX01pblBlcnNvbikpICogcGFyc2VGbG9hdChwRGF0YS5jb25maWcuUF9BZGRQZXJzb25QcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90b3RhbFByaWNlID0gX3Byb2R1Y3RQcmljZSArIF9hZGRQcmljZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0T3B0aW9uc1twaWRdLnRvdGFsUHJpY2UgPSBfdG90YWxQcmljZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3Byb2R1Y3RQcmljZSA9IHBhcnNlRmxvYXQocERhdGEuY29uZmlnLlBfUHJpY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hZGRQcmljZSA9IChwRGF0YS5ub3dQZXJzb24gLSBwYXJzZUludChwRGF0YS5jb25maWcuUF9NaW5QZXJzb24pKSAqIHBhcnNlRmxvYXQocERhdGEuY29uZmlnLlBfQWRkUGVyc29uUHJpY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9za3VQcmljZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfc2t1SW5kZXggaW4gcERhdGEuc2t1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9za3VQcmljZSArPSBwRGF0YS5za3VQcmljZVtwRGF0YS5za3VzW19za3VJbmRleF1dLlBTX1ByaWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ljrvpmaTkuqflk4HljIXlkKvnmoRTS1Xku7fmoLxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wcm9kdWN0UHJpY2UgLT0gcGFyc2VGbG9hdChwRGF0YS5jb25maWcuUF9QcmljZV9Ta3UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/orqHnrpfmgLvku7dcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdG90YWxQcmljZSA9IF9wcm9kdWN0UHJpY2UgKyBfYWRkUHJpY2UgKyBfc2t1UHJpY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0T3B0aW9uc1twaWRdLnRvdGFsUHJpY2UgPSBfdG90YWxQcmljZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RvdGFsUHJpY2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflj5bmiYDmnInlrZDkuqflk4HmgLvku7dcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jaGlsZEluZGV4IGluIHBEYXRhLmNoaWxkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY2hpbGREYXRhID0gcHJvZHVjdE9wdGlvbnNbcERhdGEuY2hpbGRzW19jaGlsZEluZGV4XV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RvdGFsUHJpY2UgKz0gX2NoaWxkRGF0YS50b3RhbFByaWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v5pu05paw6Z2i5p2/5bCP6K6hXG4gICAgICAgICAgICAgICAgICAgICQoc2VsZikucGFyZW50cygnLnNlbGVjdC1tZWFsTGlzdCcpLmZpbmQoJy5zZWxlY3QtbWVhbExpc3QtdG90YWwnKS5odG1sKCflkIjorqHvvJo8ZW0gY2xhc3M9XCJ1bml0LXN1bVwiPu+/pScgKyBfdG90YWxQcmljZS50b0ZpeGVkKDIpICsgJzwvZW0+Jyk7XG4gICAgICAgICAgICAgICAgICAgIF91cGRhdGVUb3RhbFByaWNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8v6K6h566X5oC75Lu3XG4gICAgICAgICAgICB2YXIgX3VwZGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvL+iuoeeul+aAu+S7t1xuICAgICAgICAgICAgICAgIHZhciBfYWxsUHJvZHVjdFByaWNlID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgX3Byb2R1Y3RDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX29wdGlvbkluZGV4IGluIHByb2R1Y3RPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v6L+H5ruk6Jma5ouf5Lqn5ZOBXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0T3B0aW9uc1tfb3B0aW9uSW5kZXhdLnRvdGFsUHJpY2UgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX2FsbFByb2R1Y3RQcmljZSArPSBwcm9kdWN0T3B0aW9uc1tfb3B0aW9uSW5kZXhdLnRvdGFsUHJpY2U7XG4gICAgICAgICAgICAgICAgICAgIF9wcm9kdWN0Q291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIF9kaXNjb3VudCA9IChfcHJvZHVjdENvdW50IC0gMSkgKiAzMDtcbiAgICAgICAgICAgICAgICB2YXIgX2Rpc2NvdW50SHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChfZGlzY291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF9hbGxQcm9kdWN0UHJpY2UgLT0gX2Rpc2NvdW50O1xuICAgICAgICAgICAgICAgICAgICBfZGlzY291bnRIdG1sID0gJzxiIGNsYXNzPVwibWVhbEluZm8tZGlzY291bnRcIj7vvIjkvJjmg6A677+lJyArIF9kaXNjb3VudC50b0ZpeGVkKDIpICsgJ++8iTwvYj4nO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50VG90YWxEaXNjb3VudCA9IF9kaXNjb3VudC50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRUb3RhbERpc2NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWNjb3VudFRvdGFsUHJpY2UgPSBfYWxsUHJvZHVjdFByaWNlLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgLy/mm7TmlrDmgLvku7fmoLxcbiAgICAgICAgICAgICAgICB2YXIgX2FsbFByaWNlSHRtbCA9ICfmgLvorqE6PGVtPu+/pScgKyBfYWxsUHJvZHVjdFByaWNlLnRvRml4ZWQoMikgKyAnPC9lbT4nICsgX2Rpc2NvdW50SHRtbCArICc8YSBpZD1cImJ0bi1uZXh0XCI+5LiL5LiA5q2lPC9hPic7XG4gICAgICAgICAgICAgICAgJCgnLm1lYWxJbmZvLWJ0bldyYXAnKS5odG1sKF9hbGxQcmljZUh0bWwpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb2R1Y3RPcHRpb25QYW5lbDtcbiAgICAgICAgfSkoKTtcbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0TWVhbEluZm8uanNcbiAqKiBtb2R1bGUgaWQgPSA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");
}, function(module, exports) {
	eval("// 选择档期\n$(function() {\n    // 选择日期\n    $(document).on('pageInit', '#reservation-date', function(e, id, page) {\n        $.showPreloader();\n        arrangeDate('#reservation-date-day'); // 日期排版\n        banTouchmove('#reservation-date'); // 禁止页面滑动\n\n        // 选择选择3个月内日期\n        $('#otherDate').datetimePicker({\n            toolbarTemplate: '<header class=\"bar bar-nav\"> <button class=\"button button-link pull-right\" id=\"get-date\">确定</button> <h1 class=\"title\"></h1> </header>',\n            onOpen: function() {\n                $('.picker-items-col.picker-items-col-divider').remove();\n                $('#get-date').on('click', function() {\n                    var select = $('.picker-selected');\n                    var today = new Date();\n                    var tynum = today.getFullYear();\n                    var tmnum = today.getMonth();\n                    var tdnum = today.getDate();\n                    var ynum = $(select[0]).html();\n                    var mnum = $(select[1]).html();\n                    var dnum = $(select[2]).html();\n                    var maxTs = +new Date(tynum, tmnum + 3, tdnum);\n                    var selectD = +new Date(ynum, mnum - 1, dnum);\n\n                    if (selectD <= maxTs && selectD >= today) {\n                        cookie.set('orderDate', selectD);\n                        setTimeout(function() {\n                            $.router.load('/Index/reservationTime');\n                        }, 500);\n                    } else {\n                        $.toast('请选择之后三个月内的时间哦');\n                    }\n                });\n            }\n        });\n\n\n\n        /**\n         * 点击时间处理事件，获取预约时间，并下跳转到时间选择页面。\n         * @default 设置预约日期的时间戳cookie　\n         */\n        function getOrderDate() {\n            var orderD = $(this).data('date') * 1000;\n            $(this).addClass('active');\n            cookie.set('orderDate', orderD);\n            setTimeout(function() {\n                $.router.load('/Index/reservationTime');\n            }, 50);\n\n        }\n\n\n        /**\n         * 排日期\n         * @param  {'#idname|.classname|...'} selector 选择插入对象选择器\n         * @return {html}          返回日期列表\n         */\n        function arrangeDate(selector) {\n\n            var $reservationDate = $(selector); // 目标容器\n            var monthArr = new Array('一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月');\n            var storeId = cookie.get('storeId');\n            $.showPreloader();\n            $.get(m_module + '/Sapi/getStoreRemain/sid/' + storeId, function(data) {\n                $.hidePreloader();\n                if (data.error === 0) {\n                    var dateK = data.msg;\n                    var dateS = data.msg.remain;\n                    var today = new Date(); // 获取今天的日期, 需联调, 获取服务器时间\n                    var startTime = getInitDate(); // 确定初始日期\n                    var yearnum = startTime.getFullYear();\n                    var monthnum = startTime.getMonth();\n                    var datenum = startTime.getDate();\n                    var dateArr = []; // 展示的35天的时间戳数组\n                    var date_count = 35;\n                    var dateListHtml = '';\n                    var countPlaceHold = cookie.get('countPlaceHold');\n\n\n\n                    // 获得当前时间列表的时间戳数组\n                    for (var i = 0; i < date_count; i++) {\n                        var dateunitHtml, spareHtml, monthHtml, dateHtml;\n                        var thisday = new Date(yearnum, monthnum, datenum + i);\n                        var thisStamp = thisday / 1000;\n                        var nodeStatus = ''; // 节点状态, 不能预约的为off\n                        var monthch = monthArr[thisday.getMonth()]; // 中文月份\n                        var spareCount;\n\n                        if (dateS[thisStamp]) {\n                            spareCount = dateS[thisStamp].count; // 获取余量\n                        } else {\n                            spareCount = 0;\n                        }\n\n                        // 判断是否需要风控\n                        if (!((dateK.couponLimit >= spareCount) && (dateK.needRM === 1))) {\n                            // 判断是否有余量, 若无余量, 则设置off状态\n                            if ((spareCount > 0 && spareCount <= 20 && countPlaceHold <= spareCount)) {\n                                nodeStatus = '';\n                                spareHtml = '<span class=\"reservation-timeNum\">余 ' + spareCount + '</span>';\n                            } else if (spareCount > 20) {\n                                nodeStatus = '';\n                                spareHtml = '<span class=\"reservation-timeNum\"></span>';\n                            } else {\n                                nodeStatus = 'off';\n                                spareHtml = '<span class=\"reservation-timeNum\"></span>';\n                            }\n                        } else {\n                            nodeStatus = 'off';\n                            spareHtml = '<span class=\"reservation-timeNum\"></span>';\n                        }\n                        //判断产品占位\n                        if (countPlaceHold > spareCount) {\n                            nodeStatus = 'off';\n                        }\n\n                        // 判断是否为某月的1号,如果是,则打上红色圆点标记,月份用大写的月份来标识\n                        if ((thisday.getDate() === 1) || (i === 0)) {\n                            monthHtml = '<span class=\"reservation-timeMonth\">' + monthch + '<em class=\"reservation-timeMonthIcon\"></em></span>';\n                        } else {\n                            monthHtml = '<span class=\"reservation-timeMonth\"></span>';\n                        }\n                        // 判断是否为节日\n                        if (showFestival(thisStamp * 1000)) {\n                            monthHtml = '<span class=\"reservation-timeMonth\">' + showFestival(thisStamp * 1000) + '<em class=\"reservation-timeMonthIcon\"></em></span>';\n                        }\n                        // 判断是否为今天之前的日期\n                        if ((+today - 3600000 * 24) > thisday) {\n                            nodeStatus = 'off';\n                        }\n                        // 插入日期\n                        dateHtml = '<span class=\"reservation-timeDate\">' + thisday.getDate() + '</span>';\n\n                        dateunitHtml = '<div data-date = ' + thisStamp + ' class=\"' + nodeStatus + '\"\">' + monthHtml + dateHtml + spareHtml + '</div>';\n\n\n                        dateListHtml += dateunitHtml;\n                    }\n                    $reservationDate.html(dateListHtml);\n                    $('#reservation-date-day div').off('click').on('click', getOrderDate); // 日期绑定点击事件，跳转到时间选择页面\n                    $('#reservation-date-day .off').off('click'); // 禁止之前日期的点击事件\n                } else if (data.error === 401) {\n                    $.toast(data.msg);\n                    setTimeout(function() {\n                        $.router.load('/Index/reservation');\n                    }, 2000);\n                } else {\n                    $.toast(data.msg);\n                }\n            });\n        }\n\n\n        /**\n         * 节日展示\n         */\n        function showFestival(st) {\n            var _date = getFormatDate(st);\n            var _darr = _date.split('-');\n            var _d = _darr[1] + (_darr[2] < 10 ? '0' + _darr[2] : _darr[2]);\n            var festObj = {\n                '0101': '元旦',\n                '0214': '情人节',\n                '0308': '妇女节',\n                '0312': '植树节',\n                '0320': '春分',\n                '0401': '愚人节',\n                '0404': '清明节',\n                '0501': '劳动节',\n                '0504': '青年节',\n                '0601': '儿童节',\n                '0621': '夏至',\n                '0701': '建党节',\n                '0801': '建军节',\n                '0910': '教师节',\n                '0922': '秋分',\n                '1001': '国庆节',\n                '1221': '冬至',\n                '1224': '平安夜',\n                '1225': '圣诞节'\n            };\n            if (festObj[_d]) {\n                return festObj[_d];\n            } else {\n                return;\n            }\n        }\n\n\n        /**\n         * 获得本周第一天的日期\n         * @return {initdate} 初始化日期列表第一天\n         */\n        function getInitDate() {\n            var today = new Date(); // 获得当前日期\n            var todayYearnum = today.getFullYear();\n            var todayMonnum = today.getMonth();\n            var todayDatenum = today.getDate();\n            var todayWeeknum = today.getDay();\n            var initdate = new Date(todayYearnum, todayMonnum, todayDatenum - todayWeeknum);\n            return initdate;\n        }\n\n\n        /**\n         * 时间戳格式转化为 yy-mm-dd\n         * @return {String} 2016-6-23\n         */\n        function getFormatDate(ts) {\n            var date = new Date(ts);\n            var monthnum = date.getMonth();\n            return date.getFullYear() + '-' + ((monthnum + 1) < 10 ? '0' + (monthnum + 1) : +(monthnum + 1)) + '-' + date.getDate();\n        }\n    });\n\n\n\n    // 选择详细拍摄时间\n    $(document).on('pageAnimationStart', '#reservation-timeNode', function(e, id, page) {\n        //初始化操作\n        $('.reservation-dateNum').html('');\n        $('.reservation-timeList').html('');\n        $.closeModal(\".picker-modal.modal-in\");\n    });\n\n\n\n    $(document).on('pageInit', '#reservation-timeNode', function(e, id, page) {\n        $.showPreloader();\n        var storeId = cookie.get('storeId');\n        var today = new Date();\n        var defaultDate = +new Date(today.getFullYear(), today.getMonth(), today.getDate()); // 未选择日期时,设置今天默认\n        var weekArr = new Array('星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六');\n        var $prevdayBtn = $('.reservation-arrowLeft'),\n            $nextdayBtn = $('.reservation-arrowRight'),\n            $nextStepBtn = $('.reservation-timeNodeBtn');\n        var countPlaceHold = cookie.get('countPlaceHold');\n\n        if (!cookie.get('orderDate') || (cookie.get('orderDate') === 'null')) {\n            $.router.load('/Index/reservation');\n        }\n        arrangeTime();\n\n        // 事件绑定\n        $prevdayBtn.on('click', function() {\n            preNextHandle(-1);\n        }); // 左箭头 前一天\n\n        $nextdayBtn.on('click', function() {\n            preNextHandle(1);\n        }); // 右箭头 后一天\n\n\n        /**\n         * 前一天后一天处理事件\n         */\n        function preNextHandle(pon) {\n            var oneDaySt = 24 * 3600 * 1000;\n            var _dst = parseInt(cookie.get('orderDate')) + pon * oneDaySt;\n            var lastDay = new Date(today.getFullYear(), today.getMonth() + 3, today.getDate());\n            if (((pon > 0) && (_dst <= lastDay)) || ((pon < 0) && (_dst > (today - oneDaySt)))) {\n                cookie.set('orderDate', _dst);\n                arrangeTime();\n            } else {\n                $.toast('只能预约今天之后三个月内的时间哦');\n            }\n        }\n\n\n        /**\n         * 时间戳格式转化为 yy-mm-dd\n         * @return {String} 2016-6-23\n         */\n        function getFormatDate(ts) {\n            var date = new Date(ts);\n            var monthnum = date.getMonth();\n            return date.getFullYear() + '-' + ((monthnum + 1) < 10 ? '0' + (monthnum + 1) : +(monthnum + 1)) + '-' + date.getDate();\n        }\n\n\n        /**\n         * 插入时间列表\n         */\n        function arrangeTime() {\n            var dateFormat = getFormatDate(parseInt(cookie.get('orderDate')));\n            var timeListHtml = '';\n            var headDateHtml = '';\n            var $headDateNode = $('.reservation-dateNum');\n            var $timeListNode = $('.reservation-timeList'); // 时间节点目标容器\n            $.get(m_module + '/Sapi/getStoreDayRemain/sid/' + storeId + '/date/' + dateFormat, function(data) {\n                 $.hidePreloader();\n                // 获得时间节点列表\n                if (data.error === 0) {\n                    var dateN = data.msg;\n                    var thisday = new Date(parseInt(cookie.get('orderDate'))); // 当前预约日期\n                    var yearnum = thisday.getFullYear(),\n                        montnum = thisday.getMonth(),\n                        weeknum = thisday.getDay(),\n                        datenum = thisday.getDate();\n                    var weekday = weekArr[weeknum];\n                    var headDateHtml = '';\n                    var totalcount = 0; // 获取当天剩余位置总数\n                    for (var i in dateN.remain) {\n                        totalcount += dateN.remain[i].count;\n                    }\n                    headDateHtml = montnum + 1 + ' 月 ' + datenum + ' 日 ' + '<em>' + weekday + '</em>';\n                    $headDateNode.html(headDateHtml); // 设置头部显示时间\n\n\n                    for (var key in dateN.remain) {\n                        var timeUnitHtml;\n                        if (dateN.remain[key].time) { // 仅当后台有返回时间点时显示\n                            // 增加风控判断\n                            if (!((dateN.couponLimit >= totalcount) && (dateN.needRM === 1))) {\n                                if ((dateN.remain[key].count > 0) && (key * 1000 > +today)) {\n                                    timeUnitHtml = '<a href=\"javascript:;\" data-time=\"' + key + '\" data-count=\"' + dateN.remain[key].count + '\">' + dateN.remain[key].time + '</a>';\n                                } else {\n                                    timeUnitHtml = '<a href=\"javascript:;\" class=\"off\" data-time=\"' + key + '\">' + dateN.remain[key].time + '</a>';\n                                }\n                            } else {\n                                timeUnitHtml = '<a href=\"javascript:;\" class=\"off\" data-time=\"' + key + '\">' + dateN.remain[key].time + '</a>';\n                            }\n                        } else {\n                            continue;\n                        }\n                        timeListHtml += timeUnitHtml;\n                    }\n\n                    $timeListNode.html(timeListHtml); // 插入时间节点\n\n                    //时间占位计算\n                    timePlaceHold(countPlaceHold);\n\n                    // 点击时间节点,获得预约时间,并高亮显示\n                    $('.reservation-timeList a:not(.off)').off('click').on('click', function() {\n                        var orderTime = $(this).data('time') * 1000;\n                        var createTime = +new Date();\n\n                        $('.reservation-timeList a').removeClass('active');\n                        $(this).addClass('active');\n\n                        setTimeout(function() {\n                            cookie.set('orderTime', orderTime); // 设置预约时间, 用cookie传到下一页\n                            cookie.set('createTime', createTime); // 创建订单时间\n                            $.router.load('/Index/settlementInfo');\n                        }, 500);\n                    });\n                } else if (data.error === 401) {\n                    $.toast(data.msg);\n                    setTimeout(function() {\n                        $.router.load('/Index/reservation');\n                    }, 2000);\n                } else if (data.error === 400) {\n                    $.router.load('/Index/login');\n                } else {\n                    $.toast(data.msg);\n                    isSubmit = false;\n                }\n            });\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0U2NoZWR1bGUuanM/NGE3MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDpgInmi6nmoaPmnJ9cbiQoZnVuY3Rpb24oKSB7XG4gICAgLy8g6YCJ5oup5pel5pyfXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNyZXNlcnZhdGlvbi1kYXRlJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgJC5zaG93UHJlbG9hZGVyKCk7XG4gICAgICAgIGFycmFuZ2VEYXRlKCcjcmVzZXJ2YXRpb24tZGF0ZS1kYXknKTsgLy8g5pel5pyf5o6S54mIXG4gICAgICAgIGJhblRvdWNobW92ZSgnI3Jlc2VydmF0aW9uLWRhdGUnKTsgLy8g56aB5q2i6aG16Z2i5ruR5YqoXG5cbiAgICAgICAgLy8g6YCJ5oup6YCJ5oupM+S4quaciOWGheaXpeacn1xuICAgICAgICAkKCcjb3RoZXJEYXRlJykuZGF0ZXRpbWVQaWNrZXIoe1xuICAgICAgICAgICAgdG9vbGJhclRlbXBsYXRlOiAnPGhlYWRlciBjbGFzcz1cImJhciBiYXItbmF2XCI+IDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWxpbmsgcHVsbC1yaWdodFwiIGlkPVwiZ2V0LWRhdGVcIj7noa7lrpo8L2J1dHRvbj4gPGgxIGNsYXNzPVwidGl0bGVcIj48L2gxPiA8L2hlYWRlcj4nLFxuICAgICAgICAgICAgb25PcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcucGlja2VyLWl0ZW1zLWNvbC5waWNrZXItaXRlbXMtY29sLWRpdmlkZXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcjZ2V0LWRhdGUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdCA9ICQoJy5waWNrZXItc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5bnVtID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtbnVtID0gdG9kYXkuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRkbnVtID0gdG9kYXkuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeW51bSA9ICQoc2VsZWN0WzBdKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtbnVtID0gJChzZWxlY3RbMV0pLmh0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRudW0gPSAkKHNlbGVjdFsyXSkuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4VHMgPSArbmV3IERhdGUodHludW0sIHRtbnVtICsgMywgdGRudW0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0RCA9ICtuZXcgRGF0ZSh5bnVtLCBtbnVtIC0gMSwgZG51bSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdEQgPD0gbWF4VHMgJiYgc2VsZWN0RCA+PSB0b2RheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29va2llLnNldCgnb3JkZXJEYXRlJywgc2VsZWN0RCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvblRpbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KCfor7fpgInmi6nkuYvlkI7kuInkuKrmnIjlhoXnmoTml7bpl7Tlk6YnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOeCueWHu+aXtumXtOWkhOeQhuS6i+S7tu+8jOiOt+WPlumihOe6puaXtumXtO+8jOW5tuS4i+i3s+i9rOWIsOaXtumXtOmAieaLqemhtemdouOAglxuICAgICAgICAgKiBAZGVmYXVsdCDorr7nva7pooTnuqbml6XmnJ/nmoTml7bpl7TmiLNjb29raWXjgIBcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yZGVyRGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBvcmRlckQgPSAkKHRoaXMpLmRhdGEoJ2RhdGUnKSAqIDEwMDA7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGNvb2tpZS5zZXQoJ29yZGVyRGF0ZScsIG9yZGVyRCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvblRpbWUnKTtcbiAgICAgICAgICAgIH0sIDUwKTtcblxuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5o6S5pel5pyfXG4gICAgICAgICAqIEBwYXJhbSAgeycjaWRuYW1lfC5jbGFzc25hbWV8Li4uJ30gc2VsZWN0b3Ig6YCJ5oup5o+S5YWl5a+56LGh6YCJ5oup5ZmoXG4gICAgICAgICAqIEByZXR1cm4ge2h0bWx9ICAgICAgICAgIOi/lOWbnuaXpeacn+WIl+ihqFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYXJyYW5nZURhdGUoc2VsZWN0b3IpIHtcblxuICAgICAgICAgICAgdmFyICRyZXNlcnZhdGlvbkRhdGUgPSAkKHNlbGVjdG9yKTsgLy8g55uu5qCH5a655ZmoXG4gICAgICAgICAgICB2YXIgbW9udGhBcnIgPSBuZXcgQXJyYXkoJ+S4gOaciCcsICfkuozmnIgnLCAn5LiJ5pyIJywgJ+Wbm+aciCcsICfkupTmnIgnLCAn5YWt5pyIJywgJ+S4g+aciCcsICflhavmnIgnLCAn5Lmd5pyIJywgJ+WNgeaciCcsICfljYHkuIDmnIgnLCAn5Y2B5LqM5pyIJyk7XG4gICAgICAgICAgICB2YXIgc3RvcmVJZCA9IGNvb2tpZS5nZXQoJ3N0b3JlSWQnKTtcbiAgICAgICAgICAgICQuc2hvd1ByZWxvYWRlcigpO1xuICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL1NhcGkvZ2V0U3RvcmVSZW1haW4vc2lkLycgKyBzdG9yZUlkLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJC5oaWRlUHJlbG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVLID0gZGF0YS5tc2c7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlUyA9IGRhdGEubXNnLnJlbWFpbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsgLy8g6I635Y+W5LuK5aSp55qE5pel5pyfLCDpnIDogZTosIMsIOiOt+WPluacjeWKoeWZqOaXtumXtFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRUaW1lID0gZ2V0SW5pdERhdGUoKTsgLy8g56Gu5a6a5Yid5aeL5pel5pyfXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ZWFybnVtID0gc3RhcnRUaW1lLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb250aG51bSA9IHN0YXJ0VGltZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZW51bSA9IHN0YXJ0VGltZS5nZXREYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlQXJyID0gW107IC8vIOWxleekuueahDM15aSp55qE5pe26Ze05oiz5pWw57uEXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlX2NvdW50ID0gMzU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlTGlzdEh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50UGxhY2VIb2xkID0gY29va2llLmdldCgnY291bnRQbGFjZUhvbGQnKTtcblxuXG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6I635b6X5b2T5YmN5pe26Ze05YiX6KGo55qE5pe26Ze05oiz5pWw57uEXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0ZV9jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZXVuaXRIdG1sLCBzcGFyZUh0bWwsIG1vbnRoSHRtbCwgZGF0ZUh0bWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc2RheSA9IG5ldyBEYXRlKHllYXJudW0sIG1vbnRobnVtLCBkYXRlbnVtICsgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc1N0YW1wID0gdGhpc2RheSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZVN0YXR1cyA9ICcnOyAvLyDoioLngrnnirbmgIEsIOS4jeiDvemihOe6pueahOS4um9mZlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRoY2ggPSBtb250aEFyclt0aGlzZGF5LmdldE1vbnRoKCldOyAvLyDkuK3mlofmnIjku71cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFyZUNvdW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZVNbdGhpc1N0YW1wXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXJlQ291bnQgPSBkYXRlU1t0aGlzU3RhbXBdLmNvdW50OyAvLyDojrflj5bkvZnph49cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmVDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOimgemjjuaOp1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKGRhdGVLLmNvdXBvbkxpbWl0ID49IHNwYXJlQ291bnQpICYmIChkYXRlSy5uZWVkUk0gPT09IDEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuacieS9memHjywg6Iul5peg5L2Z6YePLCDliJnorr7nva5vZmbnirbmgIFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNwYXJlQ291bnQgPiAwICYmIHNwYXJlQ291bnQgPD0gMjAgJiYgY291bnRQbGFjZUhvbGQgPD0gc3BhcmVDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVN0YXR1cyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFyZUh0bWwgPSAnPHNwYW4gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lTnVtXCI+5L2ZICcgKyBzcGFyZUNvdW50ICsgJzwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3BhcmVDb3VudCA+IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGF0dXMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmVIdG1sID0gJzxzcGFuIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU51bVwiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGF0dXMgPSAnb2ZmJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmVIdG1sID0gJzxzcGFuIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU51bVwiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVN0YXR1cyA9ICdvZmYnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXJlSHRtbCA9ICc8c3BhbiBjbGFzcz1cInJlc2VydmF0aW9uLXRpbWVOdW1cIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5Lqn5ZOB5Y2g5L2NXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRQbGFjZUhvbGQgPiBzcGFyZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVN0YXR1cyA9ICdvZmYnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3mmK/lkKbkuLrmn5DmnIjnmoQx5Y+3LOWmguaenOaYryzliJnmiZPkuIrnuqLoibLlnIbngrnmoIforrAs5pyI5Lu955So5aSn5YaZ55qE5pyI5Lu95p2l5qCH6K+GXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXNkYXkuZ2V0RGF0ZSgpID09PSAxKSB8fCAoaSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lTW9udGhcIj4nICsgbW9udGhjaCArICc8ZW0gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lTW9udGhJY29uXCI+PC9lbT48L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhIdG1sID0gJzxzcGFuIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU1vbnRoXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3mmK/lkKbkuLroioLml6VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG93RmVzdGl2YWwodGhpc1N0YW1wICogMTAwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lTW9udGhcIj4nICsgc2hvd0Zlc3RpdmFsKHRoaXNTdGFtcCAqIDEwMDApICsgJzxlbSBjbGFzcz1cInJlc2VydmF0aW9uLXRpbWVNb250aEljb25cIj48L2VtPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5Li65LuK5aSp5LmL5YmN55qE5pel5pyfXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCt0b2RheSAtIDM2MDAwMDAgKiAyNCkgPiB0aGlzZGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVN0YXR1cyA9ICdvZmYnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl5pel5pyfXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlSHRtbCA9ICc8c3BhbiBjbGFzcz1cInJlc2VydmF0aW9uLXRpbWVEYXRlXCI+JyArIHRoaXNkYXkuZ2V0RGF0ZSgpICsgJzwvc3Bhbj4nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRldW5pdEh0bWwgPSAnPGRpdiBkYXRhLWRhdGUgPSAnICsgdGhpc1N0YW1wICsgJyBjbGFzcz1cIicgKyBub2RlU3RhdHVzICsgJ1wiXCI+JyArIG1vbnRoSHRtbCArIGRhdGVIdG1sICsgc3BhcmVIdG1sICsgJzwvZGl2Pic7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUxpc3RIdG1sICs9IGRhdGV1bml0SHRtbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkcmVzZXJ2YXRpb25EYXRlLmh0bWwoZGF0ZUxpc3RIdG1sKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc2VydmF0aW9uLWRhdGUtZGF5IGRpdicpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBnZXRPcmRlckRhdGUpOyAvLyDml6XmnJ/nu5Hlrprngrnlh7vkuovku7bvvIzot7PovazliLDml7bpl7TpgInmi6npobXpnaJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc2VydmF0aW9uLWRhdGUtZGF5IC5vZmYnKS5vZmYoJ2NsaWNrJyk7IC8vIOemgeatouS5i+WJjeaXpeacn+eahOeCueWHu+S6i+S7tlxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvciA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L3Jlc2VydmF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog6IqC5pel5bGV56S6XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzaG93RmVzdGl2YWwoc3QpIHtcbiAgICAgICAgICAgIHZhciBfZGF0ZSA9IGdldEZvcm1hdERhdGUoc3QpO1xuICAgICAgICAgICAgdmFyIF9kYXJyID0gX2RhdGUuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIHZhciBfZCA9IF9kYXJyWzFdICsgKF9kYXJyWzJdIDwgMTAgPyAnMCcgKyBfZGFyclsyXSA6IF9kYXJyWzJdKTtcbiAgICAgICAgICAgIHZhciBmZXN0T2JqID0ge1xuICAgICAgICAgICAgICAgICcwMTAxJzogJ+WFg+aXpicsXG4gICAgICAgICAgICAgICAgJzAyMTQnOiAn5oOF5Lq66IqCJyxcbiAgICAgICAgICAgICAgICAnMDMwOCc6ICflpoflpbPoioInLFxuICAgICAgICAgICAgICAgICcwMzEyJzogJ+akjeagkeiKgicsXG4gICAgICAgICAgICAgICAgJzAzMjAnOiAn5pil5YiGJyxcbiAgICAgICAgICAgICAgICAnMDQwMSc6ICfmhJrkurroioInLFxuICAgICAgICAgICAgICAgICcwNDA0JzogJ+a4heaYjuiKgicsXG4gICAgICAgICAgICAgICAgJzA1MDEnOiAn5Yqz5Yqo6IqCJyxcbiAgICAgICAgICAgICAgICAnMDUwNCc6ICfpnZLlubToioInLFxuICAgICAgICAgICAgICAgICcwNjAxJzogJ+WEv+erpeiKgicsXG4gICAgICAgICAgICAgICAgJzA2MjEnOiAn5aSP6IezJyxcbiAgICAgICAgICAgICAgICAnMDcwMSc6ICflu7rlhZroioInLFxuICAgICAgICAgICAgICAgICcwODAxJzogJ+W7uuWGm+iKgicsXG4gICAgICAgICAgICAgICAgJzA5MTAnOiAn5pWZ5biI6IqCJyxcbiAgICAgICAgICAgICAgICAnMDkyMic6ICfnp4vliIYnLFxuICAgICAgICAgICAgICAgICcxMDAxJzogJ+WbveW6huiKgicsXG4gICAgICAgICAgICAgICAgJzEyMjEnOiAn5Yas6IezJyxcbiAgICAgICAgICAgICAgICAnMTIyNCc6ICflubPlronlpJwnLFxuICAgICAgICAgICAgICAgICcxMjI1JzogJ+Wco+ivnuiKgidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZmVzdE9ialtfZF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVzdE9ialtfZF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+W+l+acrOWRqOesrOS4gOWkqeeahOaXpeacn1xuICAgICAgICAgKiBAcmV0dXJuIHtpbml0ZGF0ZX0g5Yid5aeL5YyW5pel5pyf5YiX6KGo56ys5LiA5aSpXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRJbml0RGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7IC8vIOiOt+W+l+W9k+WJjeaXpeacn1xuICAgICAgICAgICAgdmFyIHRvZGF5WWVhcm51bSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICB2YXIgdG9kYXlNb25udW0gPSB0b2RheS5nZXRNb250aCgpO1xuICAgICAgICAgICAgdmFyIHRvZGF5RGF0ZW51bSA9IHRvZGF5LmdldERhdGUoKTtcbiAgICAgICAgICAgIHZhciB0b2RheVdlZWtudW0gPSB0b2RheS5nZXREYXkoKTtcbiAgICAgICAgICAgIHZhciBpbml0ZGF0ZSA9IG5ldyBEYXRlKHRvZGF5WWVhcm51bSwgdG9kYXlNb25udW0sIHRvZGF5RGF0ZW51bSAtIHRvZGF5V2Vla251bSk7XG4gICAgICAgICAgICByZXR1cm4gaW5pdGRhdGU7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml7bpl7TmiLPmoLzlvI/ovazljJbkuLogeXktbW0tZGRcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSAyMDE2LTYtMjNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEZvcm1hdERhdGUodHMpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodHMpO1xuICAgICAgICAgICAgdmFyIG1vbnRobnVtID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKSArICctJyArICgobW9udGhudW0gKyAxKSA8IDEwID8gJzAnICsgKG1vbnRobnVtICsgMSkgOiArKG1vbnRobnVtICsgMSkpICsgJy0nICsgZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG5cbiAgICAvLyDpgInmi6nor6bnu4bmi43mkYTml7bpl7RcbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUFuaW1hdGlvblN0YXJ0JywgJyNyZXNlcnZhdGlvbi10aW1lTm9kZScsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgIC8v5Yid5aeL5YyW5pON5L2cXG4gICAgICAgICQoJy5yZXNlcnZhdGlvbi1kYXRlTnVtJykuaHRtbCgnJyk7XG4gICAgICAgICQoJy5yZXNlcnZhdGlvbi10aW1lTGlzdCcpLmh0bWwoJycpO1xuICAgICAgICAkLmNsb3NlTW9kYWwoXCIucGlja2VyLW1vZGFsLm1vZGFsLWluXCIpO1xuICAgIH0pO1xuXG5cblxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlSW5pdCcsICcjcmVzZXJ2YXRpb24tdGltZU5vZGUnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAkLnNob3dQcmVsb2FkZXIoKTtcbiAgICAgICAgdmFyIHN0b3JlSWQgPSBjb29raWUuZ2V0KCdzdG9yZUlkJyk7XG4gICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBkZWZhdWx0RGF0ZSA9ICtuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCB0b2RheS5nZXREYXRlKCkpOyAvLyDmnKrpgInmi6nml6XmnJ/ml7Ys6K6+572u5LuK5aSp6buY6K6kXG4gICAgICAgIHZhciB3ZWVrQXJyID0gbmV3IEFycmF5KCfmmJ/mnJ/ml6UnLCAn5pif5pyf5LiAJywgJ+aYn+acn+S6jCcsICfmmJ/mnJ/kuIknLCAn5pif5pyf5ZubJywgJ+aYn+acn+S6lCcsICfmmJ/mnJ/lha0nKTtcbiAgICAgICAgdmFyICRwcmV2ZGF5QnRuID0gJCgnLnJlc2VydmF0aW9uLWFycm93TGVmdCcpLFxuICAgICAgICAgICAgJG5leHRkYXlCdG4gPSAkKCcucmVzZXJ2YXRpb24tYXJyb3dSaWdodCcpLFxuICAgICAgICAgICAgJG5leHRTdGVwQnRuID0gJCgnLnJlc2VydmF0aW9uLXRpbWVOb2RlQnRuJyk7XG4gICAgICAgIHZhciBjb3VudFBsYWNlSG9sZCA9IGNvb2tpZS5nZXQoJ2NvdW50UGxhY2VIb2xkJyk7XG5cbiAgICAgICAgaWYgKCFjb29raWUuZ2V0KCdvcmRlckRhdGUnKSB8fCAoY29va2llLmdldCgnb3JkZXJEYXRlJykgPT09ICdudWxsJykpIHtcbiAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGFycmFuZ2VUaW1lKCk7XG5cbiAgICAgICAgLy8g5LqL5Lu257uR5a6aXG4gICAgICAgICRwcmV2ZGF5QnRuLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcHJlTmV4dEhhbmRsZSgtMSk7XG4gICAgICAgIH0pOyAvLyDlt6bnrq3lpLQg5YmN5LiA5aSpXG5cbiAgICAgICAgJG5leHRkYXlCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwcmVOZXh0SGFuZGxlKDEpO1xuICAgICAgICB9KTsgLy8g5Y+z566t5aS0IOWQjuS4gOWkqVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWJjeS4gOWkqeWQjuS4gOWkqeWkhOeQhuS6i+S7tlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcHJlTmV4dEhhbmRsZShwb24pIHtcbiAgICAgICAgICAgIHZhciBvbmVEYXlTdCA9IDI0ICogMzYwMCAqIDEwMDA7XG4gICAgICAgICAgICB2YXIgX2RzdCA9IHBhcnNlSW50KGNvb2tpZS5nZXQoJ29yZGVyRGF0ZScpKSArIHBvbiAqIG9uZURheVN0O1xuICAgICAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpICsgMywgdG9kYXkuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgIGlmICgoKHBvbiA+IDApICYmIChfZHN0IDw9IGxhc3REYXkpKSB8fCAoKHBvbiA8IDApICYmIChfZHN0ID4gKHRvZGF5IC0gb25lRGF5U3QpKSkpIHtcbiAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdvcmRlckRhdGUnLCBfZHN0KTtcbiAgICAgICAgICAgICAgICBhcnJhbmdlVGltZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLnRvYXN0KCflj6rog73pooTnuqbku4rlpKnkuYvlkI7kuInkuKrmnIjlhoXnmoTml7bpl7Tlk6YnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaXtumXtOaIs+agvOW8j+i9rOWMluS4uiB5eS1tbS1kZFxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IDIwMTYtNi0yM1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZSh0cykge1xuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0cyk7XG4gICAgICAgICAgICB2YXIgbW9udGhudW0gPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpICsgJy0nICsgKChtb250aG51bSArIDEpIDwgMTAgPyAnMCcgKyAobW9udGhudW0gKyAxKSA6ICsobW9udGhudW0gKyAxKSkgKyAnLScgKyBkYXRlLmdldERhdGUoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaPkuWFpeaXtumXtOWIl+ihqFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYXJyYW5nZVRpbWUoKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZUZvcm1hdCA9IGdldEZvcm1hdERhdGUocGFyc2VJbnQoY29va2llLmdldCgnb3JkZXJEYXRlJykpKTtcbiAgICAgICAgICAgIHZhciB0aW1lTGlzdEh0bWwgPSAnJztcbiAgICAgICAgICAgIHZhciBoZWFkRGF0ZUh0bWwgPSAnJztcbiAgICAgICAgICAgIHZhciAkaGVhZERhdGVOb2RlID0gJCgnLnJlc2VydmF0aW9uLWRhdGVOdW0nKTtcbiAgICAgICAgICAgIHZhciAkdGltZUxpc3ROb2RlID0gJCgnLnJlc2VydmF0aW9uLXRpbWVMaXN0Jyk7IC8vIOaXtumXtOiKgueCueebruagh+WuueWZqFxuICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL1NhcGkvZ2V0U3RvcmVEYXlSZW1haW4vc2lkLycgKyBzdG9yZUlkICsgJy9kYXRlLycgKyBkYXRlRm9ybWF0LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICQuaGlkZVByZWxvYWRlcigpO1xuICAgICAgICAgICAgICAgIC8vIOiOt+W+l+aXtumXtOiKgueCueWIl+ihqFxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlTiA9IGRhdGEubXNnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc2RheSA9IG5ldyBEYXRlKHBhcnNlSW50KGNvb2tpZS5nZXQoJ29yZGVyRGF0ZScpKSk7IC8vIOW9k+WJjemihOe6puaXpeacn1xuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhcm51bSA9IHRoaXNkYXkuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRudW0gPSB0aGlzZGF5LmdldE1vbnRoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWVrbnVtID0gdGhpc2RheS5nZXREYXkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVudW0gPSB0aGlzZGF5LmdldERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdlZWtkYXkgPSB3ZWVrQXJyW3dlZWtudW1dO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZERhdGVIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbGNvdW50ID0gMDsgLy8g6I635Y+W5b2T5aSp5Ymp5L2Z5L2N572u5oC75pWwXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0ZU4ucmVtYWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbGNvdW50ICs9IGRhdGVOLnJlbWFpbltpXS5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBoZWFkRGF0ZUh0bWwgPSBtb250bnVtICsgMSArICcg5pyIICcgKyBkYXRlbnVtICsgJyDml6UgJyArICc8ZW0+JyArIHdlZWtkYXkgKyAnPC9lbT4nO1xuICAgICAgICAgICAgICAgICAgICAkaGVhZERhdGVOb2RlLmh0bWwoaGVhZERhdGVIdG1sKTsgLy8g6K6+572u5aS06YOo5pi+56S65pe26Ze0XG5cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0ZU4ucmVtYWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZVVuaXRIdG1sO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVOLnJlbWFpbltrZXldLnRpbWUpIHsgLy8g5LuF5b2T5ZCO5Y+w5pyJ6L+U5Zue5pe26Ze054K55pe25pi+56S6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aKe5Yqg6aOO5o6n5Yik5patXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKGRhdGVOLmNvdXBvbkxpbWl0ID49IHRvdGFsY291bnQpICYmIChkYXRlTi5uZWVkUk0gPT09IDEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGRhdGVOLnJlbWFpbltrZXldLmNvdW50ID4gMCkgJiYgKGtleSAqIDEwMDAgPiArdG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lVW5pdEh0bWwgPSAnPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGRhdGEtdGltZT1cIicgKyBrZXkgKyAnXCIgZGF0YS1jb3VudD1cIicgKyBkYXRlTi5yZW1haW5ba2V5XS5jb3VudCArICdcIj4nICsgZGF0ZU4ucmVtYWluW2tleV0udGltZSArICc8L2E+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVVbml0SHRtbCA9ICc8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJvZmZcIiBkYXRhLXRpbWU9XCInICsga2V5ICsgJ1wiPicgKyBkYXRlTi5yZW1haW5ba2V5XS50aW1lICsgJzwvYT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZVVuaXRIdG1sID0gJzxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cIm9mZlwiIGRhdGEtdGltZT1cIicgKyBrZXkgKyAnXCI+JyArIGRhdGVOLnJlbWFpbltrZXldLnRpbWUgKyAnPC9hPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMaXN0SHRtbCArPSB0aW1lVW5pdEh0bWw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkdGltZUxpc3ROb2RlLmh0bWwodGltZUxpc3RIdG1sKTsgLy8g5o+S5YWl5pe26Ze06IqC54K5XG5cbiAgICAgICAgICAgICAgICAgICAgLy/ml7bpl7TljaDkvY3orqHnrpdcbiAgICAgICAgICAgICAgICAgICAgdGltZVBsYWNlSG9sZChjb3VudFBsYWNlSG9sZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g54K55Ye75pe26Ze06IqC54K5LOiOt+W+l+mihOe6puaXtumXtCzlubbpq5jkuq7mmL7npLpcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlc2VydmF0aW9uLXRpbWVMaXN0IGE6bm90KC5vZmYpJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyVGltZSA9ICQodGhpcykuZGF0YSgndGltZScpICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcmVhdGVUaW1lID0gK25ldyBEYXRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yZXNlcnZhdGlvbi10aW1lTGlzdCBhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llLnNldCgnb3JkZXJUaW1lJywgb3JkZXJUaW1lKTsgLy8g6K6+572u6aKE57qm5pe26Ze0LCDnlKhjb29raWXkvKDliLDkuIvkuIDpobVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdjcmVhdGVUaW1lJywgY3JlYXRlVGltZSk7IC8vIOWIm+W7uuiuouWNleaXtumXtFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9zZXR0bGVtZW50SW5mbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmVycm9yID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcmVzZXJ2YXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgIGlzU3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2VsZWN0U2NoZWR1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
}, function(module, exports) {
	eval("$(function() {\n    // 订单结算页面\n    $(document).on('pageAnimationStart', '#settlement-info', function(e, id, page) {\n        $.closeModal('.modal-in');\n        $('.settlement-infoStore em').html('');\n        $('.settlement-infoTime em').html('');\n        $.showIndicator();\n    });\n\n\n\n    $(document).on('pageInit', '#settlement-info', function(e, id, page) {\n        // 检查是否选择了门店或有订单号\n        if (!cookie.get('storeId') || cookie.get('storeId') === 'null') {\n            $.router.load('/Index/reservation');\n            return false;\n        }\n        var createTime = cookie.get('createTime');\n        checkTimeStatus(createTime);\n        checkInitStatus(); // 检查是否支持微信支付\n        showAccount(); // 订单页面信息展示\n\n        $.hideIndicator();\n        // 重选预约门店\n        $('.settlement-infoStore span').on('click', function() {\n            clearCookie();\n            $.router.load('/Index/reservation');\n        });\n\n        // 重选预约时间\n        $('.settlement-infoTime span').on('click', function() {\n            $.router.load('/Index/reservationDate');\n        });\n\n        // 选择支付方式\n        $('#pay-style input').on('click', function() {\n            $('input:checked').prop('checked', false);\n            $('.payWrap').removeClass('active');\n            $(this).prop('checked', true);\n            $(this).parent().addClass('active');\n        });\n    });\n\n\n\n    $(document).on('beforePageSwitch', '#settlement-info', function(e, id, page) {\n        clearInterval(st);\n    });\n\n\n\n    // 订单再次支付页面\n    $(document).on('pageAnimationStart', '#settlement-again-info', function(e, id, page) {\n        $.closeModal('.modal-in');\n        $('.settlement-infoStore em').html('');\n        $('.settlement-infoTime em').html('');\n        $.showIndicator();\n    });\n\n\n\n    $(document).on('pageInit', '#settlement-again-info', function(e, id, page) {\n\n        checkInitStatus(); // 检查是否支持微信支付\n        getOneAccount(); // 获取订单详情信息\n        $('.settlement-paymentBtn a.btn-disable').off('click');\n\n        // 选择支付方式\n        $('#pay-style input').on('click', function() {\n            $('input:checked').prop('checked', false);\n            $('.payWrap').removeClass('active');\n            $(this).prop('checked', true);\n            $(this).parent().addClass('active');\n        });\n    });\n\n\n\n    $(document).on('beforePageSwitch', '#settlement-again-info', function(e, id, page) {\n        clearInterval(st);\n    });\n\n\n\n    var st; // 定义计时器\n    var couponCodeSelected = '';\n    var isSubmit = false;\n\n\n    /**\n     * 获得订单信息\n     */\n    function getOneAccount() {\n        var aid = cookie.get('aid'); // 获得订单号\n        var data = {};\n        data.aid = aid;\n        $('.settlement-order em').html(aid); // 订单号显示\n        $.showIndicator();\n        $.post(m_module + '/Api/getOneAccount', data, function(response) {\n            $.hideIndicator();\n            if (response.error === 0) {\n                var orderInfo = response.msg;\n                var orderStore = orderInfo.S_Name;\n                var orderTime = getFormatTime(parseInt(orderInfo.A_OrderTime * 1000));\n                var userName = orderInfo.A_Name;\n                var userBirth = getFormatDate(parseInt(orderInfo.A_Birthday * 1000));\n                var userSex = (orderInfo.A_Sex == 1 ? '男' : '女');\n                var productList = orderInfo.A_ProductItem;\n                var money = parseFloat(orderInfo.A_Money);\n                var createTime = parseInt(orderInfo.A_CreateAt * 1000);\n                var productHtml = '';\n\n                for (var i in productList) {\n                    productHtml += '<p>' + productList[i].AI_Product + '</p>';\n                }\n                checkTimeStatus(createTime);\n                clearInterval(st);\n                st = setInterval(showTimers, 1000, createTime); // 支付倒计时\n                // 订单页面信息展示\n                $('.settlement-infoWrap>div').html(productHtml); // 已购买商品列表\n                $('.settlement-infoStore em').html(orderStore); // 门店名\n                $('.settlement-infoTime em').html(orderTime); // 预定时间\n                $('#username').val(userName); // 用户名\n                $('#otherDate').val(orderInfo.A_Birthday ? userBirth : ''); // 生日\n                $('#usersex').val(userSex); // 性别\n                $('.settlement-paymentBtn em').html('￥' + money + '.00'); // 应付金额\n                // 按钮状态改变，当订单关闭时变成重新预约，禁止提交\n                $('.settlement-paymentBtn .btn-able').on('click', function() {\n                    checkTimeStatus(createTime);\n                    if (new Date() - createTime >= 1200 * 1000) {\n                        clearInterval(st);\n                        $.router.load('/Index/reservation');\n                    } else {\n                        getPayAddress(aid); // 接入支付接口\n                    }\n                });\n            } else {\n                $.toast(response.msg);\n            }\n        }, 'json');\n    }\n\n\n    /**\n     * 再次前往支付地址\n     * @param  {[type]} aid 订单号\n     */\n    function getPayAddress(aid) {\n        var data = {};\n        data.aid = aid;\n        // 支付方式\n        if ($('#alipay').is(':checked')) {\n            data.payType = 1;\n        } else {\n            data.payType = 2;\n        }\n        $.showIndicator();\n        // 获取支付地址\n        $.post(m_module + '/Api/getPayAddress', data, function(response) {\n            if (response.error === 0) {\n                $.hideIndicator();\n                window.location.href = response.msg;\n            } else {\n                $.toast(response.msg);\n            }\n        }, 'json');\n    }\n\n\n    /**\n     * 检查是否支持微信支付,如果支持,默认选择微信支付\n     */\n    function checkInitStatus() {\n        $.get(m_module + '/Api/checkWechatPay', function(data) {\n            if (data.error === 0) {\n                $('.weipay').show();\n                $('input:checked').prop('checked', false);\n                $('.payWrap').removeClass('active');\n                $('#weipay').prop('checked', true).parent().addClass('active'); // 默认支付方式-微信\n            } else if (data.error === 403) {\n                $('input:checked').prop('checked', false);\n                $('.payWrap').removeClass('active');\n                $('#alipay').prop('checked', true).parent().addClass('active'); // 默认支付方式-支付宝\n            } else if (data.error === 400) {\n                $.router.load('/Index/login');\n            }\n        });\n    }\n\n\n    /**\n     * 展示订单信息\n     */\n    function showAccount() {\n        var storeName = cookie.get('storeName');\n        var shopInfo = JSON.parse(cookie.get('productNamePkg'));\n        var productList = shopInfo.item;\n        var productHtml = '';\n        var orderDateTs = parseInt(cookie.get('orderTime'));\n        var createTime = cookie.get('createTime');\n        clearInterval(st);\n        st = setInterval(showTimers, 1000, createTime); // 支付倒计时\n\n        // 按钮状态改变，当订单关闭时变成重新预约，禁止提交\n        $('.settlement-paymentBtn a').on('click', function() {\n            checkTimeStatus(createTime);\n            if (new Date() - createTime >= 1200 * 1000) {\n                clearInterval(st);\n                $.router.load('/Index/reservation');\n            } else {\n                window.history.pushState({}, '订单详情', m_module + '/Index/orders');\n                submitAccount();\n            }\n        });\n\n        for (var i in productList) {\n            productHtml += '<p>' + productList[i].name + '<span>￥' + productList[i].price + '</span></p>';\n        }\n        $('#products-list').html(productHtml); // 订单商品详情\n        $('.settlement-infoStore em').html(storeName);\n        $('.settlement-infoTime em').html(getFormatTime(orderDateTs)); // 预约时间\n        $('input:checked').prop('checked', false);\n        $('#weipay').prop('checked', true); // 默认支付方式-支付宝\n\n        //日期插件初始化\n        $('#settlement-info #otherDate').calendar({\n            value: ['1990-01-01'],\n            inputReadOnly: true\n        });\n\n        // 性别选择\n        $('#settlement-info #usersex').picker({\n            inputReadOnly: true,\n            toolbarTemplate: '<header class=\"bar bar-nav\">'+\n                             '<button class=\"button button-link pull-right close-picker\">完成</button>'+\n                             '<h1 class=\"title\">请选择性别</h1>'+\n                             '</header>',\n            cols: [{\n                textAlign: 'center',\n                values: ['男', '女'],\n            }]\n        });\n\n        getUserInfo(); // 展示用户信息\n    }\n\n\n    /**\n     * 根据时间状态检查当前支付状态\n     */\n    function checkTimeStatus(createTime) {\n        $('.settlement-paymentBtn a').removeClass('btn-disabled');\n        $('.settlement-paymentBtn a').addClass('btn-able');\n        if (new Date() - createTime >= 1200 * 1000) {\n            $('#remain-timer').html('订单已关闭,请重新下单<em></em>');\n            $('.settlement-paymentBtn a').html('重新预约');\n        } else {\n            $('.settlement-paymentBtn a').html('去支付');\n        }\n    }\n\n\n    /**\n     * 获得上次的用户信息\n     */\n    function getUserInfo() {\n        $.showIndicator();\n        $.get(m_module + '/Api/getAccountUserInfo', function(data) {\n            var sexArr = ['', '男', '女'];\n            if (data.error === 0) {\n                $.hideIndicator();\n                var userinfo = data.msg;\n                var name = userinfo.U_Name;\n                var sex = sexArr[userinfo.U_Sex];\n                var birth = getFormatDate(userinfo.U_Birth * 1000);\n                var coupon = userinfo.U_CouponCount;\n                var couponsArr = [];\n                var couponsCodeArr = [];\n                var shopInfo = JSON.parse(cookie.get('productNamePkg'));\n                var total = shopInfo.accountTotalPrice;\n                var discount = shopInfo.accountTotalDiscount;\n                var $infoCoupon = $('.settlement-infoCoupon span');\n\n                for (var i = 0; i < coupon.length + 1; i++) {\n                    if (i === 0) {\n                        couponsArr.push('不使用抵价券');\n                        couponsCodeArr.push('');\n                    } else {\n                        couponsArr.push('抵价码:' + coupon[i - 1].C_Code + ' ￥' + coupon[i - 1].C_Money);\n                        couponsCodeArr.push(coupon[i - 1].C_Code);\n                    }\n                }\n                $('#username').val(name);\n                $('#otherDate').val(userinfo.U_Birth ? birth : '');\n                $('#usersex').val(userinfo.U_Sex ? sex : '');\n\n                if (couponsArr.length > 1) {\n                    $infoCoupon.html((couponsArr.length - 1) + ' 张可用<b class=\"icon icon-right\"></b>');\n                    $infoCoupon.picker({\n                        inputReadOnly: true,\n                        toolbarTemplate: '<header class=\"bar bar-nav\">'+\n                             '<button class=\"button button-link pull-right close-picker\">完成</button>'+\n                             '<h1 class=\"title\">请选择抵价券</h1>'+\n                             '</header>',\n                        cols: [{\n                            textAlign: 'center',\n                            values: couponsArr,\n                        }],\n                        onClose: function() {\n                            var $couponSelected = $('.picker-selected');\n                            var $coupons = $('.picker-item');\n                            var couponPrice;\n                            var couponth = $couponSelected.index(); // 返回当前选择的是第几张优惠券\n                            if (couponth === 0) {\n                                couponPrice = 0;\n                                showCalprice(total, discount, couponPrice);\n                                $infoCoupon.html((couponsArr.length - 1) + ' 张可用<b class=\"icon icon-right\"></b>');\n                                couponCodeSelected = '';\n                            } else {\n                                couponPrice = $couponSelected.attr('data-picker-value').split('￥')[1];\n                                showCalprice(total, discount, couponPrice);\n                                $infoCoupon.html('-￥' + parseFloat(couponPrice) + '<b class=\"icon icon-right\"></b>');\n                                couponCodeSelected = couponsCodeArr[couponth];\n                            }\n                        }\n                    });\n                } else {\n                    $infoCoupon.html('无可用');\n                }\n                showCalprice(total, discount, 0);\n            } else if (data.error === 400) {\n                $.hideIndicator();\n                $.router.load('/Index/login');\n            } else {\n                $.toast(data.msg);\n            }\n        });\n    }\n\n\n    /**\n     * 计算对应价格并展示\n     * @param  {[type]} total   套餐选择后获得的总价，已减去组合优惠\n     * @param  {[type]} dicount 组合优惠\n     * @param  {[type]} coupon  抵价券\n     */\n    function showCalprice(total, discount, coupon) {\n        if ((parseFloat(total) - parseFloat(coupon)) <= 0) {\n            $('.settlement-paymentBtn em').html('￥0.01'); // 总计\n            $('.settlement-discount').html('（优惠:￥' + (parseInt(discount) + parseInt(coupon)) + '）'); // 总共优惠\n        } else {\n            $('.settlement-paymentBtn em').html('￥' + (parseFloat(total) - parseFloat(coupon)).toFixed(2)); // 总计\n            $('.settlement-discount').html('（优惠:￥' + (parseFloat(total) - 0.01) + '）'); // 总共优惠\n        }\n        $('.settlement-infoCouponGrounp span').html(parseFloat(discount) > 0 ? '-￥' + parseFloat(discount) + '.00' : '￥' + parseFloat(discount) + '.00'); // 组合优惠\n        $('.settlement-discount').html('（优惠:￥' + (parseInt(discount) + parseInt(coupon)) + '）'); // 总共优惠\n    }\n\n\n    /**\n     * 时间戳格式转化为 yy-mm-dd\n     * @return {String} 2016-6-23\n     */\n    function getFormatDate(ts) {\n        var date = new Date(ts);\n        var monthnum = date.getMonth();\n        var daynum = date.getDate();\n        return date.getFullYear() + '-' + ((monthnum + 1) < 10 ? '0' + (monthnum + 1) : +(monthnum + 1)) + '-' + ((daynum < 10) ? '0' + daynum : daynum);\n    }\n\n\n    /**\n     * 时间戳格式转化为 yy-mm-dd hh:mm\n     * @return {String} 2016-6-23 22:22\n     */\n    function getFormatTime(ts) {\n        var date = new Date(ts);\n        var hournum = date.getHours() + ':';\n        var minnum = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes());\n        var time = getFormatDate(ts) + ' ' + hournum + minnum;\n        return time;\n    }\n\n\n    /**\n     * 支付倒计时\n     */\n    function showTimers(createTime) {\n        var timeRemain = parseInt((1200 - (new Date() - createTime) / 1000));\n        var m = parseInt(timeRemain / 60);\n        var s = parseInt(timeRemain % 60);\n        if (timeRemain < 1) {\n            clearInterval(st);\n            $('#remain-timer').html('订单已关闭,请重新下单<em></em>');\n            $('.settlement-paymentBtn a').html('重新预约');\n            return false;\n        }\n        $('#remain-timer').html('支付剩余时间<em>' + m + ' 分 ' + (s < 10 ? '0' + s : s) + ' 秒</em>');\n    }\n\n\n    /**\n     * 清除cookie, 除了nohintFlag和城市id\n     */\n    function clearCookie() {\n        cookie.remove('orderDate');\n        cookie.remove('orderTime');\n        cookie.remove('createTime');\n        cookie.remove('proSelected');\n        cookie.remove('productNamePkg');\n        cookie.remove('productPkg');\n        cookie.remove('storeId');\n        cookie.remove('storeName');\n        cookie.remove('aid');\n        cookie.remove('pid');\n    }\n\n\n    /**\n     * 提交订单\n     */\n    function submitAccount() {\n        var data = {};\n        data.store = cookie.get('storeId'); // 获取门店\n        data.orderTime = getFormatTime(parseInt(cookie.get('orderTime'))); // 选择预订时间\n        data.product = cookie.get('productPkg'); // 获取所选择的产品\n        data.coupon = couponCodeSelected; //$('.settlement-infoCoupon span').text(); //优惠码\n        data.name = $('#username').val();\n        data.birth = $('#otherDate').val();\n        data.money = $('.settlement-paymentBtn em').html().split('￥')[1];\n        // 支付方式\n        if ($('#alipay').is(':checked')) {\n            data.payType = 1;\n        } else {\n            data.payType = 2;\n        }\n\n        // 性别\n        if ($('#usersex').val() == '男') {\n            data.sex = 1;\n        } else if ($('#usersex').val() == '女') {\n            data.sex = 2;\n        } else {\n            $.toast('请选择性别');\n            return false;\n        }\n\n        if (isSubmit) {\n            $.toast('不要重复提交哦');\n            return false;\n        }\n        isSubmit = true;\n        $.showIndicator();\n        $.ajax({\n            type: 'POST',\n            url: m_module + '/Api/submitAccount',\n            dataType: 'json',\n            data: data,\n            success: function(response) {\n                if (response.error === 0) {\n                    $.hideIndicator();\n                    clearCookie();\n                    $.showIndicator();\n                    setTimeout(function() {\n                        $.hideIndicator();\n                        window.location.href = response.msg;\n                    }, 500);\n                } else if (response.error === 400) {\n                    $.hideIndicator();\n                    $.router.load('/Index/login');\n                } else {\n                    $.hideIndicator();\n                    $.toast(response.msg);\n                    isSubmit = false;\n                }\n            },\n            error: function(xhr, type) {\n                isSubmit = false;\n            }\n        });\n    }\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvc2V0dGxlbWVudEluZm8uanM/Yzg3NyJdLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCkge1xuICAgIC8vIOiuouWNlee7k+eul+mhtemdolxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlQW5pbWF0aW9uU3RhcnQnLCAnI3NldHRsZW1lbnQtaW5mbycsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgICQuY2xvc2VNb2RhbCgnLm1vZGFsLWluJyk7XG4gICAgICAgICQoJy5zZXR0bGVtZW50LWluZm9TdG9yZSBlbScpLmh0bWwoJycpO1xuICAgICAgICAkKCcuc2V0dGxlbWVudC1pbmZvVGltZSBlbScpLmh0bWwoJycpO1xuICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI3NldHRsZW1lbnQtaW5mbycsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgIC8vIOajgOafpeaYr+WQpumAieaLqeS6humXqOW6l+aIluacieiuouWNleWPt1xuICAgICAgICBpZiAoIWNvb2tpZS5nZXQoJ3N0b3JlSWQnKSB8fCBjb29raWUuZ2V0KCdzdG9yZUlkJykgPT09ICdudWxsJykge1xuICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L3Jlc2VydmF0aW9uJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNyZWF0ZVRpbWUgPSBjb29raWUuZ2V0KCdjcmVhdGVUaW1lJyk7XG4gICAgICAgIGNoZWNrVGltZVN0YXR1cyhjcmVhdGVUaW1lKTtcbiAgICAgICAgY2hlY2tJbml0U3RhdHVzKCk7IC8vIOajgOafpeaYr+WQpuaUr+aMgeW+ruS/oeaUr+S7mFxuICAgICAgICBzaG93QWNjb3VudCgpOyAvLyDorqLljZXpobXpnaLkv6Hmga/lsZXnpLpcblxuICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgLy8g6YeN6YCJ6aKE57qm6Zeo5bqXXG4gICAgICAgICQoJy5zZXR0bGVtZW50LWluZm9TdG9yZSBzcGFuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbGVhckNvb2tpZSgpO1xuICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L3Jlc2VydmF0aW9uJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOmHjemAiemihOe6puaXtumXtFxuICAgICAgICAkKCcuc2V0dGxlbWVudC1pbmZvVGltZSBzcGFuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcmVzZXJ2YXRpb25EYXRlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOmAieaLqeaUr+S7mOaWueW8j1xuICAgICAgICAkKCcjcGF5LXN0eWxlIGlucHV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdpbnB1dDpjaGVja2VkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICQoJy5wYXlXcmFwJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cblxuXG4gICAgJChkb2N1bWVudCkub24oJ2JlZm9yZVBhZ2VTd2l0Y2gnLCAnI3NldHRsZW1lbnQtaW5mbycsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc3QpO1xuICAgIH0pO1xuXG5cblxuICAgIC8vIOiuouWNleWGjeasoeaUr+S7mOmhtemdolxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlQW5pbWF0aW9uU3RhcnQnLCAnI3NldHRsZW1lbnQtYWdhaW4taW5mbycsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgICQuY2xvc2VNb2RhbCgnLm1vZGFsLWluJyk7XG4gICAgICAgICQoJy5zZXR0bGVtZW50LWluZm9TdG9yZSBlbScpLmh0bWwoJycpO1xuICAgICAgICAkKCcuc2V0dGxlbWVudC1pbmZvVGltZSBlbScpLmh0bWwoJycpO1xuICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI3NldHRsZW1lbnQtYWdhaW4taW5mbycsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG5cbiAgICAgICAgY2hlY2tJbml0U3RhdHVzKCk7IC8vIOajgOafpeaYr+WQpuaUr+aMgeW+ruS/oeaUr+S7mFxuICAgICAgICBnZXRPbmVBY2NvdW50KCk7IC8vIOiOt+WPluiuouWNleivpuaDheS/oeaBr1xuICAgICAgICAkKCcuc2V0dGxlbWVudC1wYXltZW50QnRuIGEuYnRuLWRpc2FibGUnKS5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgLy8g6YCJ5oup5pSv5LuY5pa55byPXG4gICAgICAgICQoJyNwYXktc3R5bGUgaW5wdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2lucHV0OmNoZWNrZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgJCgnLnBheVdyYXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbignYmVmb3JlUGFnZVN3aXRjaCcsICcjc2V0dGxlbWVudC1hZ2Fpbi1pbmZvJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzdCk7XG4gICAgfSk7XG5cblxuXG4gICAgdmFyIHN0OyAvLyDlrprkuYnorqHml7blmahcbiAgICB2YXIgY291cG9uQ29kZVNlbGVjdGVkID0gJyc7XG4gICAgdmFyIGlzU3VibWl0ID0gZmFsc2U7XG5cblxuICAgIC8qKlxuICAgICAqIOiOt+W+l+iuouWNleS/oeaBr1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE9uZUFjY291bnQoKSB7XG4gICAgICAgIHZhciBhaWQgPSBjb29raWUuZ2V0KCdhaWQnKTsgLy8g6I635b6X6K6i5Y2V5Y+3XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGRhdGEuYWlkID0gYWlkO1xuICAgICAgICAkKCcuc2V0dGxlbWVudC1vcmRlciBlbScpLmh0bWwoYWlkKTsgLy8g6K6i5Y2V5Y+35pi+56S6XG4gICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAkLnBvc3QobV9tb2R1bGUgKyAnL0FwaS9nZXRPbmVBY2NvdW50JywgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yZGVySW5mbyA9IHJlc3BvbnNlLm1zZztcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJTdG9yZSA9IG9yZGVySW5mby5TX05hbWU7XG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyVGltZSA9IGdldEZvcm1hdFRpbWUocGFyc2VJbnQob3JkZXJJbmZvLkFfT3JkZXJUaW1lICogMTAwMCkpO1xuICAgICAgICAgICAgICAgIHZhciB1c2VyTmFtZSA9IG9yZGVySW5mby5BX05hbWU7XG4gICAgICAgICAgICAgICAgdmFyIHVzZXJCaXJ0aCA9IGdldEZvcm1hdERhdGUocGFyc2VJbnQob3JkZXJJbmZvLkFfQmlydGhkYXkgKiAxMDAwKSk7XG4gICAgICAgICAgICAgICAgdmFyIHVzZXJTZXggPSAob3JkZXJJbmZvLkFfU2V4ID09IDEgPyAn55S3JyA6ICflpbMnKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdExpc3QgPSBvcmRlckluZm8uQV9Qcm9kdWN0SXRlbTtcbiAgICAgICAgICAgICAgICB2YXIgbW9uZXkgPSBwYXJzZUZsb2F0KG9yZGVySW5mby5BX01vbmV5KTtcbiAgICAgICAgICAgICAgICB2YXIgY3JlYXRlVGltZSA9IHBhcnNlSW50KG9yZGVySW5mby5BX0NyZWF0ZUF0ICogMTAwMCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RIdG1sID0gJyc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RIdG1sICs9ICc8cD4nICsgcHJvZHVjdExpc3RbaV0uQUlfUHJvZHVjdCArICc8L3A+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hlY2tUaW1lU3RhdHVzKGNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3QpO1xuICAgICAgICAgICAgICAgIHN0ID0gc2V0SW50ZXJ2YWwoc2hvd1RpbWVycywgMTAwMCwgY3JlYXRlVGltZSk7IC8vIOaUr+S7mOWAkuiuoeaXtlxuICAgICAgICAgICAgICAgIC8vIOiuouWNlemhtemdouS/oeaBr+WxleekulxuICAgICAgICAgICAgICAgICQoJy5zZXR0bGVtZW50LWluZm9XcmFwPmRpdicpLmh0bWwocHJvZHVjdEh0bWwpOyAvLyDlt7LotK3kubDllYblk4HliJfooahcbiAgICAgICAgICAgICAgICAkKCcuc2V0dGxlbWVudC1pbmZvU3RvcmUgZW0nKS5odG1sKG9yZGVyU3RvcmUpOyAvLyDpl6jlupflkI1cbiAgICAgICAgICAgICAgICAkKCcuc2V0dGxlbWVudC1pbmZvVGltZSBlbScpLmh0bWwob3JkZXJUaW1lKTsgLy8g6aKE5a6a5pe26Ze0XG4gICAgICAgICAgICAgICAgJCgnI3VzZXJuYW1lJykudmFsKHVzZXJOYW1lKTsgLy8g55So5oi35ZCNXG4gICAgICAgICAgICAgICAgJCgnI290aGVyRGF0ZScpLnZhbChvcmRlckluZm8uQV9CaXJ0aGRheSA/IHVzZXJCaXJ0aCA6ICcnKTsgLy8g55Sf5pelXG4gICAgICAgICAgICAgICAgJCgnI3VzZXJzZXgnKS52YWwodXNlclNleCk7IC8vIOaAp+WIq1xuICAgICAgICAgICAgICAgICQoJy5zZXR0bGVtZW50LXBheW1lbnRCdG4gZW0nKS5odG1sKCfvv6UnICsgbW9uZXkgKyAnLjAwJyk7IC8vIOW6lOS7mOmHkeminVxuICAgICAgICAgICAgICAgIC8vIOaMiemSrueKtuaAgeaUueWPmO+8jOW9k+iuouWNleWFs+mXreaXtuWPmOaIkOmHjeaWsOmihOe6pu+8jOemgeatouaPkOS6pFxuICAgICAgICAgICAgICAgICQoJy5zZXR0bGVtZW50LXBheW1lbnRCdG4gLmJ0bi1hYmxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrVGltZVN0YXR1cyhjcmVhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKCkgLSBjcmVhdGVUaW1lID49IDEyMDAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9yZXNlcnZhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UGF5QWRkcmVzcyhhaWQpOyAvLyDmjqXlhaXmlK/ku5jmjqXlj6NcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLnRvYXN0KHJlc3BvbnNlLm1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sICdqc29uJyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDlho3mrKHliY3lvoDmlK/ku5jlnLDlnYBcbiAgICAgKiBAcGFyYW0gIHtbdHlwZV19IGFpZCDorqLljZXlj7dcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQYXlBZGRyZXNzKGFpZCkge1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBkYXRhLmFpZCA9IGFpZDtcbiAgICAgICAgLy8g5pSv5LuY5pa55byPXG4gICAgICAgIGlmICgkKCcjYWxpcGF5JykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgIGRhdGEucGF5VHlwZSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhLnBheVR5cGUgPSAyO1xuICAgICAgICB9XG4gICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAvLyDojrflj5bmlK/ku5jlnLDlnYBcbiAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvZ2V0UGF5QWRkcmVzcycsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlc3BvbnNlLm1zZztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAnanNvbicpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog5qOA5p+l5piv5ZCm5pSv5oyB5b6u5L+h5pSv5LuYLOWmguaenOaUr+aMgSzpu5jorqTpgInmi6nlvq7kv6HmlK/ku5hcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGVja0luaXRTdGF0dXMoKSB7XG4gICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9BcGkvY2hlY2tXZWNoYXRQYXknLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJy53ZWlwYXknKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXQ6Y2hlY2tlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgJCgnLnBheVdyYXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnI3dlaXBheScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7IC8vIOm7mOiupOaUr+S7mOaWueW8jy3lvq7kv6FcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvciA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXQ6Y2hlY2tlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgJCgnLnBheVdyYXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnI2FsaXBheScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7IC8vIOm7mOiupOaUr+S7mOaWueW8jy3mlK/ku5jlrp1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvciA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog5bGV56S66K6i5Y2V5L+h5oGvXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvd0FjY291bnQoKSB7XG4gICAgICAgIHZhciBzdG9yZU5hbWUgPSBjb29raWUuZ2V0KCdzdG9yZU5hbWUnKTtcbiAgICAgICAgdmFyIHNob3BJbmZvID0gSlNPTi5wYXJzZShjb29raWUuZ2V0KCdwcm9kdWN0TmFtZVBrZycpKTtcbiAgICAgICAgdmFyIHByb2R1Y3RMaXN0ID0gc2hvcEluZm8uaXRlbTtcbiAgICAgICAgdmFyIHByb2R1Y3RIdG1sID0gJyc7XG4gICAgICAgIHZhciBvcmRlckRhdGVUcyA9IHBhcnNlSW50KGNvb2tpZS5nZXQoJ29yZGVyVGltZScpKTtcbiAgICAgICAgdmFyIGNyZWF0ZVRpbWUgPSBjb29raWUuZ2V0KCdjcmVhdGVUaW1lJyk7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc3QpO1xuICAgICAgICBzdCA9IHNldEludGVydmFsKHNob3dUaW1lcnMsIDEwMDAsIGNyZWF0ZVRpbWUpOyAvLyDmlK/ku5jlgJLorqHml7ZcblxuICAgICAgICAvLyDmjInpkq7nirbmgIHmlLnlj5jvvIzlvZPorqLljZXlhbPpl63ml7blj5jmiJDph43mlrDpooTnuqbvvIznpoHmraLmj5DkuqRcbiAgICAgICAgJCgnLnNldHRsZW1lbnQtcGF5bWVudEJ0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjaGVja1RpbWVTdGF0dXMoY3JlYXRlVGltZSk7XG4gICAgICAgICAgICBpZiAobmV3IERhdGUoKSAtIGNyZWF0ZVRpbWUgPj0gMTIwMCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHN0KTtcbiAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvcmVzZXJ2YXRpb24nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCAn6K6i5Y2V6K+m5oOFJywgbV9tb2R1bGUgKyAnL0luZGV4L29yZGVycycpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdEFjY291bnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0TGlzdCkge1xuICAgICAgICAgICAgcHJvZHVjdEh0bWwgKz0gJzxwPicgKyBwcm9kdWN0TGlzdFtpXS5uYW1lICsgJzxzcGFuPu+/pScgKyBwcm9kdWN0TGlzdFtpXS5wcmljZSArICc8L3NwYW4+PC9wPic7XG4gICAgICAgIH1cbiAgICAgICAgJCgnI3Byb2R1Y3RzLWxpc3QnKS5odG1sKHByb2R1Y3RIdG1sKTsgLy8g6K6i5Y2V5ZWG5ZOB6K+m5oOFXG4gICAgICAgICQoJy5zZXR0bGVtZW50LWluZm9TdG9yZSBlbScpLmh0bWwoc3RvcmVOYW1lKTtcbiAgICAgICAgJCgnLnNldHRsZW1lbnQtaW5mb1RpbWUgZW0nKS5odG1sKGdldEZvcm1hdFRpbWUob3JkZXJEYXRlVHMpKTsgLy8g6aKE57qm5pe26Ze0XG4gICAgICAgICQoJ2lucHV0OmNoZWNrZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAkKCcjd2VpcGF5JykucHJvcCgnY2hlY2tlZCcsIHRydWUpOyAvLyDpu5jorqTmlK/ku5jmlrnlvI8t5pSv5LuY5a6dXG5cbiAgICAgICAgLy/ml6XmnJ/mj5Lku7bliJ3lp4vljJZcbiAgICAgICAgJCgnI3NldHRsZW1lbnQtaW5mbyAjb3RoZXJEYXRlJykuY2FsZW5kYXIoe1xuICAgICAgICAgICAgdmFsdWU6IFsnMTk5MC0wMS0wMSddLFxuICAgICAgICAgICAgaW5wdXRSZWFkT25seTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDmgKfliKvpgInmi6lcbiAgICAgICAgJCgnI3NldHRsZW1lbnQtaW5mbyAjdXNlcnNleCcpLnBpY2tlcih7XG4gICAgICAgICAgICBpbnB1dFJlYWRPbmx5OiB0cnVlLFxuICAgICAgICAgICAgdG9vbGJhclRlbXBsYXRlOiAnPGhlYWRlciBjbGFzcz1cImJhciBiYXItbmF2XCI+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWxpbmsgcHVsbC1yaWdodCBjbG9zZS1waWNrZXJcIj7lrozmiJA8L2J1dHRvbj4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGgxIGNsYXNzPVwidGl0bGVcIj7or7fpgInmi6nmgKfliKs8L2gxPicrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2hlYWRlcj4nLFxuICAgICAgICAgICAgY29sczogW3tcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgIHZhbHVlczogWyfnlLcnLCAn5aWzJ10sXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICBnZXRVc2VySW5mbygpOyAvLyDlsZXnpLrnlKjmiLfkv6Hmga9cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOagueaNruaXtumXtOeKtuaAgeajgOafpeW9k+WJjeaUr+S7mOeKtuaAgVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNoZWNrVGltZVN0YXR1cyhjcmVhdGVUaW1lKSB7XG4gICAgICAgICQoJy5zZXR0bGVtZW50LXBheW1lbnRCdG4gYScpLnJlbW92ZUNsYXNzKCdidG4tZGlzYWJsZWQnKTtcbiAgICAgICAgJCgnLnNldHRsZW1lbnQtcGF5bWVudEJ0biBhJykuYWRkQ2xhc3MoJ2J0bi1hYmxlJyk7XG4gICAgICAgIGlmIChuZXcgRGF0ZSgpIC0gY3JlYXRlVGltZSA+PSAxMjAwICogMTAwMCkge1xuICAgICAgICAgICAgJCgnI3JlbWFpbi10aW1lcicpLmh0bWwoJ+iuouWNleW3suWFs+mXrSzor7fph43mlrDkuIvljZU8ZW0+PC9lbT4nKTtcbiAgICAgICAgICAgICQoJy5zZXR0bGVtZW50LXBheW1lbnRCdG4gYScpLmh0bWwoJ+mHjeaWsOmihOe6picpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnNldHRsZW1lbnQtcGF5bWVudEJ0biBhJykuaHRtbCgn5Y675pSv5LuYJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOiOt+W+l+S4iuasoeeahOeUqOaIt+S/oeaBr1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkge1xuICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL0FwaS9nZXRBY2NvdW50VXNlckluZm8nLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB2YXIgc2V4QXJyID0gWycnLCAn55S3JywgJ+WlsyddO1xuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICB2YXIgdXNlcmluZm8gPSBkYXRhLm1zZztcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHVzZXJpbmZvLlVfTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgc2V4ID0gc2V4QXJyW3VzZXJpbmZvLlVfU2V4XTtcbiAgICAgICAgICAgICAgICB2YXIgYmlydGggPSBnZXRGb3JtYXREYXRlKHVzZXJpbmZvLlVfQmlydGggKiAxMDAwKTtcbiAgICAgICAgICAgICAgICB2YXIgY291cG9uID0gdXNlcmluZm8uVV9Db3Vwb25Db3VudDtcbiAgICAgICAgICAgICAgICB2YXIgY291cG9uc0FyciA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjb3Vwb25zQ29kZUFyciA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzaG9wSW5mbyA9IEpTT04ucGFyc2UoY29va2llLmdldCgncHJvZHVjdE5hbWVQa2cnKSk7XG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gc2hvcEluZm8uYWNjb3VudFRvdGFsUHJpY2U7XG4gICAgICAgICAgICAgICAgdmFyIGRpc2NvdW50ID0gc2hvcEluZm8uYWNjb3VudFRvdGFsRGlzY291bnQ7XG4gICAgICAgICAgICAgICAgdmFyICRpbmZvQ291cG9uID0gJCgnLnNldHRsZW1lbnQtaW5mb0NvdXBvbiBzcGFuJyk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdXBvbi5sZW5ndGggKyAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdXBvbnNBcnIucHVzaCgn5LiN5L2/55So5oq15Lu35Yi4Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25zQ29kZUFyci5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdXBvbnNBcnIucHVzaCgn5oq15Lu356CBOicgKyBjb3Vwb25baSAtIDFdLkNfQ29kZSArICcg77+lJyArIGNvdXBvbltpIC0gMV0uQ19Nb25leSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25zQ29kZUFyci5wdXNoKGNvdXBvbltpIC0gMV0uQ19Db2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcjdXNlcm5hbWUnKS52YWwobmFtZSk7XG4gICAgICAgICAgICAgICAgJCgnI290aGVyRGF0ZScpLnZhbCh1c2VyaW5mby5VX0JpcnRoID8gYmlydGggOiAnJyk7XG4gICAgICAgICAgICAgICAgJCgnI3VzZXJzZXgnKS52YWwodXNlcmluZm8uVV9TZXggPyBzZXggOiAnJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY291cG9uc0Fyci5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICRpbmZvQ291cG9uLmh0bWwoKGNvdXBvbnNBcnIubGVuZ3RoIC0gMSkgKyAnIOW8oOWPr+eUqDxiIGNsYXNzPVwiaWNvbiBpY29uLXJpZ2h0XCI+PC9iPicpO1xuICAgICAgICAgICAgICAgICAgICAkaW5mb0NvdXBvbi5waWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRSZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJUZW1wbGF0ZTogJzxoZWFkZXIgY2xhc3M9XCJiYXIgYmFyLW5hdlwiPicrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi1saW5rIHB1bGwtcmlnaHQgY2xvc2UtcGlja2VyXCI+5a6M5oiQPC9idXR0b24+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxoMSBjbGFzcz1cInRpdGxlXCI+6K+36YCJ5oup5oq15Lu35Yi4PC9oMT4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9oZWFkZXI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGNvdXBvbnNBcnIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY291cG9uU2VsZWN0ZWQgPSAkKCcucGlja2VyLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjb3Vwb25zID0gJCgnLnBpY2tlci1pdGVtJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXBvblByaWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3Vwb250aCA9ICRjb3Vwb25TZWxlY3RlZC5pbmRleCgpOyAvLyDov5Tlm57lvZPliY3pgInmi6nnmoTmmK/nrKzlh6DlvKDkvJjmg6DliLhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291cG9udGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291cG9uUHJpY2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FscHJpY2UodG90YWwsIGRpc2NvdW50LCBjb3Vwb25QcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbmZvQ291cG9uLmh0bWwoKGNvdXBvbnNBcnIubGVuZ3RoIC0gMSkgKyAnIOW8oOWPr+eUqDxiIGNsYXNzPVwiaWNvbiBpY29uLXJpZ2h0XCI+PC9iPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25Db2RlU2VsZWN0ZWQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25QcmljZSA9ICRjb3Vwb25TZWxlY3RlZC5hdHRyKCdkYXRhLXBpY2tlci12YWx1ZScpLnNwbGl0KCfvv6UnKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbHByaWNlKHRvdGFsLCBkaXNjb3VudCwgY291cG9uUHJpY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5mb0NvdXBvbi5odG1sKCct77+lJyArIHBhcnNlRmxvYXQoY291cG9uUHJpY2UpICsgJzxiIGNsYXNzPVwiaWNvbiBpY29uLXJpZ2h0XCI+PC9iPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25Db2RlU2VsZWN0ZWQgPSBjb3Vwb25zQ29kZUFycltjb3Vwb250aF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkaW5mb0NvdXBvbi5odG1sKCfml6Dlj6/nlKgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hvd0NhbHByaWNlKHRvdGFsLCBkaXNjb3VudCwgMCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9sb2dpbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLnRvYXN0KGRhdGEubXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDorqHnrpflr7nlupTku7fmoLzlubblsZXnpLpcbiAgICAgKiBAcGFyYW0gIHtbdHlwZV19IHRvdGFsICAg5aWX6aSQ6YCJ5oup5ZCO6I635b6X55qE5oC75Lu377yM5bey5YeP5Y6757uE5ZCI5LyY5oOgXG4gICAgICogQHBhcmFtICB7W3R5cGVdfSBkaWNvdW50IOe7hOWQiOS8mOaDoFxuICAgICAqIEBwYXJhbSAge1t0eXBlXX0gY291cG9uICDmirXku7fliLhcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaG93Q2FscHJpY2UodG90YWwsIGRpc2NvdW50LCBjb3Vwb24pIHtcbiAgICAgICAgaWYgKChwYXJzZUZsb2F0KHRvdGFsKSAtIHBhcnNlRmxvYXQoY291cG9uKSkgPD0gMCkge1xuICAgICAgICAgICAgJCgnLnNldHRsZW1lbnQtcGF5bWVudEJ0biBlbScpLmh0bWwoJ++/pTAuMDEnKTsgLy8g5oC76K6hXG4gICAgICAgICAgICAkKCcuc2V0dGxlbWVudC1kaXNjb3VudCcpLmh0bWwoJ++8iOS8mOaDoDrvv6UnICsgKHBhcnNlSW50KGRpc2NvdW50KSArIHBhcnNlSW50KGNvdXBvbikpICsgJ++8iScpOyAvLyDmgLvlhbHkvJjmg6BcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5zZXR0bGVtZW50LXBheW1lbnRCdG4gZW0nKS5odG1sKCfvv6UnICsgKHBhcnNlRmxvYXQodG90YWwpIC0gcGFyc2VGbG9hdChjb3Vwb24pKS50b0ZpeGVkKDIpKTsgLy8g5oC76K6hXG4gICAgICAgICAgICAkKCcuc2V0dGxlbWVudC1kaXNjb3VudCcpLmh0bWwoJ++8iOS8mOaDoDrvv6UnICsgKHBhcnNlRmxvYXQodG90YWwpIC0gMC4wMSkgKyAn77yJJyk7IC8vIOaAu+WFseS8mOaDoFxuICAgICAgICB9XG4gICAgICAgICQoJy5zZXR0bGVtZW50LWluZm9Db3Vwb25Hcm91bnAgc3BhbicpLmh0bWwocGFyc2VGbG9hdChkaXNjb3VudCkgPiAwID8gJy3vv6UnICsgcGFyc2VGbG9hdChkaXNjb3VudCkgKyAnLjAwJyA6ICfvv6UnICsgcGFyc2VGbG9hdChkaXNjb3VudCkgKyAnLjAwJyk7IC8vIOe7hOWQiOS8mOaDoFxuICAgICAgICAkKCcuc2V0dGxlbWVudC1kaXNjb3VudCcpLmh0bWwoJ++8iOS8mOaDoDrvv6UnICsgKHBhcnNlSW50KGRpc2NvdW50KSArIHBhcnNlSW50KGNvdXBvbikpICsgJ++8iScpOyAvLyDmgLvlhbHkvJjmg6BcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOaXtumXtOaIs+agvOW8j+i9rOWMluS4uiB5eS1tbS1kZFxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gMjAxNi02LTIzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZSh0cykge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRzKTtcbiAgICAgICAgdmFyIG1vbnRobnVtID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB2YXIgZGF5bnVtID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCkgKyAnLScgKyAoKG1vbnRobnVtICsgMSkgPCAxMCA/ICcwJyArIChtb250aG51bSArIDEpIDogKyhtb250aG51bSArIDEpKSArICctJyArICgoZGF5bnVtIDwgMTApID8gJzAnICsgZGF5bnVtIDogZGF5bnVtKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOaXtumXtOaIs+agvOW8j+i9rOWMluS4uiB5eS1tbS1kZCBoaDptbVxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gMjAxNi02LTIzIDIyOjIyXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Rm9ybWF0VGltZSh0cykge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRzKTtcbiAgICAgICAgdmFyIGhvdXJudW0gPSBkYXRlLmdldEhvdXJzKCkgKyAnOic7XG4gICAgICAgIHZhciBtaW5udW0gPSAoZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICB2YXIgdGltZSA9IGdldEZvcm1hdERhdGUodHMpICsgJyAnICsgaG91cm51bSArIG1pbm51bTtcbiAgICAgICAgcmV0dXJuIHRpbWU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDmlK/ku5jlgJLorqHml7ZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaG93VGltZXJzKGNyZWF0ZVRpbWUpIHtcbiAgICAgICAgdmFyIHRpbWVSZW1haW4gPSBwYXJzZUludCgoMTIwMCAtIChuZXcgRGF0ZSgpIC0gY3JlYXRlVGltZSkgLyAxMDAwKSk7XG4gICAgICAgIHZhciBtID0gcGFyc2VJbnQodGltZVJlbWFpbiAvIDYwKTtcbiAgICAgICAgdmFyIHMgPSBwYXJzZUludCh0aW1lUmVtYWluICUgNjApO1xuICAgICAgICBpZiAodGltZVJlbWFpbiA8IDEpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3QpO1xuICAgICAgICAgICAgJCgnI3JlbWFpbi10aW1lcicpLmh0bWwoJ+iuouWNleW3suWFs+mXrSzor7fph43mlrDkuIvljZU8ZW0+PC9lbT4nKTtcbiAgICAgICAgICAgICQoJy5zZXR0bGVtZW50LXBheW1lbnRCdG4gYScpLmh0bWwoJ+mHjeaWsOmihOe6picpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICQoJyNyZW1haW4tdGltZXInKS5odG1sKCfmlK/ku5jliankvZnml7bpl7Q8ZW0+JyArIG0gKyAnIOWIhiAnICsgKHMgPCAxMCA/ICcwJyArIHMgOiBzKSArICcg56eSPC9lbT4nKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOa4hemZpGNvb2tpZSwg6Zmk5LqGbm9oaW50RmxhZ+WSjOWfjuW4gmlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xlYXJDb29raWUoKSB7XG4gICAgICAgIGNvb2tpZS5yZW1vdmUoJ29yZGVyRGF0ZScpO1xuICAgICAgICBjb29raWUucmVtb3ZlKCdvcmRlclRpbWUnKTtcbiAgICAgICAgY29va2llLnJlbW92ZSgnY3JlYXRlVGltZScpO1xuICAgICAgICBjb29raWUucmVtb3ZlKCdwcm9TZWxlY3RlZCcpO1xuICAgICAgICBjb29raWUucmVtb3ZlKCdwcm9kdWN0TmFtZVBrZycpO1xuICAgICAgICBjb29raWUucmVtb3ZlKCdwcm9kdWN0UGtnJyk7XG4gICAgICAgIGNvb2tpZS5yZW1vdmUoJ3N0b3JlSWQnKTtcbiAgICAgICAgY29va2llLnJlbW92ZSgnc3RvcmVOYW1lJyk7XG4gICAgICAgIGNvb2tpZS5yZW1vdmUoJ2FpZCcpO1xuICAgICAgICBjb29raWUucmVtb3ZlKCdwaWQnKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOaPkOS6pOiuouWNlVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN1Ym1pdEFjY291bnQoKSB7XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGRhdGEuc3RvcmUgPSBjb29raWUuZ2V0KCdzdG9yZUlkJyk7IC8vIOiOt+WPlumXqOW6l1xuICAgICAgICBkYXRhLm9yZGVyVGltZSA9IGdldEZvcm1hdFRpbWUocGFyc2VJbnQoY29va2llLmdldCgnb3JkZXJUaW1lJykpKTsgLy8g6YCJ5oup6aKE6K6i5pe26Ze0XG4gICAgICAgIGRhdGEucHJvZHVjdCA9IGNvb2tpZS5nZXQoJ3Byb2R1Y3RQa2cnKTsgLy8g6I635Y+W5omA6YCJ5oup55qE5Lqn5ZOBXG4gICAgICAgIGRhdGEuY291cG9uID0gY291cG9uQ29kZVNlbGVjdGVkOyAvLyQoJy5zZXR0bGVtZW50LWluZm9Db3Vwb24gc3BhbicpLnRleHQoKTsgLy/kvJjmg6DnoIFcbiAgICAgICAgZGF0YS5uYW1lID0gJCgnI3VzZXJuYW1lJykudmFsKCk7XG4gICAgICAgIGRhdGEuYmlydGggPSAkKCcjb3RoZXJEYXRlJykudmFsKCk7XG4gICAgICAgIGRhdGEubW9uZXkgPSAkKCcuc2V0dGxlbWVudC1wYXltZW50QnRuIGVtJykuaHRtbCgpLnNwbGl0KCfvv6UnKVsxXTtcbiAgICAgICAgLy8g5pSv5LuY5pa55byPXG4gICAgICAgIGlmICgkKCcjYWxpcGF5JykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgIGRhdGEucGF5VHlwZSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhLnBheVR5cGUgPSAyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5oCn5YirXG4gICAgICAgIGlmICgkKCcjdXNlcnNleCcpLnZhbCgpID09ICfnlLcnKSB7XG4gICAgICAgICAgICBkYXRhLnNleCA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAoJCgnI3VzZXJzZXgnKS52YWwoKSA9PSAn5aWzJykge1xuICAgICAgICAgICAgZGF0YS5zZXggPSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJC50b2FzdCgn6K+36YCJ5oup5oCn5YirJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNTdWJtaXQpIHtcbiAgICAgICAgICAgICQudG9hc3QoJ+S4jeimgemHjeWkjeaPkOS6pOWTpicpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlzU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IG1fbW9kdWxlICsgJy9BcGkvc3VibWl0QWNjb3VudCcsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhckNvb2tpZSgpO1xuICAgICAgICAgICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZXNwb25zZS5tc2c7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBpc1N1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgaXNTdWJtaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9qcy9zZXR0bGVtZW50SW5mby5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");
}, function(module, exports) {
	eval("$(function() {\n    // 付款结果页面\n    $(document).on('pageInit', '#payment', function(e, id, page) {\n        var payurl = window.location.href;\n        var aid = payurl.split('aid/')[1];\n        var data = {};\n        data.aid = aid;\n        $.showIndicator();\n        $.post(m_module + '/Api/getPaymentAccount', data, function(res) {\n            $.hideIndicator();\n            if (res.error === 0) {\n                var _order = res.msg;\n                var _ordertime = getFormatTime(parseInt(_order.A_OrderTime * 1000));\n                $('.paytotal').html(_order.A_Money); // 支付金额\n                $('.payment-successStore').html(_order.S_Name); // 门店名称\n                $('.payment-successTime').html(_ordertime); // 预约拍摄时间\n                $('.successCode-wrap img').attr('src', _order.QrImgPath); // 二维码\n            } else if (res.error === 400) {\n                $.router.load('/Index/login');\n            } else {\n                $.toast(res.msg);\n            }\n        });\n        $('a').on('click', function() {\n            $(this).toggleClass('active');\n        });\n\n        /**\n         * 时间戳格式转化为 yy-mm-dd\n         * @return {String} 2016-6-23\n         */\n        function getFormatDate(ts) {\n            var date = new Date(ts);\n            var monthnum = date.getMonth();\n            return date.getFullYear() + '-' + ((monthnum + 1) < 10 ? '0' + (monthnum + 1) : +(monthnum + 1)) + '-' + date.getDate();\n        }\n\n\n        /**\n         * 时间戳格式转化为 yy-mm-dd hh:mm\n         * @return {String} 2016-6-23 22:22\n         */\n        function getFormatTime(ts) {\n            var date = new Date(ts);\n            var hournum = date.getHours() + ':';\n            var minnum = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes());\n            var time = getFormatDate(ts) + ' ' + hournum + minnum;\n            return time;\n        }\n    });\n\n\n\n    // 付款失败页面\n    $(document).on('pageInit', '#payment-fail', function(e, id, page) {\n        $('.payment-cancelList a').on('click', function() {\n            $(this).toggleClass('active');\n        });\n    });\n\n\n\n    // 付款失败页面\n    $(document).on('pageAnimationStart', '#bindAccount', function(e, id, page) {\n        $.showIndicator();\n    });\n\n\n\n    // 二维码绑定页面\n    $(document).on('pageInit', '#bindAccount', function(e, id, page) {\n        $.hideIndicator();\n        $('.bind-success').hide();\n        $('.bind-fail').hide();\n        $('.bind-tipTextInfo').hide();\n\n        var bindurl = window.location.href;\n        var aid = bindurl.split('aid/')[1];\n        var data = {};\n        data.aid = aid;\n        $.post(m_module + '/Api/bindAccount', data, function(response) {\n            $('.bind-loading').hide();\n            if (response.error === 0) {\n                $('.bind-success').show();\n                $('.bind-tipTextInfo').show();\n            } else if (response.error === 400) {\n                $.router.load('/Index/login');\n            } else {\n                $('.bind-fail').show();\n                $('.bind-tipTextInfo').show();\n                $('.bind-tipText').html(response.msg);\n            }\n        });\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvcGF5bWVudC5qcz84YjdlIl0sInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG4gICAgLy8g5LuY5qy+57uT5p6c6aG16Z2iXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNwYXltZW50JywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIHBheXVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgICB2YXIgYWlkID0gcGF5dXJsLnNwbGl0KCdhaWQvJylbMV07XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGRhdGEuYWlkID0gYWlkO1xuICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvZ2V0UGF5bWVudEFjY291bnQnLCBkYXRhLCBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgaWYgKHJlcy5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBfb3JkZXIgPSByZXMubXNnO1xuICAgICAgICAgICAgICAgIHZhciBfb3JkZXJ0aW1lID0gZ2V0Rm9ybWF0VGltZShwYXJzZUludChfb3JkZXIuQV9PcmRlclRpbWUgKiAxMDAwKSk7XG4gICAgICAgICAgICAgICAgJCgnLnBheXRvdGFsJykuaHRtbChfb3JkZXIuQV9Nb25leSk7IC8vIOaUr+S7mOmHkeminVxuICAgICAgICAgICAgICAgICQoJy5wYXltZW50LXN1Y2Nlc3NTdG9yZScpLmh0bWwoX29yZGVyLlNfTmFtZSk7IC8vIOmXqOW6l+WQjeensFxuICAgICAgICAgICAgICAgICQoJy5wYXltZW50LXN1Y2Nlc3NUaW1lJykuaHRtbChfb3JkZXJ0aW1lKTsgLy8g6aKE57qm5ouN5pGE5pe26Ze0XG4gICAgICAgICAgICAgICAgJCgnLnN1Y2Nlc3NDb2RlLXdyYXAgaW1nJykuYXR0cignc3JjJywgX29yZGVyLlFySW1nUGF0aCk7IC8vIOS6jOe7tOeggVxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9sb2dpbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLnRvYXN0KHJlcy5tc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJCgnYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml7bpl7TmiLPmoLzlvI/ovazljJbkuLogeXktbW0tZGRcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSAyMDE2LTYtMjNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEZvcm1hdERhdGUodHMpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodHMpO1xuICAgICAgICAgICAgdmFyIG1vbnRobnVtID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKSArICctJyArICgobW9udGhudW0gKyAxKSA8IDEwID8gJzAnICsgKG1vbnRobnVtICsgMSkgOiArKG1vbnRobnVtICsgMSkpICsgJy0nICsgZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml7bpl7TmiLPmoLzlvI/ovazljJbkuLogeXktbW0tZGQgaGg6bW1cbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSAyMDE2LTYtMjMgMjI6MjJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEZvcm1hdFRpbWUodHMpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodHMpO1xuICAgICAgICAgICAgdmFyIGhvdXJudW0gPSBkYXRlLmdldEhvdXJzKCkgKyAnOic7XG4gICAgICAgICAgICB2YXIgbWlubnVtID0gKGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICAgIHZhciB0aW1lID0gZ2V0Rm9ybWF0RGF0ZSh0cykgKyAnICcgKyBob3VybnVtICsgbWlubnVtO1xuICAgICAgICAgICAgcmV0dXJuIHRpbWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG5cbiAgICAvLyDku5jmrL7lpLHotKXpobXpnaJcbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI3BheW1lbnQtZmFpbCcsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgICQoJy5wYXltZW50LWNhbmNlbExpc3QgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5cblxuICAgIC8vIOS7mOasvuWksei0pemhtemdolxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlQW5pbWF0aW9uU3RhcnQnLCAnI2JpbmRBY2NvdW50JywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgfSk7XG5cblxuXG4gICAgLy8g5LqM57u056CB57uR5a6a6aG16Z2iXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNiaW5kQWNjb3VudCcsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAkKCcuYmluZC1zdWNjZXNzJykuaGlkZSgpO1xuICAgICAgICAkKCcuYmluZC1mYWlsJykuaGlkZSgpO1xuICAgICAgICAkKCcuYmluZC10aXBUZXh0SW5mbycpLmhpZGUoKTtcblxuICAgICAgICB2YXIgYmluZHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgICB2YXIgYWlkID0gYmluZHVybC5zcGxpdCgnYWlkLycpWzFdO1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBkYXRhLmFpZCA9IGFpZDtcbiAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvYmluZEFjY291bnQnLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgJCgnLmJpbmQtbG9hZGluZycpLmhpZGUoKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJy5iaW5kLXN1Y2Nlc3MnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnLmJpbmQtdGlwVGV4dEluZm8nKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmJpbmQtZmFpbCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcuYmluZC10aXBUZXh0SW5mbycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcuYmluZC10aXBUZXh0JykuaHRtbChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvcGF5bWVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=")
}, function(module, exports) {
	eval("// 订单模块页面js　\n$(function() {\n    // 订单首页\n    $(document).on('pageInit', '#orders', function(e, id, page) {\n        $.showIndicator();\n\n        $.get(m_module + '/Api/getUserAccount', function(data) {\n            $.hideIndicator();\n            if (data.error === 0) {\n                $('.content').addClass('none'); // 无订单或者没有加载到本地时显示的背景\n                var orders = data.msg;\n                var ordersHtml = '';\n                var ordersHtmlf = '';\n                var ordersHtmluf = '';\n                var ordersUnitHtml = '';\n                var states = {\n                    '-1': '已关闭',\n                    '1': '未付款',\n                    '2': '等待拍摄',\n                    '3': '当日拍摄',\n                    '4': '完成'\n                };\n                for (var i in orders) {\n                    var ordersNumberHtml = '';\n                    var ordersStoreHtml = '';\n                    var ordersCellHtml = '';\n                    var ordersInfoHtml = '';\n                    var orderPayHtml = '';\n                    var btnHtml = '';\n                    var btnWrapHtml = '';\n                    var btnStatusHtml = '';\n                    var ts = parseInt((+new Date() - orders[i].A_CreateAt * 1000) / 1000);\n\n                    // 订单号及订单状态\n                    ordersNumberHtml = '<p class=\"orders-number\">订单号：<em>' +\n                        orders[i].A_Id + '</em> <span>' +\n                        ((ts > 1200 && orders[i].A_State == 1) ? '已超时' : states[orders[i].A_State]) + '</span></p>';\n                    // 门店和时间信息\n                    ordersStoreHtml = '<div class=\"order-store\"><p>拍摄门店：<em>' +\n                        orders[i].S_Name + '</em></p><p>预约时间：<em>' +\n                        orders[i].A_OrderTime.split(' ')[0] + '<b>' +\n                        orders[i].A_OrderTime.split(' ')[1] + '</b></em></p><p><a href=\"tel:' +\n                        orders[i].S_Phone + '\">门店号码：<b>' +\n                        orders[i].S_Phone + '</b></a></p></div>';\n\n                    // 商品列表\n                    for (var j in orders[i].A_Items) {\n                        ordersCellHtml += '<p data-count=\"' + orders[i].A_Items[j].AI_Count + '\">' + orders[i].A_Items[j].AI_Product + '<span></span></p>';\n                    }\n                    ordersInfoHtml = '<div class=\"orders-infoWrap\"><p>拍摄内容:</p>' + ordersCellHtml + '</div>';\n\n                    if (orders[i].A_State == '2') {\n                        if (orders[i].A_ModifyCount == '2') {\n                            btnStatusHtml = '<a href=\"javascript:;\" class=\"order-checkDate off\">重选档期</a>';\n                        } else {\n                            btnStatusHtml = '<a href=\"javascript:;\" class=\"order-checkDate active\">重选档期</a>';\n                        }\n                    }\n\n                    // 根据不同的订单状态显示不同的按钮\n                    switch (orders[i].A_State) {\n                        case '-1':\n                            btnHtml = '<a href=\"javascript:;\">已关闭</a>';\n                            break;\n                        case '1':\n                            btnHtml = (ts < 1200 ? '<a href=\"/Index/shootInfo\">拍摄建议</a><a href=\"javascript:;\" class=\"order-paymentBtn\">去付款</a>' : '<a href=\"/Index/shootInfo\">拍摄建议</a>');\n                            break;\n                        case '2':\n                            btnHtml = '<a href=\"/Index/shootInfo\">拍摄建议</a>' + btnStatusHtml + '';\n                            break;\n                        case '3':\n                            btnHtml = '<a href=\"/Index/shootInfo\">拍摄建议</a>';\n                            break;\n                        case '4':\n                            btnHtml = '<a href=\"javascript:;\" class=\"download-photo\">下载原片</a>';\n                            break;\n                    }\n                    btnWrapHtml = '<div class=\"order-btnList\"><a class=\"external\" href=\"' +\n                        orders[i].S_MapUrl + '\">推荐路线</a>' + btnHtml + '</div>';\n\n                    // 订单总额\n                    ordersPayHtml = '<p class=\"order-total\">总计:<em>￥' + orders[i].A_Money + '</em></p>';\n\n                    // 单个订单模块\n                    if (orders[i].A_State == 4) {\n                        ordersUnitHtml += '<div class=\"content-block\"><div class=\"orders-wrap orders-finished\">' +\n                            ordersNumberHtml + ordersStoreHtml + ordersInfoHtml + ordersPayHtml + btnWrapHtml + '</div></div>';\n                        ordersHtmlf += '<div class=\"content-block\"><div class=\"orders-wrap orders-finished\">' +\n                            ordersNumberHtml + ordersStoreHtml + ordersInfoHtml + ordersPayHtml + btnWrapHtml + '</div></div>';\n                    } else if (orders[i].A_State == -1) {\n                        btnWrapHtml = '<div class=\"order-btnList\">' + btnHtml + '</div>';\n                        ordersUnitHtml += '<div class=\"content-block\"><div class=\"orders-wrap orders-finished\">' +\n                            ordersNumberHtml + ordersStoreHtml + ordersPayHtml + btnWrapHtml + '</div></div>';\n                        ordersHtmlf += '<div class=\"content-block\"><div class=\"orders-wrap orders-finished\">' +\n                            ordersNumberHtml + ordersStoreHtml + ordersPayHtml + btnWrapHtml + '</div></div>';\n                    } else {\n                        ordersUnitHtml += '<div class=\"content-block\"><div class=\"orders-wrap orders-unfinished\">' +\n                            ordersNumberHtml + ordersStoreHtml + ordersInfoHtml + ordersPayHtml + btnWrapHtml + '</div></div>';\n                        ordersHtmluf += '<div class=\"content-block\"><div class=\"orders-wrap orders-unfinished\">' +\n                            ordersNumberHtml + ordersStoreHtml + ordersInfoHtml + ordersPayHtml + btnWrapHtml + '</div></div>';\n                    }\n                }\n\n                // 订单列表\n                ordersHtml += ordersUnitHtml;\n                $('#orders-all').html(ordersHtml);\n                $('#orders-process').html(ordersHtmluf);\n                $('#orders-close').html(ordersHtmlf);\n                $('.buttons-tab .button').off('click').on('click', isBackgNone);\n                $('.download-photo').on('click', function() {\n                    var aid = getOrderId(this);\n                    cookie.set('aid', aid);\n                    $.router.load('/Index/downPhoto', true);\n                });\n                $('.order-paymentBtn').on('click', function() {\n                    var aid = getOrderId(this);\n                    cookie.set('aid', aid);\n                    $.router.load('/Index/settlementAgainInfo');\n                });\n                $('.order-checkDate.off').off('click');\n                $('.order-checkDate.active').on('click', function() {\n                    var aid = getOrderId(this);\n                    var modifyCount = orders[aid].A_ModifyCount;\n                    var modifyStoreId = orders[aid].A_Store;\n\n                    //计算订单count占位\n                    var parent = $(this).parent().siblings('.orders-infoWrap');\n                    var productNode = parent.find('p');\n                    var rePlaceHold = 0;\n                    for (var i = 1; i < productNode.length; i++) {\n                        var nodeInfo = $(productNode[i]);\n                        rePlaceHold += nodeInfo.data('count');\n                    }\n                    if (rePlaceHold > 3) {\n                        rePlaceHold = 3;\n                    }\n                    \n                    cookie.set('aid', aid);\n                    cookie.set('modifyCount', modifyCount);\n                    cookie.set('modifyStoreId', modifyStoreId);\n                    cookie.set('reCountPlaceHold', rePlaceHold);\n                    $.router.load('/Index/modifyDate');\n                });\n            } else if (data.error === 400) {\n                $.router.load('/Index/login');\n            }\n        });\n\n        /**\n         * 获取订单号\n         */\n        function getOrderId(that) {\n            return $(that).parent().parent().find('.orders-number em').html();\n        }\n\n\n        /**\n         * 无订单或者没有加载到本地时显示的背景\n         */\n        function isBackgNone() {\n            var idHref = $(this).attr('href');\n            if ($('.content-block ' + idHref).children().length) {\n                $('.content').removeClass('none');\n            } else {\n                $('.content').addClass('none');\n            }\n        }\n    });\n\n\n\n    // 下载原片前评分\n    $(document).on('pageInit', '#estimation', function(e, id, page) {\n        var isSubmit = false;\n\n        // 总评分\n        $('.all-estimation').on('click', '.estimation-starIcon a', function() {\n            showStar(this, true);\n        });\n        // 具体评分\n        $('.estimation-experienceChild').on('click', '.estimation-starIcon a', function() {\n            showStar(this);\n        });\n\n        // 提交评论\n        $('.estimation-clickbtn').on('click', submit);\n\n        // 评分显示单元\n        function showStar(that, isMain) {\n            var n = $(that).attr('data');\n            $(that).parent().find('.estimation-starList').removeClass('active');\n            for (var i = 0; i < n; i++) {\n                $($(that).parent().find('.estimation-starList')[i]).addClass('active');\n            }\n\n            if ($('.all-estimation .active').length < 5) {\n                $('.estimation-experienceChild').show();\n                if (isMain) {\n                    showStarall($('.all-estimation .active').length);\n                }\n            } else {\n                $('.estimation-experienceChild').hide();\n            }\n        }　\n\n        // 评分显示整体\n        function showStarall(num) {\n            var $starunit = $('.estimation-starIcon').find('.estimation-starList');\n            $starunit.removeClass('active');\n            for (var i = 0; i < $starunit.length; i++) {\n                if ($($starunit[i]).attr('data') <= num) {\n                    $($starunit[i]).addClass('active');\n                }\n            }\n        }\n\n        //提交NPS数据\n        function submit() {\n            var data = {};\n            var mainStar = $('.all-estimation .active').length;\n            var receptionistStar, cameramanStar, dresserStar, retoucherStar;\n\n            if (isSubmit) {\n                $.toast('不要重复提交哦');\n                return false;\n            }\n\n            if (mainStar > 4) {\n                receptionistStar = cameramanStar = dresserStar = retoucherStar = 5;\n            } else {\n                receptionistStar = $('.receptionist-star .active').length;\n                cameramanStar = $('.cameraman-star .active').length;\n                dresserStar = $('.dresser-star .active').length;\n                retoucherStar = $('.retoucher-star .active').length;\n            }\n            data.aid = cookie.get('aid');\n            data.mainStar = mainStar * 2;\n            data.receptionistStar = receptionistStar * 2;\n            data.cameramanStar = cameramanStar * 2;\n            data.dresserStar = dresserStar * 2;\n            data.retoucherStar = retoucherStar * 2;\n\n            //空值检查\n            for (var i in data) {\n                if (!data[i]) {\n                    $.toast('提交失败,评价分数不可为空');\n                    return false;\n                }\n            }\n\n            data.note = $.trim($('textarea').val());\n            if (mainStar <= 4 && data.note.length === 0) {\n                $.toast('请写下您的建议,帮助小海马进步吧！');\n                return false;\n            }\n            $.showIndicator();\n            isSubmit = true;\n            $.post(m_module + '/Api/submitNps', data, function(response) {\n                $.hideIndicator();\n                if (response.error === 0) {\n\n                    $.toast(response.msg);\n                    setTimeout(function() {\n                        $.router.load('/Index/downPhoto');\n                    }, 1000);\n                } else if (response.error === 400) {\n                    $.router.load('/Index/login');\n                } else {\n                    $.toast(response.msg);\n                    isSubmit = false;\n                }\n            }, 'json');\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL29yZGVycy5qcz9lNTFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIOiuouWNleaooeWdl+mhtemdompz44CAXG4kKGZ1bmN0aW9uKCkge1xuICAgIC8vIOiuouWNlemmlumhtVxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlSW5pdCcsICcjb3JkZXJzJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG5cbiAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL0FwaS9nZXRVc2VyQWNjb3VudCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAkKCcuY29udGVudCcpLmFkZENsYXNzKCdub25lJyk7IC8vIOaXoOiuouWNleaIluiAheayoeacieWKoOi9veWIsOacrOWcsOaXtuaYvuekuueahOiDjOaZr1xuICAgICAgICAgICAgICAgIHZhciBvcmRlcnMgPSBkYXRhLm1zZztcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJzSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBvcmRlcnNIdG1sZiA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBvcmRlcnNIdG1sdWYgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJzVW5pdEh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGVzID0ge1xuICAgICAgICAgICAgICAgICAgICAnLTEnOiAn5bey5YWz6ZetJyxcbiAgICAgICAgICAgICAgICAgICAgJzEnOiAn5pyq5LuY5qy+JyxcbiAgICAgICAgICAgICAgICAgICAgJzInOiAn562J5b6F5ouN5pGEJyxcbiAgICAgICAgICAgICAgICAgICAgJzMnOiAn5b2T5pel5ouN5pGEJyxcbiAgICAgICAgICAgICAgICAgICAgJzQnOiAn5a6M5oiQJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcmRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyc051bWJlckh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyc1N0b3JlSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJzQ2VsbEh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyc0luZm9IdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmRlclBheUh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ0bkh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ0bldyYXBIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidG5TdGF0dXNIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cyA9IHBhcnNlSW50KCgrbmV3IERhdGUoKSAtIG9yZGVyc1tpXS5BX0NyZWF0ZUF0ICogMTAwMCkgLyAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDorqLljZXlj7flj4rorqLljZXnirbmgIFcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJzTnVtYmVySHRtbCA9ICc8cCBjbGFzcz1cIm9yZGVycy1udW1iZXJcIj7orqLljZXlj7fvvJo8ZW0+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNbaV0uQV9JZCArICc8L2VtPiA8c3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICgodHMgPiAxMjAwICYmIG9yZGVyc1tpXS5BX1N0YXRlID09IDEpID8gJ+W3sui2heaXticgOiBzdGF0ZXNbb3JkZXJzW2ldLkFfU3RhdGVdKSArICc8L3NwYW4+PC9wPic7XG4gICAgICAgICAgICAgICAgICAgIC8vIOmXqOW6l+WSjOaXtumXtOS/oeaBr1xuICAgICAgICAgICAgICAgICAgICBvcmRlcnNTdG9yZUh0bWwgPSAnPGRpdiBjbGFzcz1cIm9yZGVyLXN0b3JlXCI+PHA+5ouN5pGE6Zeo5bqX77yaPGVtPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzW2ldLlNfTmFtZSArICc8L2VtPjwvcD48cD7pooTnuqbml7bpl7TvvJo8ZW0+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNbaV0uQV9PcmRlclRpbWUuc3BsaXQoJyAnKVswXSArICc8Yj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc1tpXS5BX09yZGVyVGltZS5zcGxpdCgnICcpWzFdICsgJzwvYj48L2VtPjwvcD48cD48YSBocmVmPVwidGVsOicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzW2ldLlNfUGhvbmUgKyAnXCI+6Zeo5bqX5Y+356CB77yaPGI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNbaV0uU19QaG9uZSArICc8L2I+PC9hPjwvcD48L2Rpdj4nO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOWVhuWTgeWIl+ihqFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIG9yZGVyc1tpXS5BX0l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNDZWxsSHRtbCArPSAnPHAgZGF0YS1jb3VudD1cIicgKyBvcmRlcnNbaV0uQV9JdGVtc1tqXS5BSV9Db3VudCArICdcIj4nICsgb3JkZXJzW2ldLkFfSXRlbXNbal0uQUlfUHJvZHVjdCArICc8c3Bhbj48L3NwYW4+PC9wPic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3JkZXJzSW5mb0h0bWwgPSAnPGRpdiBjbGFzcz1cIm9yZGVycy1pbmZvV3JhcFwiPjxwPuaLjeaRhOWGheWuuTo8L3A+JyArIG9yZGVyc0NlbGxIdG1sICsgJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyc1tpXS5BX1N0YXRlID09ICcyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyc1tpXS5BX01vZGlmeUNvdW50ID09ICcyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0blN0YXR1c0h0bWwgPSAnPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwib3JkZXItY2hlY2tEYXRlIG9mZlwiPumHjemAieaho+acnzwvYT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5TdGF0dXNIdG1sID0gJzxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cIm9yZGVyLWNoZWNrRGF0ZSBhY3RpdmVcIj7ph43pgInmoaPmnJ88L2E+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOagueaNruS4jeWQjOeahOiuouWNleeKtuaAgeaYvuekuuS4jeWQjOeahOaMiemSrlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9yZGVyc1tpXS5BX1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICctMSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuSHRtbCA9ICc8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+5bey5YWz6ZetPC9hPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcxJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5IdG1sID0gKHRzIDwgMTIwMCA/ICc8YSBocmVmPVwiL0luZGV4L3Nob290SW5mb1wiPuaLjeaRhOW7uuiurjwvYT48YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJvcmRlci1wYXltZW50QnRuXCI+5Y675LuY5qy+PC9hPicgOiAnPGEgaHJlZj1cIi9JbmRleC9zaG9vdEluZm9cIj7mi43mkYTlu7rorq48L2E+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5IdG1sID0gJzxhIGhyZWY9XCIvSW5kZXgvc2hvb3RJbmZvXCI+5ouN5pGE5bu66K6uPC9hPicgKyBidG5TdGF0dXNIdG1sICsgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICczJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5IdG1sID0gJzxhIGhyZWY9XCIvSW5kZXgvc2hvb3RJbmZvXCI+5ouN5pGE5bu66K6uPC9hPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICc0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5IdG1sID0gJzxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRvd25sb2FkLXBob3RvXCI+5LiL6L295Y6f54mHPC9hPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnRuV3JhcEh0bWwgPSAnPGRpdiBjbGFzcz1cIm9yZGVyLWJ0bkxpc3RcIj48YSBjbGFzcz1cImV4dGVybmFsXCIgaHJlZj1cIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzW2ldLlNfTWFwVXJsICsgJ1wiPuaOqOiNkOi3r+e6vzwvYT4nICsgYnRuSHRtbCArICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiuouWNleaAu+minVxuICAgICAgICAgICAgICAgICAgICBvcmRlcnNQYXlIdG1sID0gJzxwIGNsYXNzPVwib3JkZXItdG90YWxcIj7mgLvorqE6PGVtPu+/pScgKyBvcmRlcnNbaV0uQV9Nb25leSArICc8L2VtPjwvcD4nO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOWNleS4quiuouWNleaooeWdl1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJzW2ldLkFfU3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzVW5pdEh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjb250ZW50LWJsb2NrXCI+PGRpdiBjbGFzcz1cIm9yZGVycy13cmFwIG9yZGVycy1maW5pc2hlZFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc051bWJlckh0bWwgKyBvcmRlcnNTdG9yZUh0bWwgKyBvcmRlcnNJbmZvSHRtbCArIG9yZGVyc1BheUh0bWwgKyBidG5XcmFwSHRtbCArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzSHRtbGYgKz0gJzxkaXYgY2xhc3M9XCJjb250ZW50LWJsb2NrXCI+PGRpdiBjbGFzcz1cIm9yZGVycy13cmFwIG9yZGVycy1maW5pc2hlZFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc051bWJlckh0bWwgKyBvcmRlcnNTdG9yZUh0bWwgKyBvcmRlcnNJbmZvSHRtbCArIG9yZGVyc1BheUh0bWwgKyBidG5XcmFwSHRtbCArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9yZGVyc1tpXS5BX1N0YXRlID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG5XcmFwSHRtbCA9ICc8ZGl2IGNsYXNzPVwib3JkZXItYnRuTGlzdFwiPicgKyBidG5IdG1sICsgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNVbml0SHRtbCArPSAnPGRpdiBjbGFzcz1cImNvbnRlbnQtYmxvY2tcIj48ZGl2IGNsYXNzPVwib3JkZXJzLXdyYXAgb3JkZXJzLWZpbmlzaGVkXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzTnVtYmVySHRtbCArIG9yZGVyc1N0b3JlSHRtbCArIG9yZGVyc1BheUh0bWwgKyBidG5XcmFwSHRtbCArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzSHRtbGYgKz0gJzxkaXYgY2xhc3M9XCJjb250ZW50LWJsb2NrXCI+PGRpdiBjbGFzcz1cIm9yZGVycy13cmFwIG9yZGVycy1maW5pc2hlZFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc051bWJlckh0bWwgKyBvcmRlcnNTdG9yZUh0bWwgKyBvcmRlcnNQYXlIdG1sICsgYnRuV3JhcEh0bWwgKyAnPC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc1VuaXRIdG1sICs9ICc8ZGl2IGNsYXNzPVwiY29udGVudC1ibG9ja1wiPjxkaXYgY2xhc3M9XCJvcmRlcnMtd3JhcCBvcmRlcnMtdW5maW5pc2hlZFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc051bWJlckh0bWwgKyBvcmRlcnNTdG9yZUh0bWwgKyBvcmRlcnNJbmZvSHRtbCArIG9yZGVyc1BheUh0bWwgKyBidG5XcmFwSHRtbCArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzSHRtbHVmICs9ICc8ZGl2IGNsYXNzPVwiY29udGVudC1ibG9ja1wiPjxkaXYgY2xhc3M9XCJvcmRlcnMtd3JhcCBvcmRlcnMtdW5maW5pc2hlZFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc051bWJlckh0bWwgKyBvcmRlcnNTdG9yZUh0bWwgKyBvcmRlcnNJbmZvSHRtbCArIG9yZGVyc1BheUh0bWwgKyBidG5XcmFwSHRtbCArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g6K6i5Y2V5YiX6KGoXG4gICAgICAgICAgICAgICAgb3JkZXJzSHRtbCArPSBvcmRlcnNVbml0SHRtbDtcbiAgICAgICAgICAgICAgICAkKCcjb3JkZXJzLWFsbCcpLmh0bWwob3JkZXJzSHRtbCk7XG4gICAgICAgICAgICAgICAgJCgnI29yZGVycy1wcm9jZXNzJykuaHRtbChvcmRlcnNIdG1sdWYpO1xuICAgICAgICAgICAgICAgICQoJyNvcmRlcnMtY2xvc2UnKS5odG1sKG9yZGVyc0h0bWxmKTtcbiAgICAgICAgICAgICAgICAkKCcuYnV0dG9ucy10YWIgLmJ1dHRvbicpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBpc0JhY2tnTm9uZSk7XG4gICAgICAgICAgICAgICAgJCgnLmRvd25sb2FkLXBob3RvJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhaWQgPSBnZXRPcmRlcklkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdhaWQnLCBhaWQpO1xuICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvZG93blBob3RvJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLm9yZGVyLXBheW1lbnRCdG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFpZCA9IGdldE9yZGVySWQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ2FpZCcsIGFpZCk7XG4gICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9zZXR0bGVtZW50QWdhaW5JbmZvJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLm9yZGVyLWNoZWNrRGF0ZS5vZmYnKS5vZmYoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgJCgnLm9yZGVyLWNoZWNrRGF0ZS5hY3RpdmUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFpZCA9IGdldE9yZGVySWQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RpZnlDb3VudCA9IG9yZGVyc1thaWRdLkFfTW9kaWZ5Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RpZnlTdG9yZUlkID0gb3JkZXJzW2FpZF0uQV9TdG9yZTtcblxuICAgICAgICAgICAgICAgICAgICAvL+iuoeeul+iuouWNlWNvdW505Y2g5L2NXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkZXJzLWluZm9XcmFwJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0Tm9kZSA9IHBhcmVudC5maW5kKCdwJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZVBsYWNlSG9sZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcHJvZHVjdE5vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlSW5mbyA9ICQocHJvZHVjdE5vZGVbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVQbGFjZUhvbGQgKz0gbm9kZUluZm8uZGF0YSgnY291bnQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVQbGFjZUhvbGQgPiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZVBsYWNlSG9sZCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ2FpZCcsIGFpZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ21vZGlmeUNvdW50JywgbW9kaWZ5Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdtb2RpZnlTdG9yZUlkJywgbW9kaWZ5U3RvcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ3JlQ291bnRQbGFjZUhvbGQnLCByZVBsYWNlSG9sZCk7XG4gICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9tb2RpZnlEYXRlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9sb2dpbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+W6K6i5Y2V5Y+3XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRPcmRlcklkKHRoYXQpIHtcbiAgICAgICAgICAgIHJldHVybiAkKHRoYXQpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5vcmRlcnMtbnVtYmVyIGVtJykuaHRtbCgpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog5peg6K6i5Y2V5oiW6ICF5rKh5pyJ5Yqg6L295Yiw5pys5Zyw5pe25pi+56S655qE6IOM5pmvXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpc0JhY2tnTm9uZSgpIHtcbiAgICAgICAgICAgIHZhciBpZEhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgIGlmICgkKCcuY29udGVudC1ibG9jayAnICsgaWRIcmVmKS5jaGlsZHJlbigpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICQoJy5jb250ZW50JykucmVtb3ZlQ2xhc3MoJ25vbmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmNvbnRlbnQnKS5hZGRDbGFzcygnbm9uZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cblxuXG4gICAgLy8g5LiL6L295Y6f54mH5YmN6K+E5YiGXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNlc3RpbWF0aW9uJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIGlzU3VibWl0ID0gZmFsc2U7XG5cbiAgICAgICAgLy8g5oC76K+E5YiGXG4gICAgICAgICQoJy5hbGwtZXN0aW1hdGlvbicpLm9uKCdjbGljaycsICcuZXN0aW1hdGlvbi1zdGFySWNvbiBhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzaG93U3Rhcih0aGlzLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIOWFt+S9k+ivhOWIhlxuICAgICAgICAkKCcuZXN0aW1hdGlvbi1leHBlcmllbmNlQ2hpbGQnKS5vbignY2xpY2snLCAnLmVzdGltYXRpb24tc3Rhckljb24gYScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2hvd1N0YXIodGhpcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOaPkOS6pOivhOiuulxuICAgICAgICAkKCcuZXN0aW1hdGlvbi1jbGlja2J0bicpLm9uKCdjbGljaycsIHN1Ym1pdCk7XG5cbiAgICAgICAgLy8g6K+E5YiG5pi+56S65Y2V5YWDXG4gICAgICAgIGZ1bmN0aW9uIHNob3dTdGFyKHRoYXQsIGlzTWFpbikge1xuICAgICAgICAgICAgdmFyIG4gPSAkKHRoYXQpLmF0dHIoJ2RhdGEnKTtcbiAgICAgICAgICAgICQodGhhdCkucGFyZW50KCkuZmluZCgnLmVzdGltYXRpb24tc3Rhckxpc3QnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgICQoJCh0aGF0KS5wYXJlbnQoKS5maW5kKCcuZXN0aW1hdGlvbi1zdGFyTGlzdCcpW2ldKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkKCcuYWxsLWVzdGltYXRpb24gLmFjdGl2ZScpLmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICAkKCcuZXN0aW1hdGlvbi1leHBlcmllbmNlQ2hpbGQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTWFpbikge1xuICAgICAgICAgICAgICAgICAgICBzaG93U3RhcmFsbCgkKCcuYWxsLWVzdGltYXRpb24gLmFjdGl2ZScpLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuZXN0aW1hdGlvbi1leHBlcmllbmNlQ2hpbGQnKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH3jgIBcblxuICAgICAgICAvLyDor4TliIbmmL7npLrmlbTkvZNcbiAgICAgICAgZnVuY3Rpb24gc2hvd1N0YXJhbGwobnVtKSB7XG4gICAgICAgICAgICB2YXIgJHN0YXJ1bml0ID0gJCgnLmVzdGltYXRpb24tc3Rhckljb24nKS5maW5kKCcuZXN0aW1hdGlvbi1zdGFyTGlzdCcpO1xuICAgICAgICAgICAgJHN0YXJ1bml0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHN0YXJ1bml0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJHN0YXJ1bml0W2ldKS5hdHRyKCdkYXRhJykgPD0gbnVtKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJHN0YXJ1bml0W2ldKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy/mj5DkuqROUFPmlbDmja5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0KCkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBtYWluU3RhciA9ICQoJy5hbGwtZXN0aW1hdGlvbiAuYWN0aXZlJykubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHJlY2VwdGlvbmlzdFN0YXIsIGNhbWVyYW1hblN0YXIsIGRyZXNzZXJTdGFyLCByZXRvdWNoZXJTdGFyO1xuXG4gICAgICAgICAgICBpZiAoaXNTdWJtaXQpIHtcbiAgICAgICAgICAgICAgICAkLnRvYXN0KCfkuI3opoHph43lpI3mj5DkuqTlk6YnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtYWluU3RhciA+IDQpIHtcbiAgICAgICAgICAgICAgICByZWNlcHRpb25pc3RTdGFyID0gY2FtZXJhbWFuU3RhciA9IGRyZXNzZXJTdGFyID0gcmV0b3VjaGVyU3RhciA9IDU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VwdGlvbmlzdFN0YXIgPSAkKCcucmVjZXB0aW9uaXN0LXN0YXIgLmFjdGl2ZScpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjYW1lcmFtYW5TdGFyID0gJCgnLmNhbWVyYW1hbi1zdGFyIC5hY3RpdmUnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZHJlc3NlclN0YXIgPSAkKCcuZHJlc3Nlci1zdGFyIC5hY3RpdmUnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmV0b3VjaGVyU3RhciA9ICQoJy5yZXRvdWNoZXItc3RhciAuYWN0aXZlJykubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5haWQgPSBjb29raWUuZ2V0KCdhaWQnKTtcbiAgICAgICAgICAgIGRhdGEubWFpblN0YXIgPSBtYWluU3RhciAqIDI7XG4gICAgICAgICAgICBkYXRhLnJlY2VwdGlvbmlzdFN0YXIgPSByZWNlcHRpb25pc3RTdGFyICogMjtcbiAgICAgICAgICAgIGRhdGEuY2FtZXJhbWFuU3RhciA9IGNhbWVyYW1hblN0YXIgKiAyO1xuICAgICAgICAgICAgZGF0YS5kcmVzc2VyU3RhciA9IGRyZXNzZXJTdGFyICogMjtcbiAgICAgICAgICAgIGRhdGEucmV0b3VjaGVyU3RhciA9IHJldG91Y2hlclN0YXIgKiAyO1xuXG4gICAgICAgICAgICAvL+epuuWAvOajgOafpVxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QoJ+aPkOS6pOWksei0pSzor4Tku7fliIbmlbDkuI3lj6/kuLrnqbonKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGF0YS5ub3RlID0gJC50cmltKCQoJ3RleHRhcmVhJykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKG1haW5TdGFyIDw9IDQgJiYgZGF0YS5ub3RlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQudG9hc3QoJ+ivt+WGmeS4i+aCqOeahOW7uuiurizluK7liqnlsI/mtbfpqazov5vmraXlkKfvvIEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIGlzU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICQucG9zdChtX21vZHVsZSArICcvQXBpL3N1Ym1pdE5wcycsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2Rvd25QaG90bycpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBpc1N1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICdqc29uJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvb3JkZXJzLmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");
}, function(module, exports) {
	eval("$(function() {\n    $(document).on('pageInit', '#downPhoto', function(e, id, page) {\n        //NPS检测\n        var aid = cookie.get('aid');\n        if (!aid) {\n            $('.invalidOrder').show();\n            $.toast('获取订单信息异常,请联系客服');\n            return false;\n        }\n        checkNps(aid);\n\n        $('.downPhoto-closeBtn').on('click', function() {\n            $('.downPhoto-tipBlcok').hide();\n        });\n        $('.downPhoto-mask').on('click', function() {\n            $('.downPhoto-tipBlcok').hide();\n        });\n\n\n        //初始化微信SDK\n        function initWxSDK() {\n            var script = document.createElement('script');\n            script.type = \"text/javascript\";\n            script.src = 'http://res.wx.qq.com/open/js/jweixin-1.0.0.js';\n            $('head').append(script);\n            script.onload = function() {\n                $.get(m_module + '/Api/getWechatAuth', function(data) {\n                    if (data.error === 0) {\n                        var wechat = {};\n                        wechat = JSON.parse(data.msg);\n                        wechat.debug = false;\n                        wechat.jsApiList = ['previewImage'];\n                        wx.config(wechat);\n                        wx.error(function(res) {});\n                        //微信初始化\n                        wx.ready(function() {\n                            getAccountPhoto();\n                        });\n                    }\n                });\n            };\n        }\n\n\n        //获得原片\n        function getAccountPhoto() {\n            var data = {};\n            var downHtml = '';\n            data.aid = cookie.get('aid');\n            $.showIndicator();\n            $.post(m_module + '/Api/getAccountPhoto', data, function(response) {\n                $.hideIndicator();\n                if (response.error === 0) {\n                    $('.downPhoto-tipBlcok').show();\n                    var imgurl = JSON.parse(response.msg);\n                    var mimgurl = [];\n                    for (var i in imgurl) {\n                        mimgurl.push(imgurl[i] + '!mobiledown');\n                        downHtml += '<div class=\"downPhoto-List\"><div class=\"downPhoto-Wrap\"><div class=\"wrapper\"><div class=\"loadingWrap\"><div class=\"cupWrap\"><div class=\"coffee_cup\"></div></div></div></div><img style=\"display:none\" src=\"' +\n                            imgurl[i] + '!mobileShow' + '\" alt=\"客片\"></div><div class=\"downPhoto-btnWrap\"><a href=\"javascript:;\" data-id=\"' +\n                            i + '\" class=\"compressed\">下载压缩图</a><a href=\"javascript:;\"data-id=\"' +\n                            i + '\" class=\"original\">下载原图</a></div></div>';\n                    }\n                    $('.downModel').html(downHtml);\n                    $('img').on('load', function() {\n                        $(this).parents().find('.wrapper').remove();\n                        $(this).show();\n                    });\n                    $('.downPhoto-btnWrap .compressed').on('click', function() {\n                        downPhoto(this, mimgurl);\n                    });\n                    $('.downPhoto-btnWrap .original').on('click', function() {\n                        downPhoto(this, imgurl);\n                    });\n                } else if (response.error === 400) {\n                    $.router.load('/Index/login');\n                } else {\n                    $('.invalidOrder').show();\n                }\n            }, 'json');\n        }\n\n\n        //打开图片\n        function downPhoto(that, aim) {\n            var self = that;\n            var nodeIndex = parseInt($(self).data('id'));\n            wx.previewImage({\n                current: aim[nodeIndex],\n                urls: aim\n            });\n        }\n\n        //检查订单是否已经填写NPS\n        function checkNps(aid) {\n            $.showIndicator();\n            $.post(m_module + '/Api/checkNps', { aid: aid }, function(response) {\n                $.hideIndicator();\n                if (response.error === 0) {\n                    if (response.msg === 'SUCCESS_ADVANCE') {\n                        $.router.load('/Index/magic');\n                    } else {\n                        $.router.load('/Index/estimation');\n                    }\n                } else if (response.error === 403) {\n                    initWxSDK();\n                    return true;\n                } else if (response.error === 400) {\n                    $.router.load('/Index/login');\n                } else {\n                    $.toast(response.msg);\n                }\n            });\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL2Rvd25QaG90by5qcz82YTA0Il0sInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNkb3duUGhvdG8nLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAvL05QU+ajgOa1i1xuICAgICAgICB2YXIgYWlkID0gY29va2llLmdldCgnYWlkJyk7XG4gICAgICAgIGlmICghYWlkKSB7XG4gICAgICAgICAgICAkKCcuaW52YWxpZE9yZGVyJykuc2hvdygpO1xuICAgICAgICAgICAgJC50b2FzdCgn6I635Y+W6K6i5Y2V5L+h5oGv5byC5bi4LOivt+iBlOezu+WuouacjScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNoZWNrTnBzKGFpZCk7XG5cbiAgICAgICAgJCgnLmRvd25QaG90by1jbG9zZUJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmRvd25QaG90by10aXBCbGNvaycpLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5kb3duUGhvdG8tbWFzaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmRvd25QaG90by10aXBCbGNvaycpLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvL+WIneWni+WMluW+ruS/oVNES1xuICAgICAgICBmdW5jdGlvbiBpbml0V3hTREsoKSB7XG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gJ2h0dHA6Ly9yZXMud3gucXEuY29tL29wZW4vanMvandlaXhpbi0xLjAuMC5qcyc7XG4gICAgICAgICAgICAkKCdoZWFkJykuYXBwZW5kKHNjcmlwdCk7XG4gICAgICAgICAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL0FwaS9nZXRXZWNoYXRBdXRoJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdlY2hhdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgd2VjaGF0ID0gSlNPTi5wYXJzZShkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWNoYXQuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlY2hhdC5qc0FwaUxpc3QgPSBbJ3ByZXZpZXdJbWFnZSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3guY29uZmlnKHdlY2hhdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3eC5lcnJvcihmdW5jdGlvbihyZXMpIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5b6u5L+h5Yid5aeL5YyWXG4gICAgICAgICAgICAgICAgICAgICAgICB3eC5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRBY2NvdW50UGhvdG8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cblxuICAgICAgICAvL+iOt+W+l+WOn+eJh1xuICAgICAgICBmdW5jdGlvbiBnZXRBY2NvdW50UGhvdG8oKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGRvd25IdG1sID0gJyc7XG4gICAgICAgICAgICBkYXRhLmFpZCA9IGNvb2tpZS5nZXQoJ2FpZCcpO1xuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAkLnBvc3QobV9tb2R1bGUgKyAnL0FwaS9nZXRBY2NvdW50UGhvdG8nLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuZG93blBob3RvLXRpcEJsY29rJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW1ndXJsID0gSlNPTi5wYXJzZShyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWltZ3VybCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGltZ3VybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWltZ3VybC5wdXNoKGltZ3VybFtpXSArICchbW9iaWxlZG93bicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG93bkh0bWwgKz0gJzxkaXYgY2xhc3M9XCJkb3duUGhvdG8tTGlzdFwiPjxkaXYgY2xhc3M9XCJkb3duUGhvdG8tV3JhcFwiPjxkaXYgY2xhc3M9XCJ3cmFwcGVyXCI+PGRpdiBjbGFzcz1cImxvYWRpbmdXcmFwXCI+PGRpdiBjbGFzcz1cImN1cFdyYXBcIj48ZGl2IGNsYXNzPVwiY29mZmVlX2N1cFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxpbWcgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIiBzcmM9XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWd1cmxbaV0gKyAnIW1vYmlsZVNob3cnICsgJ1wiIGFsdD1cIuWuoueJh1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJkb3duUGhvdG8tYnRuV3JhcFwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBkYXRhLWlkPVwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArICdcIiBjbGFzcz1cImNvbXByZXNzZWRcIj7kuIvovb3ljovnvKnlm748L2E+PGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiZGF0YS1pZD1cIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKyAnXCIgY2xhc3M9XCJvcmlnaW5hbFwiPuS4i+i9veWOn+WbvjwvYT48L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy5kb3duTW9kZWwnKS5odG1sKGRvd25IdG1sKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW1nJykub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygpLmZpbmQoJy53cmFwcGVyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5kb3duUGhvdG8tYnRuV3JhcCAuY29tcHJlc3NlZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG93blBob3RvKHRoaXMsIG1pbWd1cmwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRvd25QaG90by1idG5XcmFwIC5vcmlnaW5hbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG93blBob3RvKHRoaXMsIGltZ3VybCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuaW52YWxpZE9yZGVyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICdqc29uJyk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8v5omT5byA5Zu+54mHXG4gICAgICAgIGZ1bmN0aW9uIGRvd25QaG90byh0aGF0LCBhaW0pIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhhdDtcbiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSBwYXJzZUludCgkKHNlbGYpLmRhdGEoJ2lkJykpO1xuICAgICAgICAgICAgd3gucHJldmlld0ltYWdlKHtcbiAgICAgICAgICAgICAgICBjdXJyZW50OiBhaW1bbm9kZUluZGV4XSxcbiAgICAgICAgICAgICAgICB1cmxzOiBhaW1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/mo4Dmn6XorqLljZXmmK/lkKblt7Lnu4/loavlhplOUFNcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tOcHMoYWlkKSB7XG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICQucG9zdChtX21vZHVsZSArICcvQXBpL2NoZWNrTnBzJywgeyBhaWQ6IGFpZCB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubXNnID09PSAnU1VDQ0VTU19BRFZBTkNFJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L21hZ2ljJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvZXN0aW1hdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRXeFNESygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL2Rvd25QaG90by5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9")
}, function(module, exports) {
	eval("// 重选档期\n$(function() {\n    $(document).on('pageInit', '#modify-date', function(e, id, page) {\n        var modifyCount = cookie.get('modifyCount'); // 获得修改次数\n        $('#change-time em').html((2 - modifyCount) + '次'); // 剩余修改次数\n        arrangeDate('#reservation-date-day'); // 日期排版\n        banTouchmove('#modify-date'); // 禁止页面滑动\n        // 选择选择3个月内日期\n        $(\"#otherDate\").datetimePicker({\n            toolbarTemplate: '<header class=\"bar bar-nav\"> <button class=\"button button-link pull-right\" id=\"get-date\">确定</button> <h1 class=\"title\"></h1> </header>',\n            onOpen: function() {\n                $('#get-date').on('click', function() {\n                    var select = $('.picker-selected');\n                    var today = new Date();\n                    var tynum = today.getFullYear();\n                    var tmnum = today.getMonth();\n                    var tdnum = today.getDate();\n                    var ynum = $(select[0]).html();\n                    var mnum = $(select[1]).html();\n                    var dnum = $(select[2]).html();\n                    var maxTs = +new Date(tynum, tmnum + 3, tdnum);\n                    var selectD = +new Date(ynum, mnum - 1, dnum);\n\n                    if (selectD <= maxTs && selectD >= today) {\n                        cookie.set('orderDate', selectD);\n                        setTimeout(function() {\n                            $.router.load('/Index/modifyTime');\n                        }, 500);\n                    } else {\n                        $.toast('请选择之后三个月内的时间哦');\n                    }\n                });\n            }\n        });\n\n\n        /**\n         * 点击时间处理事件，获取预约时间，并下跳转到时间选择页面。\n         * @default 设置预约日期的时间戳cookie　\n         */\n        function getOrderDate() {\n            var orderD = $(this).data('date') * 1000;\n            $(this).addClass('active');\n            cookie.set('orderDate', orderD);\n            setTimeout(function() {\n                $.router.load('/Index/modifyTime');\n            }, 50);\n        }\n\n\n        /**\n         * 排日期\n         * @param  {'#idname|.classname|...'} selector 选择插入对象选择器\n         * @return {html}          返回日期列表\n         */\n        function arrangeDate(selector) {\n\n            var $reservationDate = $(selector); // 目标容器\n            var monthArr = new Array('一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月');\n            var storeId = cookie.get('modifyStoreId');\n            var aid = cookie.get('aid');\n            var countPlaceHold = cookie.get('reCountPlaceHold');\n\n            var req = {};\n            req.aid = aid;\n            req.sid = storeId;\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getStoreRemain', req, function(data) {\n                if (data.error === 0) {\n                    $.hideIndicator();\n                    var dateK = data.msg;\n                    var dateS = data.msg.remain;\n                    var today = new Date(); // 获取今天的日期, 需联调, 获取服务器时间\n                    var startTime = getInitDate(); // 确定初始日期\n                    var yearnum = startTime.getFullYear();\n                    var monthnum = startTime.getMonth();\n                    var datenum = startTime.getDate();\n                    var dateArr = []; // 展示的35天的时间戳数组\n                    var date_count = 35;\n                    var dateListHtml = '';\n\n                    // 获得当前时间列表的时间戳数组\n                    for (var i = 0; i < date_count; i++) {\n                        var dateunitHtml, spareHtml, monthHtml, dateHtml;\n                        var thisday = new Date(yearnum, monthnum, datenum + i);\n                        var thisStamp = thisday / 1000;\n                        var nodeStatus = ''; // 节点状态, 不能预约的为off\n                        var monthch = monthArr[thisday.getMonth()]; // 中文月份\n                        var spareCount;\n\n                        if (dateS[thisStamp]) {\n                            spareCount = dateS[thisStamp].count; // 获取余量\n                        } else {\n                            spareCount = 0;\n                        }\n\n                        // 判断是否需要风控\n                        if (!((dateK.couponLimit >= spareCount) && (dateK.needRM === 1))) {\n                            // 判断是否有余量, 若无余量, 则设置off状态\n                            if ( ( spareCount > 0 && spareCount <= 20 && countPlaceHold <= spareCount ) ) {\n                                nodeStatus = '';\n                                spareHtml = '<span class=\"reservation-timeNum\">余 ' + spareCount + '</span>';\n                            } else if (spareCount > 20) {\n                                nodeStatus = '';\n                                spareHtml = '<span class=\"reservation-timeNum\"></span>';\n                            } else {\n                                nodeStatus = 'off';\n                                spareHtml = '<span class=\"reservation-timeNum\"></span>';\n                            }\n                        } else {\n                            nodeStatus = 'off';\n                            spareHtml = '<span class=\"reservation-timeNum\"></span>';\n                        }\n                        //判断产品占位\n                        if (countPlaceHold > spareCount) {\n                            nodeStatus = 'off';\n                        }\n\n                        // 判断是否为某月的1号,如果是,则打上红色圆点标记,月份用大写的月份来标识\n                        if ((thisday.getDate() === 1) || (i === 0)) {\n                            monthHtml = '<span class=\"reservation-timeMonth\">' + monthch + '<em class=\"reservation-timeMonthIcon\"></em></span>';\n                        } else {\n                            monthHtml = '<span class=\"reservation-timeMonth\"></span>';\n                        }\n                        // 判断是否为节日\n                        if (showFestival(thisStamp * 1000)) {\n                            monthHtml = '<span class=\"reservation-timeMonth\">' + showFestival(thisStamp * 1000) + '<em class=\"reservation-timeMonthIcon\"></em></span>';\n                        }\n                        // 判断是否为今天之前的日期\n                        if ((+today - 3600000 * 24) > thisday) {\n                            nodeStatus = 'off';\n                        }\n                        // 插入日期\n                        dateHtml = '<span class=\"reservation-timeDate\">' + thisday.getDate() + '</span>';\n                        dateunitHtml = '<div data-date = ' + thisStamp + ' class=\"' + nodeStatus + '\"\">' + monthHtml + dateHtml + spareHtml + '</div>';\n                        dateListHtml += dateunitHtml;\n                    }\n                    $reservationDate.html(dateListHtml);\n                    $('#reservation-date-day div').off('click').on('click', getOrderDate); // 日期绑定点击事件，跳转到时间选择页面\n                    $('#reservation-date-day .off').off('click'); // 禁止之前日期的点击事件\n                }\n            });\n        }\n\n\n        /**\n         * 节日展示\n         */\n        function showFestival(st) {\n            var _date = getFormatDate(st);\n            var _darr = _date.split('-');\n            var _d = _darr[1] + (_darr[2] < 10 ? '0' + _darr[2] : _darr[2]);\n            var festObj = {\n                '0101': '元旦',\n                '0214': '情人节',\n                '0308': '妇女节',\n                '0312': '植树节',\n                '0320': '春分',\n                '0401': '愚人节',\n                '0404': '清明节',\n                '0501': '劳动节',\n                '0504': '青年节',\n                '0601': '儿童节',\n                '0621': '夏至',\n                '0701': '建党节',\n                '0801': '建军节',\n                '0910': '教师节',\n                '0922': '秋分',\n                '1001': '国庆节',\n                '1221': '冬至',\n                '1224': '平安夜',\n                '1225': '圣诞节'\n            };\n            if (festObj[_d]) {\n                return festObj[_d];\n            } else {\n                return;\n            }\n        }\n\n\n        /**\n         * 获得本周第一天的日期\n         * @return {initdate} 初始化日期列表第一天\n         */\n        function getInitDate() {\n            var today = new Date(); // 获得当前日期\n            var todayYearnum = today.getFullYear();\n            var todayMonnum = today.getMonth();\n            var todayDatenum = today.getDate();\n            var todayWeeknum = today.getDay();\n            var initdate = new Date(todayYearnum, todayMonnum, todayDatenum - todayWeeknum);\n            return initdate;\n        }\n    });\n\n\n\n    // 选择详细拍摄时间\n    $(document).on('pageAnimationStart', '#modify-time', function(e, id, page) {\n        //初始化操作\n        $('.reservation-dateNum').html('');\n        $('.reservation-timeList').html('');\n        $.closeModal(\".picker-modal.modal-in\");\n    });\n\n\n\n    $(document).on('pageInit', '#modify-time', function(e, id, page) {\n        var storeId = cookie.get('modifyStoreId');\n        var today = new Date();\n        var defaultDate = +new Date(today.getFullYear(), today.getMonth(), today.getDate()); // 未选择日期时,设置今天默认\n        var weekArr = new Array('星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六');\n        var $prevdayBtn = $('.reservation-arrowLeft'),\n            $nextdayBtn = $('.reservation-arrowRight'),\n            $nextStepBtn = $('.reservation-timeNodeBtn');\n        var modifyCount = cookie.get('modifyCount');\n        var countPlaceHold = cookie.get('reCountPlaceHold');\n       $('#change-time em').html((2 - modifyCount) + '次');\n\n        arrangeTime();\n\n        // 事件绑定\n        $prevdayBtn.on('click', function() {\n            preNextHandle(-1);\n        }); // 左箭头 前一天\n\n        $nextdayBtn.on('click', function() {\n            preNextHandle(1);\n        }); // 右箭头 后一天\n\n\n        /**\n         * 前一天后一天处理事件\n         */\n        function preNextHandle(pon) {\n            var oneDaySt = 24 * 3600 * 1000;\n            var _dst = parseInt(cookie.get('orderDate')) + pon * oneDaySt;\n            var lastDay = new Date(today.getFullYear(), today.getMonth() + 3, today.getDate());\n            if (((pon > 0) && (_dst <= lastDay)) || ((pon < 0) && (_dst > (today - oneDaySt)))) {\n                cookie.set('orderDate', _dst);\n                arrangeTime();\n            } else {\n                $.toast('只能预约今天之后三个月内的时间哦');\n            }\n        }\n\n\n        /**\n         * 插入时间列表\n         */\n        function arrangeTime() {\n            var dateFormat = getFormatDate(parseInt(cookie.get('orderDate')));\n            var timeListHtml = '';\n            var headDateHtml = '';\n            var $headDateNode = $('.reservation-dateNum');\n            var $timeListNode = $('.reservation-timeList'); // 时间节点目标容器\n            var aid = cookie.get('aid');\n            var req = {};\n            req.aid = aid;\n            req.sid = storeId;\n            req.date = dateFormat;\n            $.showIndicator();\n            $.get(m_module + '/Sapi/getStoreDayRemain', req, function(data) {\n                // 获得时间节点列表\n                if (data.error === 0) {\n                    $.hideIndicator();\n                    var dateN = data.msg;\n                    var thisday = new Date(parseInt(cookie.get('orderDate'))); // 当前预约日期\n                    var yearnum = thisday.getFullYear(),\n                        montnum = thisday.getMonth(),\n                        weeknum = thisday.getDay(),\n                        datenum = thisday.getDate();\n                    var weekday = weekArr[weeknum];\n                    var headDateHtml = '';\n                    var totalcount = 0; // 获取当天剩余位置总数\n                    for (var i in dateN.remain) {\n                        totalcount += dateN.remain[i].count;\n                    }\n\n                    headDateHtml = montnum + 1 + ' 月 ' + datenum + ' 日 ' + '<em>' + weekday + '</em>';\n                    $headDateNode.html(headDateHtml); // 设置头部显示时间\n\n                    for (var key in dateN.remain) {\n                        var timeUnitHtml;\n                        if (dateN.remain[key].time) { // 仅当后台有返回时间点时显示\n                            // 增加风控判断\n                            if (!((dateN.couponLimit >= totalcount) && (dateN.needRM === 1))) {\n                                if ((dateN.remain[key].count > 0) && (key * 1000 > +today)) {\n                                    timeUnitHtml = '<a href=\"javascript:;\" data-time=\"' + key + '\" data-count=\"' + dateN.remain[key].count + '\">' + dateN.remain[key].time + '</a>';\n                                } else {\n                                    timeUnitHtml = '<a href=\"javascript:;\" class=\"off\" data-time=\"' + key + '\">' + dateN.remain[key].time + '</a>';\n                                }\n                            } else {\n                                timeUnitHtml = '<a href=\"javascript:;\" class=\"off\" data-time=\"' + key + '\">' + dateN.remain[key].time + '</a>';\n                            }\n                        } else {\n                            continue;\n                        }\n                        timeListHtml += timeUnitHtml;\n                    }\n\n                    $timeListNode.html(timeListHtml); // 插入时间节点\n                    //时间占位计算\n                    timePlaceHold(countPlaceHold);\n\n\n                    // 点击时间节点,获得预约时间,并高亮显示\n                    $('.reservation-timeList a:not(.off)').off('click').on('click', function() {\n                        $('.reservation-timeList a').removeClass('active');\n                        $(this).addClass('active');\n                        // 提交预约时间\n                        var orderTime = $(this).data('time') * 1000;\n                        var data = {};\n                        data.aid = cookie.get('aid');\n                        data.orderTime = getFormatTime(orderTime);\n                        $.confirm(data.orderTime, '重选档期', function() {\n                            $.showIndicator();\n                            $.post(m_module + '/Api/modifyOrderTime', data, function(response) {\n                                $.hideIndicator();\n                                if (response.error === 0) {\n                                    $.toast(response.msg);\n                                    cookie.remove('orderDate');\n                                    cookie.remove('modifyCount');\n                                    cookie.remove('modifyStoreId');\n                                    setTimeout(function() {\n                                        $.router.load('/Index/orders');\n                                    }, 1000);\n                                } else if (response.error === 400) {\n                                    $.router.load('/Index/login');\n                                } else {\n                                    $.toast(response.msg);\n                                }\n                            }, 'json');\n                        });\n\n                    });\n                }\n            });\n        }\n    });\n\n\n    /**\n     * 时间戳格式转化为 yy-mm-dd\n     * @return {String} 2016-6-23\n     */\n    function getFormatDate(ts) {\n        var date = new Date(ts);\n        var monthnum = date.getMonth();\n        return date.getFullYear() + '-' + ((monthnum + 1) < 10 ? '0' + (monthnum + 1) : +(monthnum + 1)) + '-' + date.getDate();\n    }\n\n\n    /**\n     * 时间戳格式转化为 yy-mm-dd hh:mm\n     * @return {String} 2016-6-23 22:22\n     */\n    function getFormatTime(ts) {\n        var date = new Date(ts);\n        var hournum = date.getHours() + ':';\n        var minnum = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes());\n        var time = getFormatDate(ts) + ' ' + hournum + minnum;\n        return time;\n    }\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL21vZGlmeVNjaGVkdWxlLmpzPzU3MDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g6YeN6YCJ5qGj5pyfXG4kKGZ1bmN0aW9uKCkge1xuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlSW5pdCcsICcjbW9kaWZ5LWRhdGUnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICB2YXIgbW9kaWZ5Q291bnQgPSBjb29raWUuZ2V0KCdtb2RpZnlDb3VudCcpOyAvLyDojrflvpfkv67mlLnmrKHmlbBcbiAgICAgICAgJCgnI2NoYW5nZS10aW1lIGVtJykuaHRtbCgoMiAtIG1vZGlmeUNvdW50KSArICfmrKEnKTsgLy8g5Ymp5L2Z5L+u5pS55qyh5pWwXG4gICAgICAgIGFycmFuZ2VEYXRlKCcjcmVzZXJ2YXRpb24tZGF0ZS1kYXknKTsgLy8g5pel5pyf5o6S54mIXG4gICAgICAgIGJhblRvdWNobW92ZSgnI21vZGlmeS1kYXRlJyk7IC8vIOemgeatoumhtemdoua7keWKqFxuICAgICAgICAvLyDpgInmi6npgInmi6kz5Liq5pyI5YaF5pel5pyfXG4gICAgICAgICQoXCIjb3RoZXJEYXRlXCIpLmRhdGV0aW1lUGlja2VyKHtcbiAgICAgICAgICAgIHRvb2xiYXJUZW1wbGF0ZTogJzxoZWFkZXIgY2xhc3M9XCJiYXIgYmFyLW5hdlwiPiA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi1saW5rIHB1bGwtcmlnaHRcIiBpZD1cImdldC1kYXRlXCI+56Gu5a6aPC9idXR0b24+IDxoMSBjbGFzcz1cInRpdGxlXCI+PC9oMT4gPC9oZWFkZXI+JyxcbiAgICAgICAgICAgIG9uT3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnI2dldC1kYXRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3QgPSAkKCcucGlja2VyLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eW51bSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bW51bSA9IHRvZGF5LmdldE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZG51bSA9IHRvZGF5LmdldERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHludW0gPSAkKHNlbGVjdFswXSkuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW51bSA9ICQoc2VsZWN0WzFdKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkbnVtID0gJChzZWxlY3RbMl0pLmh0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heFRzID0gK25ldyBEYXRlKHR5bnVtLCB0bW51bSArIDMsIHRkbnVtKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdEQgPSArbmV3IERhdGUoeW51bSwgbW51bSAtIDEsIGRudW0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3REIDw9IG1heFRzICYmIHNlbGVjdEQgPj0gdG9kYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb2tpZS5zZXQoJ29yZGVyRGF0ZScsIHNlbGVjdEQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbW9kaWZ5VGltZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QoJ+ivt+mAieaLqeS5i+WQjuS4ieS4quaciOWGheeahOaXtumXtOWTpicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOeCueWHu+aXtumXtOWkhOeQhuS6i+S7tu+8jOiOt+WPlumihOe6puaXtumXtO+8jOW5tuS4i+i3s+i9rOWIsOaXtumXtOmAieaLqemhtemdouOAglxuICAgICAgICAgKiBAZGVmYXVsdCDorr7nva7pooTnuqbml6XmnJ/nmoTml7bpl7TmiLNjb29raWXjgIBcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldE9yZGVyRGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBvcmRlckQgPSAkKHRoaXMpLmRhdGEoJ2RhdGUnKSAqIDEwMDA7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGNvb2tpZS5zZXQoJ29yZGVyRGF0ZScsIG9yZGVyRCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9tb2RpZnlUaW1lJyk7XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmjpLml6XmnJ9cbiAgICAgICAgICogQHBhcmFtICB7JyNpZG5hbWV8LmNsYXNzbmFtZXwuLi4nfSBzZWxlY3RvciDpgInmi6nmj5LlhaXlr7nosaHpgInmi6nlmahcbiAgICAgICAgICogQHJldHVybiB7aHRtbH0gICAgICAgICAg6L+U5Zue5pel5pyf5YiX6KGoXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhcnJhbmdlRGF0ZShzZWxlY3Rvcikge1xuXG4gICAgICAgICAgICB2YXIgJHJlc2VydmF0aW9uRGF0ZSA9ICQoc2VsZWN0b3IpOyAvLyDnm67moIflrrnlmahcbiAgICAgICAgICAgIHZhciBtb250aEFyciA9IG5ldyBBcnJheSgn5LiA5pyIJywgJ+S6jOaciCcsICfkuInmnIgnLCAn5Zub5pyIJywgJ+S6lOaciCcsICflha3mnIgnLCAn5LiD5pyIJywgJ+WFq+aciCcsICfkuZ3mnIgnLCAn5Y2B5pyIJywgJ+WNgeS4gOaciCcsICfljYHkuozmnIgnKTtcbiAgICAgICAgICAgIHZhciBzdG9yZUlkID0gY29va2llLmdldCgnbW9kaWZ5U3RvcmVJZCcpO1xuICAgICAgICAgICAgdmFyIGFpZCA9IGNvb2tpZS5nZXQoJ2FpZCcpO1xuICAgICAgICAgICAgdmFyIGNvdW50UGxhY2VIb2xkID0gY29va2llLmdldCgncmVDb3VudFBsYWNlSG9sZCcpO1xuXG4gICAgICAgICAgICB2YXIgcmVxID0ge307XG4gICAgICAgICAgICByZXEuYWlkID0gYWlkO1xuICAgICAgICAgICAgcmVxLnNpZCA9IHN0b3JlSWQ7XG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9TYXBpL2dldFN0b3JlUmVtYWluJywgcmVxLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlSyA9IGRhdGEubXNnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZVMgPSBkYXRhLm1zZy5yZW1haW47XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7IC8vIOiOt+WPluS7iuWkqeeahOaXpeacnywg6ZyA6IGU6LCDLCDojrflj5bmnI3liqHlmajml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0VGltZSA9IGdldEluaXREYXRlKCk7IC8vIOehruWumuWIneWni+aXpeacn1xuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhcm51bSA9IHN0YXJ0VGltZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhudW0gPSBzdGFydFRpbWUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVudW0gPSBzdGFydFRpbWUuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZUFyciA9IFtdOyAvLyDlsZXnpLrnmoQzNeWkqeeahOaXtumXtOaIs+aVsOe7hFxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZV9jb3VudCA9IDM1O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZUxpc3RIdG1sID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6I635b6X5b2T5YmN5pe26Ze05YiX6KGo55qE5pe26Ze05oiz5pWw57uEXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0ZV9jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZXVuaXRIdG1sLCBzcGFyZUh0bWwsIG1vbnRoSHRtbCwgZGF0ZUh0bWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc2RheSA9IG5ldyBEYXRlKHllYXJudW0sIG1vbnRobnVtLCBkYXRlbnVtICsgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc1N0YW1wID0gdGhpc2RheSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZVN0YXR1cyA9ICcnOyAvLyDoioLngrnnirbmgIEsIOS4jeiDvemihOe6pueahOS4um9mZlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRoY2ggPSBtb250aEFyclt0aGlzZGF5LmdldE1vbnRoKCldOyAvLyDkuK3mlofmnIjku71cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFyZUNvdW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZVNbdGhpc1N0YW1wXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXJlQ291bnQgPSBkYXRlU1t0aGlzU3RhbXBdLmNvdW50OyAvLyDojrflj5bkvZnph49cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmVDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOimgemjjuaOp1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKGRhdGVLLmNvdXBvbkxpbWl0ID49IHNwYXJlQ291bnQpICYmIChkYXRlSy5uZWVkUk0gPT09IDEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuacieS9memHjywg6Iul5peg5L2Z6YePLCDliJnorr7nva5vZmbnirbmgIFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggc3BhcmVDb3VudCA+IDAgJiYgc3BhcmVDb3VudCA8PSAyMCAmJiBjb3VudFBsYWNlSG9sZCA8PSBzcGFyZUNvdW50ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGF0dXMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmVIdG1sID0gJzxzcGFuIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU51bVwiPuS9mSAnICsgc3BhcmVDb3VudCArICc8L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNwYXJlQ291bnQgPiAyMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlU3RhdHVzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXJlSHRtbCA9ICc8c3BhbiBjbGFzcz1cInJlc2VydmF0aW9uLXRpbWVOdW1cIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlU3RhdHVzID0gJ29mZic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXJlSHRtbCA9ICc8c3BhbiBjbGFzcz1cInJlc2VydmF0aW9uLXRpbWVOdW1cIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGF0dXMgPSAnb2ZmJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFyZUh0bWwgPSAnPHNwYW4gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lTnVtXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreS6p+WTgeWNoOS9jVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50UGxhY2VIb2xkID4gc3BhcmVDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGF0dXMgPSAnb2ZmJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5Li65p+Q5pyI55qEMeWPtyzlpoLmnpzmmK8s5YiZ5omT5LiK57qi6Imy5ZyG54K55qCH6K6wLOaciOS7veeUqOWkp+WGmeeahOaciOS7veadpeagh+ivhlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzZGF5LmdldERhdGUoKSA9PT0gMSkgfHwgKGkgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhIdG1sID0gJzxzcGFuIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU1vbnRoXCI+JyArIG1vbnRoY2ggKyAnPGVtIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU1vbnRoSWNvblwiPjwvZW0+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoSHRtbCA9ICc8c3BhbiBjbGFzcz1cInJlc2VydmF0aW9uLXRpbWVNb250aFwiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5Li66IqC5pelXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd0Zlc3RpdmFsKHRoaXNTdGFtcCAqIDEwMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhIdG1sID0gJzxzcGFuIGNsYXNzPVwicmVzZXJ2YXRpb24tdGltZU1vbnRoXCI+JyArIHNob3dGZXN0aXZhbCh0aGlzU3RhbXAgKiAxMDAwKSArICc8ZW0gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lTW9udGhJY29uXCI+PC9lbT48L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuS4uuS7iuWkqeS5i+WJjeeahOaXpeacn1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgrdG9kYXkgLSAzNjAwMDAwICogMjQpID4gdGhpc2RheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGF0dXMgPSAnb2ZmJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaPkuWFpeaXpeacn1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUh0bWwgPSAnPHNwYW4gY2xhc3M9XCJyZXNlcnZhdGlvbi10aW1lRGF0ZVwiPicgKyB0aGlzZGF5LmdldERhdGUoKSArICc8L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGV1bml0SHRtbCA9ICc8ZGl2IGRhdGEtZGF0ZSA9ICcgKyB0aGlzU3RhbXAgKyAnIGNsYXNzPVwiJyArIG5vZGVTdGF0dXMgKyAnXCJcIj4nICsgbW9udGhIdG1sICsgZGF0ZUh0bWwgKyBzcGFyZUh0bWwgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVMaXN0SHRtbCArPSBkYXRldW5pdEh0bWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHJlc2VydmF0aW9uRGF0ZS5odG1sKGRhdGVMaXN0SHRtbCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNyZXNlcnZhdGlvbi1kYXRlLWRheSBkaXYnKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZ2V0T3JkZXJEYXRlKTsgLy8g5pel5pyf57uR5a6a54K55Ye75LqL5Lu277yM6Lez6L2s5Yiw5pe26Ze06YCJ5oup6aG16Z2iXG4gICAgICAgICAgICAgICAgICAgICQoJyNyZXNlcnZhdGlvbi1kYXRlLWRheSAub2ZmJykub2ZmKCdjbGljaycpOyAvLyDnpoHmraLkuYvliY3ml6XmnJ/nmoTngrnlh7vkuovku7ZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiKguaXpeWxleekulxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2hvd0Zlc3RpdmFsKHN0KSB7XG4gICAgICAgICAgICB2YXIgX2RhdGUgPSBnZXRGb3JtYXREYXRlKHN0KTtcbiAgICAgICAgICAgIHZhciBfZGFyciA9IF9kYXRlLnNwbGl0KCctJyk7XG4gICAgICAgICAgICB2YXIgX2QgPSBfZGFyclsxXSArIChfZGFyclsyXSA8IDEwID8gJzAnICsgX2RhcnJbMl0gOiBfZGFyclsyXSk7XG4gICAgICAgICAgICB2YXIgZmVzdE9iaiA9IHtcbiAgICAgICAgICAgICAgICAnMDEwMSc6ICflhYPml6YnLFxuICAgICAgICAgICAgICAgICcwMjE0JzogJ+aDheS6uuiKgicsXG4gICAgICAgICAgICAgICAgJzAzMDgnOiAn5aaH5aWz6IqCJyxcbiAgICAgICAgICAgICAgICAnMDMxMic6ICfmpI3moJHoioInLFxuICAgICAgICAgICAgICAgICcwMzIwJzogJ+aYpeWIhicsXG4gICAgICAgICAgICAgICAgJzA0MDEnOiAn5oSa5Lq66IqCJyxcbiAgICAgICAgICAgICAgICAnMDQwNCc6ICfmuIXmmI7oioInLFxuICAgICAgICAgICAgICAgICcwNTAxJzogJ+WKs+WKqOiKgicsXG4gICAgICAgICAgICAgICAgJzA1MDQnOiAn6Z2S5bm06IqCJyxcbiAgICAgICAgICAgICAgICAnMDYwMSc6ICflhL/nq6XoioInLFxuICAgICAgICAgICAgICAgICcwNjIxJzogJ+Wkj+iHsycsXG4gICAgICAgICAgICAgICAgJzA3MDEnOiAn5bu65YWa6IqCJyxcbiAgICAgICAgICAgICAgICAnMDgwMSc6ICflu7rlhpvoioInLFxuICAgICAgICAgICAgICAgICcwOTEwJzogJ+aVmeW4iOiKgicsXG4gICAgICAgICAgICAgICAgJzA5MjInOiAn56eL5YiGJyxcbiAgICAgICAgICAgICAgICAnMTAwMSc6ICflm73luoboioInLFxuICAgICAgICAgICAgICAgICcxMjIxJzogJ+WGrOiHsycsXG4gICAgICAgICAgICAgICAgJzEyMjQnOiAn5bmz5a6J5aScJyxcbiAgICAgICAgICAgICAgICAnMTIyNSc6ICflnKPor57oioInXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGZlc3RPYmpbX2RdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlc3RPYmpbX2RdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflvpfmnKzlkajnrKzkuIDlpKnnmoTml6XmnJ9cbiAgICAgICAgICogQHJldHVybiB7aW5pdGRhdGV9IOWIneWni+WMluaXpeacn+WIl+ihqOesrOS4gOWkqVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5pdERhdGUoKSB7XG4gICAgICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOyAvLyDojrflvpflvZPliY3ml6XmnJ9cbiAgICAgICAgICAgIHZhciB0b2RheVllYXJudW0gPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgdmFyIHRvZGF5TW9ubnVtID0gdG9kYXkuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHZhciB0b2RheURhdGVudW0gPSB0b2RheS5nZXREYXRlKCk7XG4gICAgICAgICAgICB2YXIgdG9kYXlXZWVrbnVtID0gdG9kYXkuZ2V0RGF5KCk7XG4gICAgICAgICAgICB2YXIgaW5pdGRhdGUgPSBuZXcgRGF0ZSh0b2RheVllYXJudW0sIHRvZGF5TW9ubnVtLCB0b2RheURhdGVudW0gLSB0b2RheVdlZWtudW0pO1xuICAgICAgICAgICAgcmV0dXJuIGluaXRkYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuXG4gICAgLy8g6YCJ5oup6K+m57uG5ouN5pGE5pe26Ze0XG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VBbmltYXRpb25TdGFydCcsICcjbW9kaWZ5LXRpbWUnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAvL+WIneWni+WMluaTjeS9nFxuICAgICAgICAkKCcucmVzZXJ2YXRpb24tZGF0ZU51bScpLmh0bWwoJycpO1xuICAgICAgICAkKCcucmVzZXJ2YXRpb24tdGltZUxpc3QnKS5odG1sKCcnKTtcbiAgICAgICAgJC5jbG9zZU1vZGFsKFwiLnBpY2tlci1tb2RhbC5tb2RhbC1pblwiKTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI21vZGlmeS10aW1lJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIHN0b3JlSWQgPSBjb29raWUuZ2V0KCdtb2RpZnlTdG9yZUlkJyk7XG4gICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBkZWZhdWx0RGF0ZSA9ICtuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCB0b2RheS5nZXREYXRlKCkpOyAvLyDmnKrpgInmi6nml6XmnJ/ml7Ys6K6+572u5LuK5aSp6buY6K6kXG4gICAgICAgIHZhciB3ZWVrQXJyID0gbmV3IEFycmF5KCfmmJ/mnJ/ml6UnLCAn5pif5pyf5LiAJywgJ+aYn+acn+S6jCcsICfmmJ/mnJ/kuIknLCAn5pif5pyf5ZubJywgJ+aYn+acn+S6lCcsICfmmJ/mnJ/lha0nKTtcbiAgICAgICAgdmFyICRwcmV2ZGF5QnRuID0gJCgnLnJlc2VydmF0aW9uLWFycm93TGVmdCcpLFxuICAgICAgICAgICAgJG5leHRkYXlCdG4gPSAkKCcucmVzZXJ2YXRpb24tYXJyb3dSaWdodCcpLFxuICAgICAgICAgICAgJG5leHRTdGVwQnRuID0gJCgnLnJlc2VydmF0aW9uLXRpbWVOb2RlQnRuJyk7XG4gICAgICAgIHZhciBtb2RpZnlDb3VudCA9IGNvb2tpZS5nZXQoJ21vZGlmeUNvdW50Jyk7XG4gICAgICAgIHZhciBjb3VudFBsYWNlSG9sZCA9IGNvb2tpZS5nZXQoJ3JlQ291bnRQbGFjZUhvbGQnKTtcbiAgICAgICAkKCcjY2hhbmdlLXRpbWUgZW0nKS5odG1sKCgyIC0gbW9kaWZ5Q291bnQpICsgJ+asoScpO1xuXG4gICAgICAgIGFycmFuZ2VUaW1lKCk7XG5cbiAgICAgICAgLy8g5LqL5Lu257uR5a6aXG4gICAgICAgICRwcmV2ZGF5QnRuLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcHJlTmV4dEhhbmRsZSgtMSk7XG4gICAgICAgIH0pOyAvLyDlt6bnrq3lpLQg5YmN5LiA5aSpXG5cbiAgICAgICAgJG5leHRkYXlCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwcmVOZXh0SGFuZGxlKDEpO1xuICAgICAgICB9KTsgLy8g5Y+z566t5aS0IOWQjuS4gOWkqVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWJjeS4gOWkqeWQjuS4gOWkqeWkhOeQhuS6i+S7tlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcHJlTmV4dEhhbmRsZShwb24pIHtcbiAgICAgICAgICAgIHZhciBvbmVEYXlTdCA9IDI0ICogMzYwMCAqIDEwMDA7XG4gICAgICAgICAgICB2YXIgX2RzdCA9IHBhcnNlSW50KGNvb2tpZS5nZXQoJ29yZGVyRGF0ZScpKSArIHBvbiAqIG9uZURheVN0O1xuICAgICAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpICsgMywgdG9kYXkuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgIGlmICgoKHBvbiA+IDApICYmIChfZHN0IDw9IGxhc3REYXkpKSB8fCAoKHBvbiA8IDApICYmIChfZHN0ID4gKHRvZGF5IC0gb25lRGF5U3QpKSkpIHtcbiAgICAgICAgICAgICAgICBjb29raWUuc2V0KCdvcmRlckRhdGUnLCBfZHN0KTtcbiAgICAgICAgICAgICAgICBhcnJhbmdlVGltZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLnRvYXN0KCflj6rog73pooTnuqbku4rlpKnkuYvlkI7kuInkuKrmnIjlhoXnmoTml7bpl7Tlk6YnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaPkuWFpeaXtumXtOWIl+ihqFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYXJyYW5nZVRpbWUoKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZUZvcm1hdCA9IGdldEZvcm1hdERhdGUocGFyc2VJbnQoY29va2llLmdldCgnb3JkZXJEYXRlJykpKTtcbiAgICAgICAgICAgIHZhciB0aW1lTGlzdEh0bWwgPSAnJztcbiAgICAgICAgICAgIHZhciBoZWFkRGF0ZUh0bWwgPSAnJztcbiAgICAgICAgICAgIHZhciAkaGVhZERhdGVOb2RlID0gJCgnLnJlc2VydmF0aW9uLWRhdGVOdW0nKTtcbiAgICAgICAgICAgIHZhciAkdGltZUxpc3ROb2RlID0gJCgnLnJlc2VydmF0aW9uLXRpbWVMaXN0Jyk7IC8vIOaXtumXtOiKgueCueebruagh+WuueWZqFxuICAgICAgICAgICAgdmFyIGFpZCA9IGNvb2tpZS5nZXQoJ2FpZCcpO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHt9O1xuICAgICAgICAgICAgcmVxLmFpZCA9IGFpZDtcbiAgICAgICAgICAgIHJlcS5zaWQgPSBzdG9yZUlkO1xuICAgICAgICAgICAgcmVxLmRhdGUgPSBkYXRlRm9ybWF0O1xuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAkLmdldChtX21vZHVsZSArICcvU2FwaS9nZXRTdG9yZURheVJlbWFpbicsIHJlcSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIOiOt+W+l+aXtumXtOiKgueCueWIl+ihqFxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZU4gPSBkYXRhLm1zZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNkYXkgPSBuZXcgRGF0ZShwYXJzZUludChjb29raWUuZ2V0KCdvcmRlckRhdGUnKSkpOyAvLyDlvZPliY3pooTnuqbml6XmnJ9cbiAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJudW0gPSB0aGlzZGF5LmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250bnVtID0gdGhpc2RheS5nZXRNb250aCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2Vla251bSA9IHRoaXNkYXkuZ2V0RGF5KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlbnVtID0gdGhpc2RheS5nZXREYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3ZWVrZGF5ID0gd2Vla0Fyclt3ZWVrbnVtXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWREYXRlSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxjb3VudCA9IDA7IC8vIOiOt+WPluW9k+WkqeWJqeS9meS9jee9ruaAu+aVsFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGRhdGVOLnJlbWFpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxjb3VudCArPSBkYXRlTi5yZW1haW5baV0uY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBoZWFkRGF0ZUh0bWwgPSBtb250bnVtICsgMSArICcg5pyIICcgKyBkYXRlbnVtICsgJyDml6UgJyArICc8ZW0+JyArIHdlZWtkYXkgKyAnPC9lbT4nO1xuICAgICAgICAgICAgICAgICAgICAkaGVhZERhdGVOb2RlLmh0bWwoaGVhZERhdGVIdG1sKTsgLy8g6K6+572u5aS06YOo5pi+56S65pe26Ze0XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGVOLnJlbWFpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVVbml0SHRtbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlTi5yZW1haW5ba2V5XS50aW1lKSB7IC8vIOS7heW9k+WQjuWPsOaciei/lOWbnuaXtumXtOeCueaXtuaYvuekulxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWinuWKoOmjjuaOp+WIpOaWrVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKChkYXRlTi5jb3Vwb25MaW1pdCA+PSB0b3RhbGNvdW50KSAmJiAoZGF0ZU4ubmVlZFJNID09PSAxKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChkYXRlTi5yZW1haW5ba2V5XS5jb3VudCA+IDApICYmIChrZXkgKiAxMDAwID4gK3RvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZVVuaXRIdG1sID0gJzxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBkYXRhLXRpbWU9XCInICsga2V5ICsgJ1wiIGRhdGEtY291bnQ9XCInICsgZGF0ZU4ucmVtYWluW2tleV0uY291bnQgKyAnXCI+JyArIGRhdGVOLnJlbWFpbltrZXldLnRpbWUgKyAnPC9hPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lVW5pdEh0bWwgPSAnPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwib2ZmXCIgZGF0YS10aW1lPVwiJyArIGtleSArICdcIj4nICsgZGF0ZU4ucmVtYWluW2tleV0udGltZSArICc8L2E+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVVbml0SHRtbCA9ICc8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJvZmZcIiBkYXRhLXRpbWU9XCInICsga2V5ICsgJ1wiPicgKyBkYXRlTi5yZW1haW5ba2V5XS50aW1lICsgJzwvYT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lTGlzdEh0bWwgKz0gdGltZVVuaXRIdG1sO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJHRpbWVMaXN0Tm9kZS5odG1sKHRpbWVMaXN0SHRtbCk7IC8vIOaPkuWFpeaXtumXtOiKgueCuVxuICAgICAgICAgICAgICAgICAgICAvL+aXtumXtOWNoOS9jeiuoeeul1xuICAgICAgICAgICAgICAgICAgICB0aW1lUGxhY2VIb2xkKGNvdW50UGxhY2VIb2xkKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOeCueWHu+aXtumXtOiKgueCuSzojrflvpfpooTnuqbml7bpl7Qs5bm26auY5Lqu5pi+56S6XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZXNlcnZhdGlvbi10aW1lTGlzdCBhOm5vdCgub2ZmKScpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yZXNlcnZhdGlvbi10aW1lTGlzdCBhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmj5DkuqTpooTnuqbml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmRlclRpbWUgPSAkKHRoaXMpLmRhdGEoJ3RpbWUnKSAqIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5haWQgPSBjb29raWUuZ2V0KCdhaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub3JkZXJUaW1lID0gZ2V0Rm9ybWF0VGltZShvcmRlclRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5jb25maXJtKGRhdGEub3JkZXJUaW1lLCAn6YeN6YCJ5qGj5pyfJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvbW9kaWZ5T3JkZXJUaW1lJywgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llLnJlbW92ZSgnb3JkZXJEYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWUucmVtb3ZlKCdtb2RpZnlDb3VudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llLnJlbW92ZSgnbW9kaWZ5U3RvcmVJZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvb3JkZXJzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICdqc29uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbiAgICAvKipcbiAgICAgKiDml7bpl7TmiLPmoLzlvI/ovazljJbkuLogeXktbW0tZGRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IDIwMTYtNi0yM1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEZvcm1hdERhdGUodHMpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0cyk7XG4gICAgICAgIHZhciBtb250aG51bSA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKSArICctJyArICgobW9udGhudW0gKyAxKSA8IDEwID8gJzAnICsgKG1vbnRobnVtICsgMSkgOiArKG1vbnRobnVtICsgMSkpICsgJy0nICsgZGF0ZS5nZXREYXRlKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDml7bpl7TmiLPmoLzlvI/ovazljJbkuLogeXktbW0tZGQgaGg6bW1cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IDIwMTYtNi0yMyAyMjoyMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEZvcm1hdFRpbWUodHMpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0cyk7XG4gICAgICAgIHZhciBob3VybnVtID0gZGF0ZS5nZXRIb3VycygpICsgJzonO1xuICAgICAgICB2YXIgbWlubnVtID0gKGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgdmFyIHRpbWUgPSBnZXRGb3JtYXREYXRlKHRzKSArICcgJyArIGhvdXJudW0gKyBtaW5udW07XG4gICAgICAgIHJldHVybiB0aW1lO1xuICAgIH1cbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvanMvbW9kaWZ5U2NoZWR1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
}, function(module, exports) {
	eval("$(function() {\n    $(document).on('pageInit', '#magic', function(e, Id, page) {\n        var aid = cookie.get('aid');\n        var isSubmit = false;\n        checkNps(aid);\n        showQuestion();\n\n\n        function showQuestion() {\n            $.get(m_module + '/Sapi/getANpsQuestions', function(data) {\n                if (data.error === 0) {\n                    var questions = data.msg;\n                    var labelHtml = '';\n                    for (var i = 0; i < questions.length; i++) {\n                        labelHtml += '<div class=\"input-wrap\"><p>' + (i + 1) + '.' +\n                            questions[i].question + '</p><input name=' +\n                            questions[i].id + ' value=\"yes\" type=\"radio\" class=\"regular-radio\" id=\"data-' +\n                            i + '\"><label></label><label for=\"data-' +\n                            i + '\" class=\"label-checked\">是</label><input name=\"' +\n                            questions[i].id + '\" value = \"no\" type = \"radio\" class=\"regular-radio\" id=\"data-no-' +\n                            i + '\"><label></label><label class=\"label-checked\" for=\"data-no-' +\n                            i + '\">否</label></div>';\n                    }\n                    $('.quest-content').html(labelHtml);\n                    //提交问卷\n                    $('#btn-sub').on('click', function() {\n                        var data = {};\n                        data.answer = {};\n                        data.aid = aid;\n\n                        if ($('input[type^=radio]:checked').length != 10) {\n                            $.toast('您的意见很重要,请将问卷填完整再提交哦');\n                            return false;\n                        } else {\n                            var answers = $('input[type^=radio]:checked');\n                            for (var i = 0; i < answers.length; i++) {\n                                if (answers[i].value == 'yes') {\n                                    data.answer[questions[i].id] = 1;\n                                } else {\n                                    data.answer[questions[i].id] = 0;\n                                }\n                            }\n                        }\n                        //防止重复提交\n                        if (isSubmit) {\n                            $.toast('提交失败,请勿重复提交');\n                            return false;\n                        }\n                        isSubmit = true;\n                        $.showIndicator();\n                        $.post(m_module + '/Api/logMagic', { answer: JSON.stringify(data) },\n                            function(response) {\n                                $.hideIndicator();\n                                $('#loadingToast').remove();\n                                if (response.error === 0) {\n                                    $.toast(response.msg);\n                                    setTimeout(function() {\n                                        $.router.load('/Index/downPhoto');\n                                    }, 2000);\n                                } else {\n                                    $.toast('提交失败,' + response.msg);\n                                    isSubmit = false;\n                                }\n                            }, 'json'\n                        );\n                    });\n                }\n            });\n        }\n\n\n        /**\n         * 检查订单是否已经填写NPS\n         */\n        function checkNps(aid) {\n            var data = {};\n            data.aid = aid;\n            $.showIndicator();\n            $.post(m_module + '/Api/checkNps', data, function(response) {\n                $.hideIndicator();\n                if (response.error) {\n                    if (response.error === 403) {\n                        $.router.load('/Index/downPhoto');\n                    } else if (response.error === 400) {\n                        $.router.load('/Index/login');\n                    } else {\n                        $.toast(response.msg);\n                    }\n                }\n            });\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL21hZ2ljLmpzPzNlYmMiXSwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpIHtcbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI21hZ2ljJywgZnVuY3Rpb24oZSwgSWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIGFpZCA9IGNvb2tpZS5nZXQoJ2FpZCcpO1xuICAgICAgICB2YXIgaXNTdWJtaXQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tOcHMoYWlkKTtcbiAgICAgICAgc2hvd1F1ZXN0aW9uKCk7XG5cblxuICAgICAgICBmdW5jdGlvbiBzaG93UXVlc3Rpb24oKSB7XG4gICAgICAgICAgICAkLmdldChtX21vZHVsZSArICcvU2FwaS9nZXRBTnBzUXVlc3Rpb25zJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVzdGlvbnMgPSBkYXRhLm1zZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxIdG1sICs9ICc8ZGl2IGNsYXNzPVwiaW5wdXQtd3JhcFwiPjxwPicgKyAoaSArIDEpICsgJy4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnNbaV0ucXVlc3Rpb24gKyAnPC9wPjxpbnB1dCBuYW1lPScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uc1tpXS5pZCArICcgdmFsdWU9XCJ5ZXNcIiB0eXBlPVwicmFkaW9cIiBjbGFzcz1cInJlZ3VsYXItcmFkaW9cIiBpZD1cImRhdGEtJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArICdcIj48bGFiZWw+PC9sYWJlbD48bGFiZWwgZm9yPVwiZGF0YS0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICsgJ1wiIGNsYXNzPVwibGFiZWwtY2hlY2tlZFwiPuaYrzwvbGFiZWw+PGlucHV0IG5hbWU9XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnNbaV0uaWQgKyAnXCIgdmFsdWUgPSBcIm5vXCIgdHlwZSA9IFwicmFkaW9cIiBjbGFzcz1cInJlZ3VsYXItcmFkaW9cIiBpZD1cImRhdGEtbm8tJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArICdcIj48bGFiZWw+PC9sYWJlbD48bGFiZWwgY2xhc3M9XCJsYWJlbC1jaGVja2VkXCIgZm9yPVwiZGF0YS1uby0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICsgJ1wiPuWQpjwvbGFiZWw+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKCcucXVlc3QtY29udGVudCcpLmh0bWwobGFiZWxIdG1sKTtcbiAgICAgICAgICAgICAgICAgICAgLy/mj5DkuqTpl67ljbdcbiAgICAgICAgICAgICAgICAgICAgJCgnI2J0bi1zdWInKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmFuc3dlciA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5haWQgPSBhaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCdpbnB1dFt0eXBlXj1yYWRpb106Y2hlY2tlZCcpLmxlbmd0aCAhPSAxMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QoJ+aCqOeahOaEj+ingeW+iOmHjeimgSzor7flsIbpl67ljbfloavlrozmlbTlho3mj5DkuqTlk6YnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnN3ZXJzID0gJCgnaW5wdXRbdHlwZV49cmFkaW9dOmNoZWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuc3dlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuc3dlcnNbaV0udmFsdWUgPT0gJ3llcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYW5zd2VyW3F1ZXN0aW9uc1tpXS5pZF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5hbnN3ZXJbcXVlc3Rpb25zW2ldLmlkXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+mYsuatoumHjeWkjeaPkOS6pFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3VibWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC50b2FzdCgn5o+Q5Lqk5aSx6LSlLOivt+WLv+mHjeWkjeaPkOS6pCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvbG9nTWFnaWMnLCB7IGFuc3dlcjogSlNPTi5zdHJpbmdpZnkoZGF0YSkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2xvYWRpbmdUb2FzdCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2Rvd25QaG90bycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KCfmj5DkuqTlpLHotKUsJyArIHJlc3BvbnNlLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOajgOafpeiuouWNleaYr+WQpuW3sue7j+Whq+WGmU5QU1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tOcHMoYWlkKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgZGF0YS5haWQgPSBhaWQ7XG4gICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICQucG9zdChtX21vZHVsZSArICcvQXBpL2NoZWNrTnBzJywgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9kb3duUGhvdG8nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL21hZ2ljLmpzXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("$(function() {\n    // 个人信息模块\n    $(document).on('pageAnimationStart', '#my-info', function(e, id, page) {\n        $.closeModal('.modal-in');\n    });\n\n\n\n    $(document).on('pageInit', '#my-info', function(e, id, page) {\n        banTouchmove('#my-info'); // 禁止页面滑动\n        getUserBaseInfo(); // 获取基本信息\n\n        // 路由\n        $('.myInfo-userInfo-userData').on('click', function() {\n            $.router.load('/Index/myData');\n        });\n        $('.myInfo-userInfo-userCoupons').on('click', function() {\n            $.router.load('/Index/myCoupons');\n        });\n        $('.myInfo-userInfo-modifyPassWord').on('click', function() {\n            $.router.load('/Index/myPassword');\n        });\n        $('.myInfo-userInfo-userShoot').on('click', function() {\n            $.router.load('/Index/feedBack');\n        });\n        $('.myInfo-userInfo-agreement').on('click', function() {\n            $.router.load('/Index/agreement');\n        });\n\n        // 退出登录\n        $(document).on('click', '.myInfo-userInfo-outState', function() {\n            $.closeModal('.modal-in');\n            var buttons1 = [{\n                text: '退出登录',\n                color: 'danger',\n                onClick: function() {\n                    $.post(m_module + '/Api/logout', function(response) {\n                        window.location.href = m_module + '/Index/home';\n                    });\n                }\n            }];\n            var buttons2 = [{\n                text: '取消',\n                onClick: function() {}\n            }];\n            var groups = [buttons1, buttons2];\n            $.actions(groups);\n        });\n\n\n        /**\n         * 请求用户基本信息\n         */\n        function getUserBaseInfo() {\n            var name, headimg, couponcount, imgErrorImg;\n            $.showIndicator();\n            $.get(m_module + '/Api/getUserInfo', function(data) {\n                if (data.error === 0) {\n                    $.hideIndicator();\n                    var userInfo = data.msg;\n                    name = userInfo.U_Name;\n                    headimg = userInfo.U_HeadImg;\n                    couponcount = userInfo.U_CouponCount;\n                    if (headimg !== '') {\n                        $('.myInfo-userInfo img').attr({\n                            'src': headimg\n                        }).on('load', function() {\n                            $(this).show();\n                            $('.wrapper').hide();\n                        });\n                    } else {\n                        $('.myInfo-userInfo img').show();\n                        $('.wrapper').hide();\n                    }\n                    $('.myInfo-userName').html(name);\n                    $('.myInfo-userInfo-userCoupons span').html(couponcount + '张可用<em class=\"icon icon-right\"></em>');\n                } else if (data.error === 400) {\n                    $.router.load('/Index/login');\n                }\n\n            });\n        }\n    });\n\n\n\n    // 修改个人信息\n    $(document).on('pageAnimationStart', '#my-data', function(e, id, page) {\n        $.closeModal('.modal-in');\n    });\n\n\n\n    $(document).on('pageInit', '#my-data', function(e, id, page) {\n        var isSubmit = false;\n        banTouchmove('#my-data'); // 禁止页面滑动\n        getUserInfo(); // 获取上一次保存的个人信息\n\n        // 保存个人信息修改\n        $('.myData-saveBtn').on('click', function() {\n            submitUserinfo();\n        });\n\n        //日期插件初始化\n        $('#otherDate').calendar({\n            value: ['1990-01-01'],\n            inputReadOnly: true\n        });\n\n        // 性别选择\n        $('#usersex').picker({\n            inputReadOnly: true,\n            toolbarTemplate: '<header class=\"bar bar-nav\">' +\n                '<button class=\"button button-link pull-right close-picker\">完成</button>' +\n                '<h1 class=\"title\">请选择性别</h1>' +\n                '</header>',\n            cols: [{\n                textAlign: 'center',\n                values: ['男', '女'],\n            }]\n        });\n\n\n        /**\n         * 获得上次的用户信息\n         */\n        function getUserInfo() {\n            $.get(m_module + '/Api/getAccountUserInfo', function(data) {\n                var sexArr = ['', '男', '女'];\n                if (data.error === 0) {\n                    var userinfo = data.msg;\n                    var name = userinfo.U_Name;\n                    var sex = sexArr[userinfo.U_Sex];\n                    var birth = getFormatDate(userinfo.U_Birth * 1000);\n                    $('#username').val(name);\n                    $('#otherDate').val(userinfo.U_Birth ? birth : '');\n                    $('#usersex').val(sex);\n                } else if (data.error === 400) {\n                    $.router.load('/Index/login');\n                }\n            });\n        }\n\n\n        /**\n         * 时间戳格式转化为 yy-mm-dd\n         * @return {String} 2016-6-23\n         */\n        function getFormatDate(ts) {\n            var date = new Date(ts);\n            var monthnum = date.getMonth();\n            return date.getFullYear() + '-' + ((monthnum + 1) < 10 ? '0' + (monthnum + 1) : +(monthnum + 1)) + '-' + date.getDate();\n        }\n\n\n        /**\n         * 保存修改信息\n         */\n        function submitUserinfo() {\n            var data = {};\n            var username, userbirthday, usersex, uid;\n            username = $('#username').val();\n            userbirthday = $('#otherDate').val();\n            usersex = $('#usersex').val() == '男' ? 1 : 2;\n            data.name = username;\n            data.sex = usersex;\n            data.birth = userbirthday;\n            if (isSubmit) {\n                return false;\n            }\n            isSubmit = true;\n            $.showIndicator();\n            $.post(m_module + '/Api/modifyUserInfo', data, function(response) {\n                $.hideIndicator();\n                if (response.error === 0) {\n                    $.toast(response.msg);\n                    isSubmit = false;\n                } else if (response.error === 400) {\n                    $.router.load('/Index/login');\n                } else {\n                    $.toast(response.msg);\n                    isSubmit = false;\n                }\n            }, 'json');\n        }\n    });\n\n\n\n    // 修改密码\n    $(document).on('pageAnimationStart', '#my-password', function(e, id, page) {\n        $.closeModal('.modal-in');\n        $.showIndicator();\n    });\n\n\n\n    $(document).on('pageInit', '#my-password', function(e, id, page) {\n        var isSubmit = false;\n        banTouchmove('#my-password'); // 阻止滑动页面\n        inputStyleShow();\n\n        $.hideIndicator();\n        $('.password-successBtn').on('click', modifyPassword);\n\n\n        /**\n         * 修改密码\n         */\n        function modifyPassword() {\n            var data = {};\n            var oldpass = $('#oldpass').val();\n            var newpass = $('#newpass').val();\n            var renewpass = $('#renewpass').val();\n            if (isSubmit) {\n                return false;\n            }\n            isSubmit = true;\n            if (newpass !== renewpass) {\n                $.toast('两次输入密码不一致,请重新输入');\n                return false;\n            } else {\n                data.pass = newpass;\n            }\n            $.showIndicator();\n            $.post(m_module + '/Api/modifyPass', data, function(response) {\n                if (response === 0) {\n                    $.hideIndicator();\n                    $.toast(response.msg);\n                    isSubmit = false;\n                } else if (response.error === 400) {\n                    $.hideIndicator();\n                    $.router.load('/Index/login');\n                } else {\n                    $.hideIndicator();\n                    $.toast(response.msg);\n                    isSubmit = false;\n                }\n            }, 'json');\n        }\n    });\n\n\n\n    // 优惠券\n    $(document).on('pageAnimationStart', '#my-coupons', function(e, id, page) {\n        $.closeModal('.modal-in');\n        $.showIndicator();\n    });\n\n\n\n    $(document).on('pageInit', '#my-coupons', function(e, id, page) {\n        var hasGetCoupons = false;\n        getUserCoupons(1); // 获取可用优惠券\n\n        $.hideIndicator();\n        $('.myCoupons-addBtn').on('click', addCoupon); // 添加抵用券\n        $('[href=\"#content-block-set-2\"]').on('click', function() {\n            getUserCoupons(2); // 获取不可用优惠券\n        });\n\n\n        /**\n         * 获取用户的优惠券信息\n         */\n        function getUserCoupons(id) {\n            if (hasGetCoupons === true) {\n                return false;\n            }\n            $.showIndicator();\n            if (id === 2) {\n                hasGetCoupons = true;\n            }\n            $.get(m_module + '/Api/getUserCoupon/type/' + id, function(data) {\n                $.hideIndicator();\n                if (data.error === 0) {\n                    var myCoup = data.msg;\n                    var usefulHtml = '';\n                    var uselessHtml = '';\n                    var usefulArr = [];\n                    if (id === 1) {\n                        for (var i in myCoup) {\n                            usefulArr.push(i);\n                            // 未过期,未用\n                            usefulHtml += '<div class=\"content-block\"><div class=\"myCoupons-listWrap\"><span class=\"myCoupons-price\">￥<b>' +\n                                myCoup[i].C_Money + '</b></span><div class=\"myCoupons-couponInfo\"><h3>抵价券</h3><p class=\"myCoupons-couponDate\"><span></span>全国门店通用</p><p class=\"myCoupons-couponStore\"><span></span>截止日期: ' +\n                                myCoup[i].C_ExpireAt + '</p></div></div></div>';\n                        }\n                        $('#content-block-set-1').html(usefulHtml);\n                    } else {\n                        for (var i in myCoup) {\n                            usefulArr.push(i);\n                            // 已过期或已使用\n                            uselessHtml += '<div class=\"content-block\"><div class=\"myCoupons-listWrap off\"><span class=\"myCoupons-price\">￥<b>' +\n                                myCoup[i].C_Money + '</b></span><div class=\"myCoupons-couponInfo\"><h3>抵价券</h3><p class=\"myCoupons-couponDate\"><span></span>全国门店通用</p><p class=\"myCoupons-couponStore\"><span></span>截止日期: ' +\n                                (myCoup[i].C_IsUsed === '1' ? myCoup[i].C_ExpireAt + '</p><span class=\"myCoupons-usedIcon\"></span>' : myCoup[i].C_ExpireAt + '</p><span class=\"myCoupons-expiredIcon\"></span>') + '</div></div></div>';\n                        }\n                        $('#content-block-set-2').html(uselessHtml);\n                    }\n                } else if (data.error === 400) {\n                    $.router.load('/Index/login');\n                    return false;\n                }\n                isBackgNone(id);\n            });\n        }\n\n\n        /**\n         * 添加优惠券\n         */\n        function addCoupon() {\n            $.prompt('填写兑换码', function(value) {\n                var data = {};\n                data.code = value;\n                $.showIndicator();\n                $.post(m_module + '/Api/bindCoupon', data, function(response) {\n                    if (response.error === 0) {\n                        $.hideIndicator();\n                        $.toast(response.msg);\n                        // 请求优惠券数据\n                        setTimeout(function() {\n                            getUserCoupons(1);\n                        }, 500);\n                    } else if (response.error === 400) {\n                        $.hideIndicator();\n                        $.router.load('/Index/login');\n                    } else {\n                        $.hideIndicator();\n                        $.toast(response.msg);\n                    }\n                }, 'json');\n            }, function(value) {});\n        }\n\n\n        /**\n         * 无优惠券或者没有加载到本地时显示的背景\n         */\n        function isBackgNone(id) {\n            if ($('#content-block-set-' + id).children().length) {\n                $('.content').removeClass('none');\n            } else {\n                $('.content').addClass('none');\n            }\n        }\n    });\n\n\n\n    // 反馈\n    $(document).on('pageAnimationStart', '#feedback', function(e, id, page) {\n        $.closeModal('.modal-in');\n    });\n\n\n\n    $(document).on('pageInit', '#feedback', function(e, id, page) {\n        var isSubmit = false;\n        banTouchmove('#feedback'); // 阻止滑动页面\n\n        $('.feedBack-sendBtn').on('click', submitFeedback); // 提交反馈\n        $('.feedBack-text').on('click', function() { // 解决placehold 多行Bug\n            // 隐藏覆盖文本\n            $(this).hide();\n            // 聚焦textarea选框\n            $('textarea').focus();\n            // 判断textarea是否输入值\n            $('textarea').blur(function() {\n                var $text = $('textarea').val();\n                if (!$text) {\n                    $('.feedBack-text').show();\n                }\n            });\n\n        });\n\n\n        /**\n         * 提交反馈post\n         */\n        function submitFeedback() {\n            var data = {};\n            var feedback = $.trim($('.item-input textarea').val());\n            data.content = feedback;\n            if (isSubmit) {\n                return false;\n            }\n            if (feedback.length < 10) {\n                $.toast('请写下10字以上的建议，帮助小海马进步吧！');\n                return false;\n            }\n            isSubmit = true;\n            $.showIndicator();\n            $.post(m_module + '/Api/submitCustomReply', data, function(response) {\n                if (response.error === 0) {\n                    $.hideIndicator();\n                    $.toast(response.msg);\n                    setTimeout(function() {\n                        $.router.back();\n                    }, 2000);\n                } else if (response.error === 400) {\n                    $.hideIndicator();\n                    $.router.load('/Index/login');\n                } else {\n                    $.hideIndicator();\n                    isSubmit = false;\n                    $.toast(response.msg);\n                }\n            });\n        }\n    });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL215SW5mby5qcz9lYzY3Il0sInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG4gICAgLy8g5Liq5Lq65L+h5oGv5qih5Z2XXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VBbmltYXRpb25TdGFydCcsICcjbXktaW5mbycsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgICQuY2xvc2VNb2RhbCgnLm1vZGFsLWluJyk7XG4gICAgfSk7XG5cblxuXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNteS1pbmZvJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgYmFuVG91Y2htb3ZlKCcjbXktaW5mbycpOyAvLyDnpoHmraLpobXpnaLmu5HliqhcbiAgICAgICAgZ2V0VXNlckJhc2VJbmZvKCk7IC8vIOiOt+WPluWfuuacrOS/oeaBr1xuXG4gICAgICAgIC8vIOi3r+eUsVxuICAgICAgICAkKCcubXlJbmZvLXVzZXJJbmZvLXVzZXJEYXRhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbXlEYXRhJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcubXlJbmZvLXVzZXJJbmZvLXVzZXJDb3Vwb25zJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbXlDb3Vwb25zJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcubXlJbmZvLXVzZXJJbmZvLW1vZGlmeVBhc3NXb3JkJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbXlQYXNzd29yZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLm15SW5mby11c2VySW5mby11c2VyU2hvb3QnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9mZWVkQmFjaycpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLm15SW5mby11c2VySW5mby1hZ3JlZW1lbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9hZ3JlZW1lbnQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g6YCA5Ye655m75b2VXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubXlJbmZvLXVzZXJJbmZvLW91dFN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLmNsb3NlTW9kYWwoJy5tb2RhbC1pbicpO1xuICAgICAgICAgICAgdmFyIGJ1dHRvbnMxID0gW3tcbiAgICAgICAgICAgICAgICB0ZXh0OiAn6YCA5Ye655m75b2VJyxcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQucG9zdChtX21vZHVsZSArICcvQXBpL2xvZ291dCcsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1fbW9kdWxlICsgJy9JbmRleC9ob21lJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICB2YXIgYnV0dG9uczIgPSBbe1xuICAgICAgICAgICAgICAgIHRleHQ6ICflj5bmtognLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFtidXR0b25zMSwgYnV0dG9uczJdO1xuICAgICAgICAgICAgJC5hY3Rpb25zKGdyb3Vwcyk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOivt+axgueUqOaIt+WfuuacrOS/oeaBr1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlckJhc2VJbmZvKCkge1xuICAgICAgICAgICAgdmFyIG5hbWUsIGhlYWRpbWcsIGNvdXBvbmNvdW50LCBpbWdFcnJvckltZztcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgJC5nZXQobV9tb2R1bGUgKyAnL0FwaS9nZXRVc2VySW5mbycsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJJbmZvID0gZGF0YS5tc2c7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSB1c2VySW5mby5VX05hbWU7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRpbWcgPSB1c2VySW5mby5VX0hlYWRJbWc7XG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbmNvdW50ID0gdXNlckluZm8uVV9Db3Vwb25Db3VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRpbWcgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubXlJbmZvLXVzZXJJbmZvIGltZycpLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcmMnOiBoZWFkaW1nXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy53cmFwcGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubXlJbmZvLXVzZXJJbmZvIGltZycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy53cmFwcGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy5teUluZm8tdXNlck5hbWUnKS5odG1sKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAkKCcubXlJbmZvLXVzZXJJbmZvLXVzZXJDb3Vwb25zIHNwYW4nKS5odG1sKGNvdXBvbmNvdW50ICsgJ+W8oOWPr+eUqDxlbSBjbGFzcz1cImljb24gaWNvbi1yaWdodFwiPjwvZW0+Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cblxuICAgIC8vIOS/ruaUueS4quS6uuS/oeaBr1xuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlQW5pbWF0aW9uU3RhcnQnLCAnI215LWRhdGEnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAkLmNsb3NlTW9kYWwoJy5tb2RhbC1pbicpO1xuICAgIH0pO1xuXG5cblxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlSW5pdCcsICcjbXktZGF0YScsIGZ1bmN0aW9uKGUsIGlkLCBwYWdlKSB7XG4gICAgICAgIHZhciBpc1N1Ym1pdCA9IGZhbHNlO1xuICAgICAgICBiYW5Ub3VjaG1vdmUoJyNteS1kYXRhJyk7IC8vIOemgeatoumhtemdoua7keWKqFxuICAgICAgICBnZXRVc2VySW5mbygpOyAvLyDojrflj5bkuIrkuIDmrKHkv53lrZjnmoTkuKrkurrkv6Hmga9cblxuICAgICAgICAvLyDkv53lrZjkuKrkurrkv6Hmga/kv67mlLlcbiAgICAgICAgJCgnLm15RGF0YS1zYXZlQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzdWJtaXRVc2VyaW5mbygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+aXpeacn+aPkuS7tuWIneWni+WMllxuICAgICAgICAkKCcjb3RoZXJEYXRlJykuY2FsZW5kYXIoe1xuICAgICAgICAgICAgdmFsdWU6IFsnMTk5MC0wMS0wMSddLFxuICAgICAgICAgICAgaW5wdXRSZWFkT25seTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDmgKfliKvpgInmi6lcbiAgICAgICAgJCgnI3VzZXJzZXgnKS5waWNrZXIoe1xuICAgICAgICAgICAgaW5wdXRSZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgIHRvb2xiYXJUZW1wbGF0ZTogJzxoZWFkZXIgY2xhc3M9XCJiYXIgYmFyLW5hdlwiPicgK1xuICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi1saW5rIHB1bGwtcmlnaHQgY2xvc2UtcGlja2VyXCI+5a6M5oiQPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAgJzxoMSBjbGFzcz1cInRpdGxlXCI+6K+36YCJ5oup5oCn5YirPC9oMT4nICtcbiAgICAgICAgICAgICAgICAnPC9oZWFkZXI+JyxcbiAgICAgICAgICAgIGNvbHM6IFt7XG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFsn55S3JywgJ+WlsyddLFxuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICog6I635b6X5LiK5qyh55qE55So5oi35L+h5oGvXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9BcGkvZ2V0QWNjb3VudFVzZXJJbmZvJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXhBcnIgPSBbJycsICfnlLcnLCAn5aWzJ107XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJpbmZvID0gZGF0YS5tc2c7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gdXNlcmluZm8uVV9OYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2V4ID0gc2V4QXJyW3VzZXJpbmZvLlVfU2V4XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpcnRoID0gZ2V0Rm9ybWF0RGF0ZSh1c2VyaW5mby5VX0JpcnRoICogMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN1c2VybmFtZScpLnZhbChuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI290aGVyRGF0ZScpLnZhbCh1c2VyaW5mby5VX0JpcnRoID8gYmlydGggOiAnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN1c2Vyc2V4JykudmFsKHNleCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmVycm9yID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml7bpl7TmiLPmoLzlvI/ovazljJbkuLogeXktbW0tZGRcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSAyMDE2LTYtMjNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEZvcm1hdERhdGUodHMpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodHMpO1xuICAgICAgICAgICAgdmFyIG1vbnRobnVtID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKSArICctJyArICgobW9udGhudW0gKyAxKSA8IDEwID8gJzAnICsgKG1vbnRobnVtICsgMSkgOiArKG1vbnRobnVtICsgMSkpICsgJy0nICsgZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDkv53lrZjkv67mlLnkv6Hmga9cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHN1Ym1pdFVzZXJpbmZvKCkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciB1c2VybmFtZSwgdXNlcmJpcnRoZGF5LCB1c2Vyc2V4LCB1aWQ7XG4gICAgICAgICAgICB1c2VybmFtZSA9ICQoJyN1c2VybmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgdXNlcmJpcnRoZGF5ID0gJCgnI290aGVyRGF0ZScpLnZhbCgpO1xuICAgICAgICAgICAgdXNlcnNleCA9ICQoJyN1c2Vyc2V4JykudmFsKCkgPT0gJ+eUtycgPyAxIDogMjtcbiAgICAgICAgICAgIGRhdGEubmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICAgICAgZGF0YS5zZXggPSB1c2Vyc2V4O1xuICAgICAgICAgICAgZGF0YS5iaXJ0aCA9IHVzZXJiaXJ0aGRheTtcbiAgICAgICAgICAgIGlmIChpc1N1Ym1pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlzU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvbW9kaWZ5VXNlckluZm8nLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KHJlc3BvbnNlLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgIGlzU3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQucm91dGVyLmxvYWQoJy9JbmRleC9sb2dpbicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgaXNTdWJtaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAnanNvbicpO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuXG4gICAgLy8g5L+u5pS55a+G56CBXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VBbmltYXRpb25TdGFydCcsICcjbXktcGFzc3dvcmQnLCBmdW5jdGlvbihlLCBpZCwgcGFnZSkge1xuICAgICAgICAkLmNsb3NlTW9kYWwoJy5tb2RhbC1pbicpO1xuICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI215LXBhc3N3b3JkJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIGlzU3VibWl0ID0gZmFsc2U7XG4gICAgICAgIGJhblRvdWNobW92ZSgnI215LXBhc3N3b3JkJyk7IC8vIOmYu+atoua7keWKqOmhtemdolxuICAgICAgICBpbnB1dFN0eWxlU2hvdygpO1xuXG4gICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAkKCcucGFzc3dvcmQtc3VjY2Vzc0J0bicpLm9uKCdjbGljaycsIG1vZGlmeVBhc3N3b3JkKTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDkv67mlLnlr4bnoIFcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1vZGlmeVBhc3N3b3JkKCkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBvbGRwYXNzID0gJCgnI29sZHBhc3MnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBuZXdwYXNzID0gJCgnI25ld3Bhc3MnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciByZW5ld3Bhc3MgPSAkKCcjcmVuZXdwYXNzJykudmFsKCk7XG4gICAgICAgICAgICBpZiAoaXNTdWJtaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc1N1Ym1pdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAobmV3cGFzcyAhPT0gcmVuZXdwYXNzKSB7XG4gICAgICAgICAgICAgICAgJC50b2FzdCgn5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0LOivt+mHjeaWsOi+k+WFpScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YS5wYXNzID0gbmV3cGFzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuc2hvd0luZGljYXRvcigpO1xuICAgICAgICAgICAgJC5wb3N0KG1fbW9kdWxlICsgJy9BcGkvbW9kaWZ5UGFzcycsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KHJlc3BvbnNlLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgIGlzU3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5lcnJvciA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBpc1N1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICdqc29uJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG5cbiAgICAvLyDkvJjmg6DliLhcbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUFuaW1hdGlvblN0YXJ0JywgJyNteS1jb3Vwb25zJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgJC5jbG9zZU1vZGFsKCcubW9kYWwtaW4nKTtcbiAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgfSk7XG5cblxuXG4gICAgJChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywgJyNteS1jb3Vwb25zJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIGhhc0dldENvdXBvbnMgPSBmYWxzZTtcbiAgICAgICAgZ2V0VXNlckNvdXBvbnMoMSk7IC8vIOiOt+WPluWPr+eUqOS8mOaDoOWIuFxuXG4gICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAkKCcubXlDb3Vwb25zLWFkZEJ0bicpLm9uKCdjbGljaycsIGFkZENvdXBvbik7IC8vIOa3u+WKoOaKteeUqOWIuFxuICAgICAgICAkKCdbaHJlZj1cIiNjb250ZW50LWJsb2NrLXNldC0yXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnZXRVc2VyQ291cG9ucygyKTsgLy8g6I635Y+W5LiN5Y+v55So5LyY5oOg5Yi4XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+WPlueUqOaIt+eahOS8mOaDoOWIuOS/oeaBr1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlckNvdXBvbnMoaWQpIHtcbiAgICAgICAgICAgIGlmIChoYXNHZXRDb3Vwb25zID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICBpZiAoaWQgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBoYXNHZXRDb3Vwb25zID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuZ2V0KG1fbW9kdWxlICsgJy9BcGkvZ2V0VXNlckNvdXBvbi90eXBlLycgKyBpZCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBteUNvdXAgPSBkYXRhLm1zZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZWZ1bEh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZWxlc3NIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VmdWxBcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIG15Q291cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWZ1bEFyci5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOacqui/h+acnyzmnKrnlKhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VmdWxIdG1sICs9ICc8ZGl2IGNsYXNzPVwiY29udGVudC1ibG9ja1wiPjxkaXYgY2xhc3M9XCJteUNvdXBvbnMtbGlzdFdyYXBcIj48c3BhbiBjbGFzcz1cIm15Q291cG9ucy1wcmljZVwiPu+/pTxiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUNvdXBbaV0uQ19Nb25leSArICc8L2I+PC9zcGFuPjxkaXYgY2xhc3M9XCJteUNvdXBvbnMtY291cG9uSW5mb1wiPjxoMz7mirXku7fliLg8L2gzPjxwIGNsYXNzPVwibXlDb3Vwb25zLWNvdXBvbkRhdGVcIj48c3Bhbj48L3NwYW4+5YWo5Zu96Zeo5bqX6YCa55SoPC9wPjxwIGNsYXNzPVwibXlDb3Vwb25zLWNvdXBvblN0b3JlXCI+PHNwYW4+PC9zcGFuPuaIquatouaXpeacnzogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q291cFtpXS5DX0V4cGlyZUF0ICsgJzwvcD48L2Rpdj48L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2NvbnRlbnQtYmxvY2stc2V0LTEnKS5odG1sKHVzZWZ1bEh0bWwpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBteUNvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VmdWxBcnIucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlt7Lov4fmnJ/miJblt7Lkvb/nlKhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VsZXNzSHRtbCArPSAnPGRpdiBjbGFzcz1cImNvbnRlbnQtYmxvY2tcIj48ZGl2IGNsYXNzPVwibXlDb3Vwb25zLWxpc3RXcmFwIG9mZlwiPjxzcGFuIGNsYXNzPVwibXlDb3Vwb25zLXByaWNlXCI+77+lPGI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q291cFtpXS5DX01vbmV5ICsgJzwvYj48L3NwYW4+PGRpdiBjbGFzcz1cIm15Q291cG9ucy1jb3Vwb25JbmZvXCI+PGgzPuaKteS7t+WIuDwvaDM+PHAgY2xhc3M9XCJteUNvdXBvbnMtY291cG9uRGF0ZVwiPjxzcGFuPjwvc3Bhbj7lhajlm73pl6jlupfpgJrnlKg8L3A+PHAgY2xhc3M9XCJteUNvdXBvbnMtY291cG9uU3RvcmVcIj48c3Bhbj48L3NwYW4+5oiq5q2i5pel5pyfOiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG15Q291cFtpXS5DX0lzVXNlZCA9PT0gJzEnID8gbXlDb3VwW2ldLkNfRXhwaXJlQXQgKyAnPC9wPjxzcGFuIGNsYXNzPVwibXlDb3Vwb25zLXVzZWRJY29uXCI+PC9zcGFuPicgOiBteUNvdXBbaV0uQ19FeHBpcmVBdCArICc8L3A+PHNwYW4gY2xhc3M9XCJteUNvdXBvbnMtZXhwaXJlZEljb25cIj48L3NwYW4+JykgKyAnPC9kaXY+PC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb250ZW50LWJsb2NrLXNldC0yJykuaHRtbCh1c2VsZXNzSHRtbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc0JhY2tnTm9uZShpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOa3u+WKoOS8mOaDoOWIuFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYWRkQ291cG9uKCkge1xuICAgICAgICAgICAgJC5wcm9tcHQoJ+Whq+WGmeWFkeaNoueggScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICBkYXRhLmNvZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAkLnNob3dJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAkLnBvc3QobV9tb2R1bGUgKyAnL0FwaS9iaW5kQ291cG9uJywgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOivt+axguS8mOaDoOWIuOaVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRVc2VyQ291cG9ucygxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5sb2FkKCcvSW5kZXgvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC50b2FzdChyZXNwb25zZS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgJ2pzb24nKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHZhbHVlKSB7fSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml6DkvJjmg6DliLjmiJbogIXmsqHmnInliqDovb3liLDmnKzlnLDml7bmmL7npLrnmoTog4zmma9cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGlzQmFja2dOb25lKGlkKSB7XG4gICAgICAgICAgICBpZiAoJCgnI2NvbnRlbnQtYmxvY2stc2V0LScgKyBpZCkuY2hpbGRyZW4oKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkKCcuY29udGVudCcpLnJlbW92ZUNsYXNzKCdub25lJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5jb250ZW50JykuYWRkQ2xhc3MoJ25vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG5cblxuICAgIC8vIOWPjemmiFxuICAgICQoZG9jdW1lbnQpLm9uKCdwYWdlQW5pbWF0aW9uU3RhcnQnLCAnI2ZlZWRiYWNrJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgJC5jbG9zZU1vZGFsKCcubW9kYWwtaW4nKTtcbiAgICB9KTtcblxuXG5cbiAgICAkKGRvY3VtZW50KS5vbigncGFnZUluaXQnLCAnI2ZlZWRiYWNrJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2UpIHtcbiAgICAgICAgdmFyIGlzU3VibWl0ID0gZmFsc2U7XG4gICAgICAgIGJhblRvdWNobW92ZSgnI2ZlZWRiYWNrJyk7IC8vIOmYu+atoua7keWKqOmhtemdolxuXG4gICAgICAgICQoJy5mZWVkQmFjay1zZW5kQnRuJykub24oJ2NsaWNrJywgc3VibWl0RmVlZGJhY2spOyAvLyDmj5DkuqTlj43ppohcbiAgICAgICAgJCgnLmZlZWRCYWNrLXRleHQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHsgLy8g6Kej5YazcGxhY2Vob2xkIOWkmuihjEJ1Z1xuICAgICAgICAgICAgLy8g6ZqQ6JeP6KaG55uW5paH5pysXG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgIC8vIOiBmueEpnRleHRhcmVh6YCJ5qGGXG4gICAgICAgICAgICAkKCd0ZXh0YXJlYScpLmZvY3VzKCk7XG4gICAgICAgICAgICAvLyDliKTmlq10ZXh0YXJlYeaYr+WQpui+k+WFpeWAvFxuICAgICAgICAgICAgJCgndGV4dGFyZWEnKS5ibHVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGV4dCA9ICQoJ3RleHRhcmVhJykudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEkdGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuZmVlZEJhY2stdGV4dCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmj5DkuqTlj43ppohwb3N0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdWJtaXRGZWVkYmFjaygpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICB2YXIgZmVlZGJhY2sgPSAkLnRyaW0oJCgnLml0ZW0taW5wdXQgdGV4dGFyZWEnKS52YWwoKSk7XG4gICAgICAgICAgICBkYXRhLmNvbnRlbnQgPSBmZWVkYmFjaztcbiAgICAgICAgICAgIGlmIChpc1N1Ym1pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmZWVkYmFjay5sZW5ndGggPCAxMCkge1xuICAgICAgICAgICAgICAgICQudG9hc3QoJ+ivt+WGmeS4izEw5a2X5Lul5LiK55qE5bu66K6u77yM5biu5Yqp5bCP5rW36ams6L+b5q2l5ZCn77yBJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgICAgJC5zaG93SW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAkLnBvc3QobV9tb2R1bGUgKyAnL0FwaS9zdWJtaXRDdXN0b21SZXBseScsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQuaGlkZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICAkLnRvYXN0KHJlc3BvbnNlLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJvdXRlci5iYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZXJyb3IgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAkLmhpZGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgJC5yb3V0ZXIubG9hZCgnL0luZGV4L2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC5oaWRlSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGlzU3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICQudG9hc3QocmVzcG9uc2UubXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9qcy9teUluZm8uanNcbiAqKiBtb2R1bGUgaWQgPSAxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
}, function(module, exports) {
	eval("\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL3FyY29kZS5qcz85MWRkIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL3FyY29kZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")
}, function(module, exports) {
	eval("$(function() {\n	$(document).on('pageInit','#errorTip', function(e, id, page){\n		$('a').on('click',function(){\n			$(this).toggleClass('active');\n		});\n	})\n\n  // 注册页面\n  $.init();\n})\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL3BhZ2Vpbml0LmpzPzJiNTgiXSwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ3BhZ2VJbml0JywnI2Vycm9yVGlwJywgZnVuY3Rpb24oZSwgaWQsIHBhZ2Upe1xuXHRcdCQoJ2EnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XG5cdFx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblx0XHR9KTtcblx0fSlcblxuICAvLyDms6jlhozpobXpnaJcbiAgJC5pbml0KCk7XG59KVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2pzL3BhZ2Vpbml0LmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvbG9naW4ubGVzcz9kZDk4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9sb2dpbi5sZXNzXG4gKiogbW9kdWxlIGlkID0gMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvcmVnaXN0ZXIubGVzcz9hNDM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9yZWdpc3Rlci5sZXNzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvaG9tZS5sZXNzP2Q2ZjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9sZXNzL2hvbWUubGVzc1xuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvc2VsZWN0U3RvcmUubGVzcz80YTRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9zZWxlY3RTdG9yZS5sZXNzXG4gKiogbW9kdWxlIGlkID0gMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvc2VsZWN0TWVhbC5sZXNzPzhkOWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9sZXNzL3NlbGVjdE1lYWwubGVzc1xuICoqIG1vZHVsZSBpZCA9IDIxXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvc2VsZWN0TWVhbEluZm8ubGVzcz81YTI3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9zZWxlY3RNZWFsSW5mby5sZXNzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvc2VsZWN0U2NoZWR1bGUubGVzcz84NGU0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9zZWxlY3RTY2hlZHVsZS5sZXNzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvc2V0dGxlbWVudEluZm8ubGVzcz9jZTIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9zZXR0bGVtZW50SW5mby5sZXNzXG4gKiogbW9kdWxlIGlkID0gMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvcGF5bWVudC5sZXNzP2Y1YjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vU3JjL1B1YmxpYy9Nb2JpbGVWMi9sZXNzL3BheW1lbnQubGVzc1xuICoqIG1vZHVsZSBpZCA9IDI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvb3JkZXJzLmxlc3M/MjI5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3Mvb3JkZXJzLmxlc3NcbiAqKiBtb2R1bGUgaWQgPSAyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvZG93blBob3RvLmxlc3M/NTkzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvZG93blBob3RvLmxlc3NcbiAqKiBtb2R1bGUgaWQgPSAyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvbW9kaWZ5U2NoZWR1bGUubGVzcz85ZTI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9tb2RpZnlTY2hlZHVsZS5sZXNzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvbWFnaWMubGVzcz80MjkxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9tYWdpYy5sZXNzXG4gKiogbW9kdWxlIGlkID0gMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvbXlJbmZvLmxlc3M/YmEzOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvbXlJbmZvLmxlc3NcbiAqKiBtb2R1bGUgaWQgPSAzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvcXJjb2RlLmxlc3M/NzVhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvcXJjb2RlLmxlc3NcbiAqKiBtb2R1bGUgaWQgPSAzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")
}, function(module, exports) {
	eval("// removed by extract-text-webpack-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9TcmMvUHVibGljL01vYmlsZVYyL2xlc3MvZXJyb3JUaXAubGVzcz9lYTY5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL1NyYy9QdWJsaWMvTW9iaWxlVjIvbGVzcy9lcnJvclRpcC5sZXNzXG4gKiogbW9kdWxlIGlkID0gMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")
}]);